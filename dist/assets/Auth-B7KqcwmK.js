import{j as e}from"./vendor-ui-T5L2aXSd.js";import{r,e as M,f as q,u as R,L as D}from"./vendor-react-Dh4HNKln.js";import{J as G,K as I,L as T,M as H,N as J,s as U,j as V,D as W}from"./vendor-firebase-D4lSkuMt.js";import{a as v,y as O,B as g,L as m,U as K,I as u,z as _,C as $,j as Q,A as X,E as c,r as Y}from"./App-BJlSktNm.js";import{L as C}from"./lock-DF-DvFPS.js";import"./index-Cd1_NYyQ.js";import"./vendor-charts-Czn4h1RS.js";const Z=O("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),A=r.forwardRef(({className:s,variant:l,...t},x)=>e.jsx("div",{ref:x,role:"alert",className:v(Z({variant:l}),s),...t}));A.displayName="Alert";const ee=r.forwardRef(({className:s,...l},t)=>e.jsx("h5",{ref:t,className:v("mb-1 font-medium leading-none tracking-tight",s),...l}));ee.displayName="AlertTitle";const E=r.forwardRef(({className:s,...l},t)=>e.jsx("div",{ref:t,className:v("text-sm [&_p]:leading-relaxed",s),...l}));E.displayName="AlertDescription";function ne(){const[s,l]=r.useState(!0),[t,x]=r.useState(""),[n,P]=r.useState(""),[h,S]=r.useState(""),[d,F]=r.useState(""),[j,o]=r.useState(""),[w,f]=r.useState(!1),p=M(),b=q(),[L]=R(),N=L.get("redirect")||"/dashboard";r.useEffect(()=>{b.pathname==="/register"?l(!1):l(!0)},[b.pathname]);const k=()=>{l(!s),o("");const a=s?"/register":"/login";window.history.pushState(null,"",a)},z=async()=>{if(c)try{const a=new G;await I(c,a),p(N)}catch(a){console.error("Google login error:",a),o("Erro ao conectar com Google.")}},B=async a=>{if(a.preventDefault(),o(""),f(!0),!c){o("Erro interno: Autenticação não configurada."),f(!1);return}try{if(s)await T(c,t,n),p(N);else{if(n!==d)throw new Error("passwords-dont-match");if(n.length<6)throw new Error("weak-password");const y=(await H(c,t,n)).user;await J(y,{displayName:h}),await U(V(Y,"users",y.uid),{username:h,email:t,favorites:[],preferredBrands:[],preferredSizes:[],walletBalance:0,wallet:{available:0,pending:0},createdAt:W()}),p("/dashboard")}}catch(i){console.error("Auth error:",i),i.message==="passwords-dont-match"?o("As palavras-passe não coincidem."):i.message==="weak-password"?o("A palavra-passe deve ter pelo menos 6 caracteres."):i.code==="auth/invalid-credential"||i.code==="auth/user-not-found"||i.code==="auth/wrong-password"?o("Credenciais inválidas."):i.code==="auth/email-already-in-use"?o("Este email já está a ser utilizado."):o("Ocorreu um erro. Tente novamente.")}finally{f(!1)}};return e.jsxs("div",{className:"flex min-h-screen w-full bg-[#F9F8F4]",children:[e.jsxs("div",{className:"hidden lg:flex w-1/2 relative overflow-hidden bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 z-10"}),e.jsx("img",{src:"https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop",alt:"Fashion Editorial",className:"absolute inset-0 w-full h-full object-cover opacity-90"}),e.jsxs("div",{className:"relative z-20 flex flex-col justify-center px-16 text-white h-full max-w-2xl",children:[e.jsxs("h2",{className:"font-serif text-6xl leading-tight mb-6",children:["Reinvente seu estilo. ",e.jsx("br",{}),e.jsx("span",{className:"italic text-emerald-200",children:"Salve o planeta."})]}),e.jsx("p",{className:"text-lg font-light opacity-90 max-w-md leading-relaxed",children:"Junte-se à comunidade que está redefinindo o luxo através da circularidade. Compre, venda e inspire-se."})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8 lg:p-16 relative",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 animate-in fade-in slide-in-from-right-8 duration-700",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"font-serif text-4xl text-foreground",children:s?"Bem-vindo de volta":"Criar conta"}),e.jsx("p",{className:"text-muted-foreground",children:s?"Continue sua jornada sustentável":"Comece a circular a moda hoje"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(g,{variant:"outline",onClick:z,className:"h-12 rounded-xl border-border/60 hover:bg-secondary/50 hover:border-primary/30 transition-all",children:[e.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.17c-.22-.66-.35-1.36-.35-2.17s.13-1.51.35-2.17V7.69H2.18C.43 11.17.43 12.83.43 12.83c0 1.67.75 3.24 2.18 4.84l3.66-2.84z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Google"]}),e.jsxs(g,{variant:"outline",className:"h-12 rounded-xl border-border/60 hover:bg-secondary/50 hover:border-primary/30 transition-all",children:[e.jsx("svg",{className:"mr-2 h-4 w-4 text-foreground",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.74 1.18 0 2.21-.93 3.69-.93 2.4.17 3.37 1.18 3.37 1.18-2.68 1.55-2.24 5.22.23 6.38-.18.58-.4 1.16-.67 1.74-.5.98-1.09 1.97-1.7 2.86zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Apple"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border/40"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-[#F9F8F4] px-2 text-muted-foreground",children:"Ou continue com email"})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-5",children:[j&&e.jsx(A,{variant:"destructive",className:"bg-red-50 border-red-100 text-red-800 rounded-xl",children:e.jsx(E,{children:j})}),!s&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"name",className:"text-sm font-medium text-foreground/80",children:"Nome Completo"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/50"}),e.jsx(u,{id:"name",type:"text",placeholder:"Seu nome",value:h,onChange:a=>S(a.target.value),required:!s,className:"pl-10 h-12 bg-white border-border/40 focus:border-primary/50 focus:ring-4 focus:ring-primary/5 rounded-xl transition-all"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"email",className:"text-sm font-medium text-foreground/80",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/50"}),e.jsx(u,{id:"email",type:"email",placeholder:"seu@email.com",value:t,onChange:a=>x(a.target.value),required:!0,className:"pl-10 h-12 bg-white border-border/40 focus:border-primary/50 focus:ring-4 focus:ring-primary/5 rounded-xl transition-all"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{htmlFor:"password",className:"text-sm font-medium text-foreground/80",children:"Palavra-passe"}),s&&e.jsx(D,{to:"/forgot-password",className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:"Esqueceu?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/50"}),e.jsx(u,{id:"password",type:"password",placeholder:"••••••••",value:n,onChange:a=>P(a.target.value),required:!0,className:"pl-10 h-12 bg-white border-border/40 focus:border-primary/50 focus:ring-4 focus:ring-primary/5 rounded-xl transition-all"})]})]}),!s&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"confirmPassword",className:"text-sm font-medium text-foreground/80",children:"Confirmar Palavra-passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/50"}),e.jsx(u,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:d,onChange:a=>F(a.target.value),required:!s,className:`pl-10 h-12 bg-white border-border/40 focus:ring-4 focus:ring-primary/5 rounded-xl transition-all ${d&&n===d?"border-emerald-500/50 focus:border-emerald-500":"focus:border-primary/50"}`}),d&&n===d&&e.jsx($,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500 animate-in zoom-in"})]})]}),e.jsx(g,{type:"submit",className:"w-full h-12 rounded-xl text-base font-medium bg-primary hover:bg-primary/90 shadow-lg shadow-primary/20 transition-all mt-4",disabled:w,children:w?e.jsx(Q,{className:"h-5 w-5 animate-spin"}):e.jsxs("span",{className:"flex items-center gap-2",children:[s?"Entrar":"Criar Conta"," ",e.jsx(X,{className:"h-4 w-4"})]})})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s?"Ainda não tem conta?":"Já tem uma conta?"," ",e.jsx("button",{onClick:k,className:"font-medium text-primary hover:underline underline-offset-4 transition-all",children:s?"Registe-se agora":"Entre aqui"})]})})]})})]})}export{ne as default};
