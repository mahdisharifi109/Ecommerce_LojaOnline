import{j as e}from"./vendor-ui-T5L2aXSd.js";import{r as n,L as c}from"./vendor-react-Dh4HNKln.js";import{i as f,j,B as d,k as l,m as p,n as g,K as N,q as v,Y as b,N as y,d as t,x as w}from"./App-BJlSktNm.js";import{f as C}from"./format-Dxh8Vach.js";import"./vendor-firebase-D4lSkuMt.js";import"./index-Cd1_NYyQ.js";import"./vendor-charts-Czn4h1RS.js";function M(){const{user:r}=f(),[i,o]=n.useState([]),[m,x]=n.useState(!0);if(n.useEffect(()=>{async function s(){if(r!=null&&r.uid)try{const a=await y.Transactions.getPurchasesByUser(r.uid);o(a)}catch(a){console.error("Error fetching purchases:",a)}finally{x(!1)}}s()},[r==null?void 0:r.uid]),m)return e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx(j,{className:"h-8 w-8 animate-spin text-primary"})});const h=s=>{switch(s){case"completed":return e.jsx(t,{className:"bg-emerald-500 hover:bg-emerald-600",children:"Concluído"});case"shipped":return e.jsx(t,{className:"bg-blue-500 hover:bg-blue-600",children:"Enviado"});case"cancelled":return e.jsx(t,{variant:"destructive",children:"Cancelado"});default:return e.jsx(t,{variant:"secondary",children:"Pendente"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-serif text-3xl font-medium",children:"As minhas compras"}),e.jsx("p",{className:"text-muted-foreground",children:"Histórico de encomendas"})]}),e.jsx(d,{asChild:!0,variant:"outline",children:e.jsxs(c,{to:"/catalog",children:[e.jsx(l,{className:"mr-2 h-4 w-4"}),"Continuar a Comprar"]})})]}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs(p,{className:"overflow-hidden border-border/50 bg-card/50 transition-all hover:bg-card hover:shadow-sm",children:[e.jsx(g,{className:"border-b border-border/50 bg-secondary/5 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-4 w-4"}),s.date?C(s.date.toDate(),"d 'de' MMMM, yyyy",{locale:w}):"Data desconhecida"]}),e.jsxs("div",{children:["ID: ",e.jsx("span",{className:"font-mono text-xs",children:s.id.substring(0,8)})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium text-foreground",children:new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(s.total)}),h(s.status)]})]})}),e.jsx(v,{className:"p-4",children:e.jsx("div",{className:"space-y-4",children:s.items.map((a,u)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 overflow-hidden rounded-md bg-secondary/20",children:a.image?e.jsx("img",{src:a.image,alt:a.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(l,{className:"h-6 w-6 text-muted-foreground/30"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(a.price)})]}),e.jsx(d,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(c,{to:`/product/${a.productId}`,children:["Ver Artigo ",e.jsx(b,{className:"ml-1 h-4 w-4"})]})})]},u))})})]},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-border bg-secondary/5 py-24 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-secondary/20",children:e.jsx(l,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"mb-2 font-serif text-xl font-medium",children:"Ainda não fizeste compras"}),e.jsx("p",{className:"mb-6 max-w-sm text-muted-foreground",children:"Explora o nosso catálogo e encontra peças únicas."}),e.jsx(d,{asChild:!0,children:e.jsx(c,{to:"/catalog",children:"Ir para o Catálogo"})})]})]})}export{M as default};
