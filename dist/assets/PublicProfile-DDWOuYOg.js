import{j as e}from"./vendor-ui-T5L2aXSd.js";import{k as j,r as i,L as n}from"./vendor-react-Dh4HNKln.js";import{i as g,j as N,B as m,F as b,G as v,J as y,K as w,M as P,P as M,r as C,N as k,x as A}from"./App-BJlSktNm.js";import{k as U,j as E,y as S}from"./vendor-firebase-D4lSkuMt.js";import{P as z}from"./product-card-Bemfo3rH.js";import{M as L}from"./map-pin-lriVDexN.js";import{f as D}from"./format-Dxh8Vach.js";import"./index-Cd1_NYyQ.js";import"./vendor-charts-Czn4h1RS.js";import"./star-rating-BRvWqeeD.js";import"./star-BcHBrKpp.js";function O(){var d;const{id:a}=j(),{user:l}=g(),[s,x]=i.useState(null),[c,f]=i.useState([]),[u,o]=i.useState(!0);if(i.useEffect(()=>{async function r(){if(a){o(!0);try{const t=await U(E(C,"users",a));t.exists()&&x(t.data());const{products:p}=await k.Products.list({filters:[S("userId","==",a)]});f(p)}catch(t){console.error("Error fetching profile:",t)}finally{o(!1)}}}r()},[a]),u)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[e.jsx(N,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando perfil..."})]});if(!s)return e.jsxs("div",{className:"container flex min-h-[50vh] flex-col items-center justify-center px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Utilizador não encontrado"}),e.jsx(m,{asChild:!0,className:"mt-6",children:e.jsx(n,{to:"/catalog",children:"Ver catálogo"})})]});const h=s.createdAt?D(s.createdAt.toDate(),"MMMM 'de' yyyy",{locale:A}):"Membro recente";return e.jsx("div",{className:"bg-background pb-10",children:e.jsxs("div",{className:"container max-w-6xl mx-auto px-4 sm:px-6 pt-8",children:[e.jsx("div",{className:"relative z-20 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-end md:items-end gap-6",children:[e.jsx("div",{className:"relative",children:e.jsxs(b,{className:"w-32 h-32 border-4 border-background shadow-xl rounded-full overflow-hidden bg-white",children:[e.jsx(v,{src:s.photoURL||"",className:"object-cover"}),e.jsx(y,{className:"text-4xl bg-secondary text-secondary-foreground",children:((d=s.username)==null?void 0:d.substring(0,2).toUpperCase())||"US"})]})}),e.jsxs("div",{className:"flex-1 pb-2 text-center md:text-left",children:[e.jsx("h1",{className:"font-serif text-3xl md:text-4xl text-foreground mb-2 capitalize",children:s.username||"Utilizador"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 text-muted-foreground mb-4",children:[s.location&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(L,{className:"h-4 w-4"}),s.location]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(w,{className:"h-4 w-4"}),"Membro desde ",h]})]}),s.bio&&e.jsx("p",{className:"text-muted-foreground max-w-2xl mb-4",children:s.bio})]}),(l==null?void 0:l.uid)!==a&&e.jsx("div",{className:"pb-4",children:e.jsx(m,{asChild:!0,children:e.jsxs(n,{to:`/messages?seller=${a}`,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Enviar Mensagem"]})})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b pb-4",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsxs("h2",{className:"text-xl font-semibold",children:["Artigos à venda (",c.length,")"]})]}),c.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:c.map(r=>e.jsx(z,{product:r},r.id))}):e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Este utilizador ainda não tem artigos à venda."})]})]})})}export{O as default};
