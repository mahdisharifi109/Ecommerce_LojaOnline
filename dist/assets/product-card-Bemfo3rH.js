import{j as e}from"./vendor-ui-T5L2aXSd.js";import{r as u,L as j}from"./vendor-react-Dh4HNKln.js";import{i as y,l as w,a as r,m as N,k,d as f,H as z,B as F,q as C}from"./App-BJlSktNm.js";import{S as P}from"./star-rating-BRvWqeeD.js";function T({product:a,className:h}){var d,c,m;const{user:t,toggleFavorite:x}=y(),{toast:o}=w(),[g,n]=u.useState(!1),[p,l]=u.useState(!1),i=((d=t==null?void 0:t.favorites)==null?void 0:d.includes(a.id))||!1,b=async s=>{if(s.preventDefault(),s.stopPropagation(),!t){o({title:"Faça login",description:"Precisa de estar autenticado para guardar favoritos.",variant:"destructive"});return}l(!0);try{await x(a.id),i||o({title:"Guardado ❤️",description:"Adicionado à sua lista de desejos.",className:"bg-rose-50 border-rose-200 text-rose-800"})}catch{o({title:"Erro",description:"Não foi possível atualizar os favoritos.",variant:"destructive"})}finally{l(!1)}},v=s=>new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(s);return e.jsx(j,{to:`/product/${a.id}`,className:r("group block h-full",h),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:e.jsxs(N,{className:"h-full overflow-hidden border-0 bg-transparent shadow-none transition-all duration-300",children:[e.jsxs("div",{className:"relative aspect-[3/4] w-full overflow-hidden rounded-xl bg-secondary/20",children:[(c=a.imageUrls)!=null&&c[0]?e.jsx("img",{src:a.imageUrls[0],alt:a.name,className:"h-full w-full object-cover transition-transform duration-700 ease-out group-hover:scale-105",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-secondary/10 text-muted-foreground",children:e.jsx(k,{className:"h-12 w-12 opacity-20"})}),e.jsxs("div",{className:"absolute left-3 top-3 flex flex-col gap-2",children:[a.condition==="novo_com_etiqueta"&&e.jsx(f,{className:"w-fit bg-white/80 text-foreground backdrop-blur-md hover:bg-white/90 border-0 shadow-sm font-medium px-3 py-1",children:"Novo"}),a.isVerified&&e.jsx(f,{className:"w-fit bg-emerald-500/90 text-white backdrop-blur-md hover:bg-emerald-600/90 border-0 shadow-sm font-medium px-3 py-1",children:"Verificado"})]}),e.jsx("button",{onClick:b,disabled:p,className:r("absolute right-3 top-3 z-10 rounded-full p-2.5 transition-all duration-300 focus:outline-none",i?"bg-white text-rose-500 shadow-md scale-100":"bg-black/20 text-white backdrop-blur-sm hover:bg-white hover:text-rose-500 opacity-0 group-hover:opacity-100 translate-y-2 group-hover:translate-y-0"),children:e.jsx(z,{className:r("h-5 w-5 transition-all duration-300",i&&"fill-current animate-in zoom-in duration-300")})}),e.jsx("div",{className:r("absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent transition-opacity duration-300 flex justify-center",g?"opacity-100":"opacity-0"),children:e.jsx(F,{size:"sm",variant:"secondary",className:"w-full bg-white/90 text-black hover:bg-white backdrop-blur-sm font-medium shadow-lg translate-y-4 group-hover:translate-y-0 transition-transform duration-300",children:"Ver Detalhes"})})]}),e.jsxs(C,{className:"p-4 pt-4 space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx("h3",{className:"font-serif text-lg font-medium leading-tight text-foreground line-clamp-1 group-hover:text-primary transition-colors",children:a.name}),e.jsx("span",{className:"font-medium text-lg whitespace-nowrap",children:v(a.price)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsx("span",{className:"line-clamp-1",children:a.brand||"Marca não especificada"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-secondary/50 border border-border/50",children:((m=a.sizes)==null?void 0:m[0])||"TU"})]}),a.rating!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 pt-1",children:[e.jsx(P,{rating:a.rating,size:"xs",readonly:!0}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",a.reviewCount||0,")"]})]})]})]})})}export{T as P};
