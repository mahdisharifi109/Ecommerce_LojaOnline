const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/side-cart-Dz-fSgiX.js","assets/index-mXQAEXM_.js","assets/index-Civj3_fP.css","assets/recharts-chart-D-GorjOM.js"])))=>i.map(i=>d[i]);
var HN=Object.defineProperty;var x_=n=>{throw TypeError(n)};var GN=(n,e,t)=>e in n?HN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var E_=(n,e,t)=>GN(n,typeof e!="symbol"?e+"":e,t),Uf=(n,e,t)=>e.has(n)||x_("Cannot "+t);var V=(n,e,t)=>(Uf(n,e,"read from private field"),t?t.call(n):e.get(n)),ye=(n,e,t)=>e.has(n)?x_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ie=(n,e,t,r)=>(Uf(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Pe=(n,e,t)=>(Uf(n,e,"access private method"),t);var Ou=(n,e,t,r)=>({set _(s){ie(n,e,s,t)},get _(){return V(n,e,r)}});import{r as p,R as bh,j as d,a as we,b as Ll,c as QN,_ as EE}from"./index-mXQAEXM_.js";/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ol.apply(this,arguments)}var js;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(js||(js={}));const I_="popstate";function XN(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Ip("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Ed(s)}return ZN(e,t,null,n)}function At(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ig(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YN(){return Math.random().toString(36).substr(2,8)}function T_(n,e){return{usr:n.state,key:n.key,idx:e}}function Ip(n,e,t,r){return t===void 0&&(t=null),ol({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ka(e):e,{state:t,key:e&&e.key||r||YN()})}function Ed(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ka(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function ZN(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=js.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(ol({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=js.Pop;let _=h(),I=_==null?null:_-u;u=_,c&&c({action:a,location:y.location,delta:I})}function m(_,I){a=js.Push;let b=Ip(y.location,_,I);u=h()+1;let S=T_(b,u),P=y.createHref(b);try{o.pushState(S,"",P)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(P)}i&&c&&c({action:a,location:y.location,delta:1})}function v(_,I){a=js.Replace;let b=Ip(y.location,_,I);u=h();let S=T_(b,u),P=y.createHref(b);o.replaceState(S,"",P),i&&c&&c({action:a,location:y.location,delta:0})}function x(_){let I=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof _=="string"?_:Ed(_);return b=b.replace(/ $/,"%20"),At(I,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,I)}let y={get action(){return a},get location(){return n(s,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(I_,f),c=_,()=>{s.removeEventListener(I_,f),c=null}},createHref(_){return e(s,_)},createURL:x,encodeLocation(_){let I=x(_);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:m,replace:v,go(_){return o.go(_)}};return y}var S_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(S_||(S_={}));function JN(n,e,t){return t===void 0&&(t="/"),ek(n,e,t)}function ek(n,e,t,r){let s=typeof e=="string"?Ka(e):e,i=og(s.pathname||"/",t);if(i==null)return null;let o=IE(n);tk(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=fk(i);a=uk(o[c],u)}return a}function IE(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(At(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Us([r,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(At(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),IE(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:ck(u,i.index),routesMeta:h})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of TE(i.path))s(i,o,c)}),e}function TE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=TE(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function tk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lk(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const nk=/^:[\w-]+$/,rk=3,sk=2,ik=1,ok=10,ak=-2,A_=n=>n==="*";function ck(n,e){let t=n.split("/"),r=t.length;return t.some(A_)&&(r+=ak),e&&(r+=sk),t.filter(s=>!A_(s)).reduce((s,i)=>s+(nk.test(i)?rk:i===""?ik:ok),r)}function lk(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function uk(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=dk({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Us([i,f.pathname]),pathnameBase:vk(Us([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Us([i,f.pathnameBase]))}return o}function dk(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=hk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let y=a[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=a[f];return v&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:n}}function hk(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ig(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function fk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ig(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function og(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mk=n=>pk.test(n);function gk(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ka(n):n,i;if(t)if(mk(t))i=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),ig(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?i=R_(t.substring(1),"/"):i=R_(t,e)}else i=e;return{pathname:i,search:_k(r),hash:wk(s)}}function R_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Bf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function SE(n,e){let t=yk(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function AE(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Ka(n):(s=ol({},n),At(!s.pathname||!s.pathname.includes("?"),Bf("?","pathname","search",s)),At(!s.pathname||!s.pathname.includes("#"),Bf("#","pathname","hash",s)),At(!s.search||!s.search.includes("#"),Bf("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let c=gk(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Us=n=>n.join("/").replace(/\/\/+/g,"/"),vk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_k=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function bk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const RE=["post","put","patch","delete"];new Set(RE);const xk=["get",...RE];new Set(xk);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},al.apply(this,arguments)}const ag=p.createContext(null),Ek=p.createContext(null),wo=p.createContext(null),xh=p.createContext(null),ai=p.createContext({outlet:null,matches:[],isDataRoute:!1}),CE=p.createContext(null);function Ik(n,e){let{relative:t}=e===void 0?{}:e;Fl()||At(!1);let{basename:r,navigator:s}=p.useContext(wo),{hash:i,pathname:o,search:a}=NE(n,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:Us([r,o])),s.createHref({pathname:c,search:a,hash:i})}function Fl(){return p.useContext(xh)!=null}function ss(){return Fl()||At(!1),p.useContext(xh).location}function PE(n){p.useContext(wo).static||p.useLayoutEffect(n)}function jn(){let{isDataRoute:n}=p.useContext(ai);return n?Lk():Tk()}function Tk(){Fl()||At(!1);let n=p.useContext(ag),{basename:e,future:t,navigator:r}=p.useContext(wo),{matches:s}=p.useContext(ai),{pathname:i}=ss(),o=JSON.stringify(SE(s,t.v7_relativeSplatPath)),a=p.useRef(!1);return PE(()=>{a.current=!0}),p.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=AE(u,JSON.parse(o),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Us([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,n])}function Sk(){let{matches:n}=p.useContext(ai),e=n[n.length-1];return e?e.params:{}}function NE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=p.useContext(wo),{matches:s}=p.useContext(ai),{pathname:i}=ss(),o=JSON.stringify(SE(s,r.v7_relativeSplatPath));return p.useMemo(()=>AE(n,JSON.parse(o),i,t==="path"),[n,o,i,t])}function Ak(n,e){return Rk(n,e)}function Rk(n,e,t,r){Fl()||At(!1);let{navigator:s}=p.useContext(wo),{matches:i}=p.useContext(ai),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ss(),h;if(e){var f;let _=typeof e=="string"?Ka(e):e;c==="/"||(f=_.pathname)!=null&&f.startsWith(c)||At(!1),h=_}else h=u;let m=h.pathname||"/",v=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=JN(n,{pathname:v}),y=Dk(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Us([c,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Us([c,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,t,r);return e&&y?p.createElement(xh.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:js.Pop}},y):y}function Ck(){let n=jk(),e=bk(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),t?p.createElement("pre",{style:s},t):null,null)}const Pk=p.createElement(Ck,null);class Nk extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?p.createElement(ai.Provider,{value:this.props.routeContext},p.createElement(CE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kk(n){let{routeContext:e,match:t,children:r}=n,s=p.useContext(ag);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(ai.Provider,{value:e},r)}function Dk(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||At(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:v}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let v,x=!1,y=null,_=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,y=f.route.errorElement||Pk,c&&(u<0&&m===0?(Fk("route-fallback"),x=!0,_=null):u===m&&(x=!0,_=f.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,m+1)),b=()=>{let S;return v?S=y:x?S=_:f.route.Component?S=p.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,p.createElement(kk,{match:f,routeContext:{outlet:h,matches:I,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(Nk,{location:t.location,revalidation:t.revalidation,component:y,error:v,children:b(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):b()},null)}var kE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(kE||{}),DE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(DE||{});function Ok(n){let e=p.useContext(ag);return e||At(!1),e}function Vk(n){let e=p.useContext(Ek);return e||At(!1),e}function Mk(n){let e=p.useContext(ai);return e||At(!1),e}function OE(n){let e=Mk(),t=e.matches[e.matches.length-1];return t.route.id||At(!1),t.route.id}function jk(){var n;let e=p.useContext(CE),t=Vk(),r=OE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Lk(){let{router:n}=Ok(kE.UseNavigateStable),e=OE(DE.UseNavigateStable),t=p.useRef(!1);return PE(()=>{t.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,al({fromRouteId:e},i)))},[n,e])}const C_={};function Fk(n,e,t){C_[n]||(C_[n]=!0)}function Uk(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Vr(n){At(!1)}function Bk(n){let{basename:e="/",children:t=null,location:r,navigationType:s=js.Pop,navigator:i,static:o=!1,future:a}=n;Fl()&&At(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:al({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Ka(r));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:x="default"}=r,y=p.useMemo(()=>{let _=og(h,c);return _==null?null:{location:{pathname:_,search:f,hash:m,state:v,key:x},navigationType:s}},[c,h,f,m,v,x,s]);return y==null?null:p.createElement(wo.Provider,{value:u},p.createElement(xh.Provider,{children:t,value:y}))}function $k(n){let{children:e,location:t}=n;return Ak(Tp(e),t)}new Promise(()=>{});function Tp(n,e){e===void 0&&(e=[]);let t=[];return p.Children.forEach(n,(r,s)=>{if(!p.isValidElement(r))return;let i=[...e,s];if(r.type===p.Fragment){t.push.apply(t,Tp(r.props.children,i));return}r.type!==Vr&&At(!1),!r.props.index||!r.props.children||At(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tp(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sp(){return Sp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sp.apply(this,arguments)}function zk(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function qk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Wk(n,e){return n.button===0&&(!e||e==="_self")&&!qk(n)}function Ap(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function Kk(n,e){let t=Ap(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(i=>{t.append(s,i)})}),t}const Hk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gk="6";try{window.__reactRouterVersion=Gk}catch{}const Qk="startTransition",P_=bh[Qk];function Xk(n){let{basename:e,children:t,future:r,window:s}=n,i=p.useRef();i.current==null&&(i.current=XN({window:s,v5Compat:!0}));let o=i.current,[a,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=p.useCallback(f=>{u&&P_?P_(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(h),[o,h]),p.useEffect(()=>Uk(r),[r]),p.createElement(Bk,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const Yk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=p.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=zk(e,Hk),{basename:v}=p.useContext(wo),x,y=!1;if(typeof u=="string"&&Zk.test(u)&&(x=u,Yk))try{let S=new URL(window.location.href),P=u.startsWith("//")?new URL(S.protocol+u):new URL(u),N=og(P.pathname,v);P.origin===S.origin&&N!=null?u=N+P.search+P.hash:y=!0}catch{}let _=Ik(u,{relative:s}),I=Jk(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:f});function b(S){r&&r(S),S.defaultPrevented||I(S)}return p.createElement("a",Sp({},m,{href:x||_,onClick:y||i?r:b,ref:t,target:c}))});var N_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(N_||(N_={}));var k_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(k_||(k_={}));function Jk(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=jn(),u=ss(),h=NE(n,{relative:o});return p.useCallback(f=>{if(Wk(f,t)){f.preventDefault();let m=r!==void 0?r:Ed(u)===Ed(h);c(n,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,h,r,s,t,n,i,o,a])}function Ha(n){let e=p.useRef(Ap(n)),t=p.useRef(!1),r=ss(),s=p.useMemo(()=>Kk(r.search,t.current?null:e.current),[r.search]),i=jn(),o=p.useCallback((a,c)=>{const u=Ap(typeof a=="function"?a(s):a);t.current=!0,i("?"+u,c)},[i,s]);return[s,o]}var Ga=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},e1={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},Rs,sg,hE,t1=(hE=class{constructor(){ye(this,Rs,e1);ye(this,sg,!1)}setTimeoutProvider(n){ie(this,Rs,n)}setTimeout(n,e){return V(this,Rs).setTimeout(n,e)}clearTimeout(n){V(this,Rs).clearTimeout(n)}setInterval(n,e){return V(this,Rs).setInterval(n,e)}clearInterval(n){V(this,Rs).clearInterval(n)}},Rs=new WeakMap,sg=new WeakMap,hE),Ni=new t1;function n1(n){setTimeout(n,0)}var Xi=typeof window>"u"||"Deno"in globalThis;function nn(){}function r1(n,e){return typeof n=="function"?n(e):n}function Rp(n){return typeof n=="number"&&n>=0&&n!==1/0}function VE(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Bs(n,e){return typeof n=="function"?n(e):n}function Nn(n,e){return typeof n=="function"?n(e):n}function D_(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==cg(o,e.options))return!1}else if(!cl(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function O_(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Yi(e.options.mutationKey)!==Yi(i))return!1}else if(!cl(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function cg(n,e){return((e==null?void 0:e.queryKeyHashFn)||Yi)(n)}function Yi(n){return JSON.stringify(n,(e,t)=>Cp(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function cl(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>cl(n[t],e[t])):!1}var s1=Object.prototype.hasOwnProperty;function ME(n,e){if(n===e)return n;const t=V_(n)&&V_(e);if(!t&&!(Cp(n)&&Cp(e)))return e;const s=(t?n:Object.keys(n)).length,i=t?e:Object.keys(e),o=i.length,a=t?new Array(o):{};let c=0;for(let u=0;u<o;u++){const h=t?u:i[u],f=n[h],m=e[h];if(f===m){a[h]=f,(t?u<s:s1.call(n,h))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){a[h]=m;continue}const v=ME(f,m);a[h]=v,v===f&&c++}return s===o&&c===s?n:a}function Id(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function V_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Cp(n){if(!M_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!M_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function M_(n){return Object.prototype.toString.call(n)==="[object Object]"}function i1(n){return new Promise(e=>{Ni.setTimeout(e,n)})}function Pp(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?ME(n,e):e}function o1(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function a1(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var lg=Symbol();function jE(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===lg?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function LE(n,e){return typeof n=="function"?n(...e):!!n}var Vi,Cs,da,fE,c1=(fE=class extends Ga{constructor(){super();ye(this,Vi);ye(this,Cs);ye(this,da);ie(this,da,e=>{if(!Xi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){V(this,Cs)||this.setEventListener(V(this,da))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,Cs))==null||e.call(this),ie(this,Cs,void 0))}setEventListener(e){var t;ie(this,da,e),(t=V(this,Cs))==null||t.call(this),ie(this,Cs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){V(this,Vi)!==e&&(ie(this,Vi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof V(this,Vi)=="boolean"?V(this,Vi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Vi=new WeakMap,Cs=new WeakMap,da=new WeakMap,fE),ug=new c1;function Np(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}var l1=n1;function u1(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=l1;const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var kt=u1(),ha,Ps,fa,pE,d1=(pE=class extends Ga{constructor(){super();ye(this,ha,!0);ye(this,Ps);ye(this,fa);ie(this,fa,e=>{if(!Xi&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){V(this,Ps)||this.setEventListener(V(this,fa))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,Ps))==null||e.call(this),ie(this,Ps,void 0))}setEventListener(e){var t;ie(this,fa,e),(t=V(this,Ps))==null||t.call(this),ie(this,Ps,e(this.setOnline.bind(this)))}setOnline(e){V(this,ha)!==e&&(ie(this,ha,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return V(this,ha)}},ha=new WeakMap,Ps=new WeakMap,fa=new WeakMap,pE),Td=new d1;function h1(n){return Math.min(1e3*2**n,3e4)}function FE(n){return(n??"online")==="online"?Td.isOnline():!0}var kp=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function UE(n){let e=!1,t=0,r;const s=Np(),i=()=>s.status!=="pending",o=y=>{var _;if(!i()){const I=new kp(y);m(I),(_=n.onCancel)==null||_.call(n,I)}},a=()=>{e=!0},c=()=>{e=!1},u=()=>ug.isFocused()&&(n.networkMode==="always"||Td.isOnline())&&n.canRun(),h=()=>FE(n.networkMode)&&n.canRun(),f=y=>{i()||(r==null||r(),s.resolve(y))},m=y=>{i()||(r==null||r(),s.reject(y))},v=()=>new Promise(y=>{var _;r=I=>{(i()||u())&&y(I)},(_=n.onPause)==null||_.call(n)}).then(()=>{var y;r=void 0,i()||(y=n.onContinue)==null||y.call(n)}),x=()=>{if(i())return;let y;const _=t===0?n.initialPromise:void 0;try{y=_??n.fn()}catch(I){y=Promise.reject(I)}Promise.resolve(y).then(f).catch(I=>{var j;if(i())return;const b=n.retry??(Xi?0:3),S=n.retryDelay??h1,P=typeof S=="function"?S(t,I):S,N=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,I);if(e||!N){m(I);return}t++,(j=n.onFail)==null||j.call(n,t,I),i1(P).then(()=>u()?void 0:v()).then(()=>{e?m(I):x()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?x():v().then(x),s)}}var Mi,mE,BE=(mE=class{constructor(){ye(this,Mi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rp(this.gcTime)&&ie(this,Mi,Ni.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Xi?1/0:5*60*1e3))}clearGcTimeout(){V(this,Mi)&&(Ni.clearTimeout(V(this,Mi)),ie(this,Mi,void 0))}},Mi=new WeakMap,mE),ji,pa,Pn,Li,Vt,Dl,Fi,Bn,Mr,gE,f1=(gE=class extends BE{constructor(t){super();ye(this,Bn);ye(this,ji);ye(this,pa);ye(this,Pn);ye(this,Li);ye(this,Vt);ye(this,Dl);ye(this,Fi);ie(this,Fi,!1),ie(this,Dl,t.defaultOptions),this.setOptions(t.options),this.observers=[],ie(this,Li,t.client),ie(this,Pn,V(this,Li).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ie(this,ji,L_(this.options)),this.state=t.state??V(this,ji),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=V(this,Vt))==null?void 0:t.promise}setOptions(t){if(this.options={...V(this,Dl),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=L_(this.options);r.data!==void 0&&(this.setState(j_(r.data,r.dataUpdatedAt)),ie(this,ji,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,Pn).remove(this)}setData(t,r){const s=Pp(this.state.data,t,this.options);return Pe(this,Bn,Mr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Pe(this,Bn,Mr).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,i;const r=(s=V(this,Vt))==null?void 0:s.promise;return(i=V(this,Vt))==null||i.cancel(t),r?r.then(nn).catch(nn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,ji))}isActive(){return this.observers.some(t=>Nn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===lg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Bs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!VE(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=V(this,Vt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=V(this,Vt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),V(this,Pn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(V(this,Vt)&&(V(this,Fi)?V(this,Vt).cancel({revert:!0}):V(this,Vt).cancelRetry()),this.scheduleGc()),V(this,Pn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pe(this,Bn,Mr).call(this,{type:"invalidate"})}async fetch(t,r){var u,h,f,m,v,x,y,_,I,b,S,P;if(this.state.fetchStatus!=="idle"&&((u=V(this,Vt))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(V(this,Vt))return V(this,Vt).continueRetry(),V(this,Vt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(j=>j.options.queryFn);N&&this.setOptions(N.options)}const s=new AbortController,i=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(ie(this,Fi,!0),s.signal)})},o=()=>{const N=jE(this.options,r),T=(()=>{const E={client:V(this,Li),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return ie(this,Fi,!1),this.options.persister?this.options.persister(N,T,this):N(T)},c=(()=>{const N={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:V(this,Li),state:this.state,fetchFn:o};return i(N),N})();(h=this.options.behavior)==null||h.onFetch(c,this),ie(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&Pe(this,Bn,Mr).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta}),ie(this,Vt,UE({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,onCancel:N=>{N instanceof kp&&N.revert&&this.setState({...V(this,pa),fetchStatus:"idle"}),s.abort()},onFail:(N,j)=>{Pe(this,Bn,Mr).call(this,{type:"failed",failureCount:N,error:j})},onPause:()=>{Pe(this,Bn,Mr).call(this,{type:"pause"})},onContinue:()=>{Pe(this,Bn,Mr).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const N=await V(this,Vt).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(x=(v=V(this,Pn).config).onSuccess)==null||x.call(v,N,this),(_=(y=V(this,Pn).config).onSettled)==null||_.call(y,N,this.state.error,this),N}catch(N){if(N instanceof kp){if(N.silent)return V(this,Vt).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw Pe(this,Bn,Mr).call(this,{type:"error",error:N}),(b=(I=V(this,Pn).config).onError)==null||b.call(I,N,this),(P=(S=V(this,Pn).config).onSettled)==null||P.call(S,this.state.data,N,this),N}finally{this.scheduleGc()}}},ji=new WeakMap,pa=new WeakMap,Pn=new WeakMap,Li=new WeakMap,Vt=new WeakMap,Dl=new WeakMap,Fi=new WeakMap,Bn=new WeakSet,Mr=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...$E(s.data,this.options),fetchMeta:t.meta??null};case"success":const i={...s,...j_(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ie(this,pa,t.manual?i:void 0),i;case"error":const o=t.error;return{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),kt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),V(this,Pn).notify({query:this,type:"updated",action:t})})},gE);function $E(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:FE(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function j_(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function L_(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var an,Be,Ol,Jt,Ui,ma,jr,Ns,Vl,ga,ya,Bi,$i,ks,va,Xe,kc,Dp,Op,Vp,Mp,jp,Lp,Fp,zE,yE,p1=(yE=class extends Ga{constructor(e,t){super();ye(this,Xe);ye(this,an);ye(this,Be);ye(this,Ol);ye(this,Jt);ye(this,Ui);ye(this,ma);ye(this,jr);ye(this,Ns);ye(this,Vl);ye(this,ga);ye(this,ya);ye(this,Bi);ye(this,$i);ye(this,ks);ye(this,va,new Set);this.options=t,ie(this,an,e),ie(this,Ns,null),ie(this,jr,Np()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(V(this,Be).addObserver(this),F_(V(this,Be),this.options)?Pe(this,Xe,kc).call(this):this.updateResult(),Pe(this,Xe,Mp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Up(V(this,Be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Up(V(this,Be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pe(this,Xe,jp).call(this),Pe(this,Xe,Lp).call(this),V(this,Be).removeObserver(this)}setOptions(e){const t=this.options,r=V(this,Be);if(this.options=V(this,an).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nn(this.options.enabled,V(this,Be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pe(this,Xe,Fp).call(this),V(this,Be).setOptions(this.options),t._defaulted&&!Id(this.options,t)&&V(this,an).getQueryCache().notify({type:"observerOptionsUpdated",query:V(this,Be),observer:this});const s=this.hasListeners();s&&U_(V(this,Be),r,this.options,t)&&Pe(this,Xe,kc).call(this),this.updateResult(),s&&(V(this,Be)!==r||Nn(this.options.enabled,V(this,Be))!==Nn(t.enabled,V(this,Be))||Bs(this.options.staleTime,V(this,Be))!==Bs(t.staleTime,V(this,Be)))&&Pe(this,Xe,Dp).call(this);const i=Pe(this,Xe,Op).call(this);s&&(V(this,Be)!==r||Nn(this.options.enabled,V(this,Be))!==Nn(t.enabled,V(this,Be))||i!==V(this,ks))&&Pe(this,Xe,Vp).call(this,i)}getOptimisticResult(e){const t=V(this,an).getQueryCache().build(V(this,an),e),r=this.createResult(t,e);return g1(this,r)&&(ie(this,Jt,r),ie(this,ma,this.options),ie(this,Ui,V(this,Be).state)),r}getCurrentResult(){return V(this,Jt)}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t==null||t(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&V(this,jr).status==="pending"&&V(this,jr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){V(this,va).add(e)}getCurrentQuery(){return V(this,Be)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=V(this,an).defaultQueryOptions(e),r=V(this,an).getQueryCache().build(V(this,an),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Pe(this,Xe,kc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),V(this,Jt)))}createResult(e,t){var C;const r=V(this,Be),s=this.options,i=V(this,Jt),o=V(this,Ui),a=V(this,ma),u=e!==r?e.state:V(this,Ol),{state:h}=e;let f={...h},m=!1,v;if(t._optimisticResults){const D=this.hasListeners(),O=!D&&F_(e,t),k=D&&U_(e,r,t,s);(O||k)&&(f={...f,...$E(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:_}=f;v=f.data;let I=!1;if(t.placeholderData!==void 0&&v===void 0&&_==="pending"){let D;i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,I=!0):D=typeof t.placeholderData=="function"?t.placeholderData((C=V(this,ya))==null?void 0:C.state.data,V(this,ya)):t.placeholderData,D!==void 0&&(_="success",v=Pp(i==null?void 0:i.data,D,t),m=!0)}if(t.select&&v!==void 0&&!I)if(i&&v===(o==null?void 0:o.data)&&t.select===V(this,Vl))v=V(this,ga);else try{ie(this,Vl,t.select),v=t.select(v),v=Pp(i==null?void 0:i.data,v,t),ie(this,ga,v),ie(this,Ns,null)}catch(D){ie(this,Ns,D)}V(this,Ns)&&(x=V(this,Ns),v=V(this,ga),y=Date.now(),_="error");const b=f.fetchStatus==="fetching",S=_==="pending",P=_==="error",N=S&&b,j=v!==void 0,E={status:_,fetchStatus:f.fetchStatus,isPending:S,isSuccess:_==="success",isError:P,isInitialLoading:N,isLoading:N,data:v,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!S,isLoadingError:P&&!j,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:P&&j,isStale:dg(e,t),refetch:this.refetch,promise:V(this,jr),isEnabled:Nn(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=R=>{E.status==="error"?R.reject(E.error):E.data!==void 0&&R.resolve(E.data)},O=()=>{const R=ie(this,jr,E.promise=Np());D(R)},k=V(this,jr);switch(k.status){case"pending":e.queryHash===r.queryHash&&D(k);break;case"fulfilled":(E.status==="error"||E.data!==k.value)&&O();break;case"rejected":(E.status!=="error"||E.error!==k.reason)&&O();break}}return E}updateResult(){const e=V(this,Jt),t=this.createResult(V(this,Be),this.options);if(ie(this,Ui,V(this,Be).state),ie(this,ma,this.options),V(this,Ui).data!==void 0&&ie(this,ya,V(this,Be)),Id(t,e))return;ie(this,Jt,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!V(this,va).size)return!0;const o=new Set(i??V(this,va));return this.options.throwOnError&&o.add("error"),Object.keys(V(this,Jt)).some(a=>{const c=a;return V(this,Jt)[c]!==e[c]&&o.has(c)})};Pe(this,Xe,zE).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pe(this,Xe,Mp).call(this)}},an=new WeakMap,Be=new WeakMap,Ol=new WeakMap,Jt=new WeakMap,Ui=new WeakMap,ma=new WeakMap,jr=new WeakMap,Ns=new WeakMap,Vl=new WeakMap,ga=new WeakMap,ya=new WeakMap,Bi=new WeakMap,$i=new WeakMap,ks=new WeakMap,va=new WeakMap,Xe=new WeakSet,kc=function(e){Pe(this,Xe,Fp).call(this);let t=V(this,Be).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(nn)),t},Dp=function(){Pe(this,Xe,jp).call(this);const e=Bs(this.options.staleTime,V(this,Be));if(Xi||V(this,Jt).isStale||!Rp(e))return;const r=VE(V(this,Jt).dataUpdatedAt,e)+1;ie(this,Bi,Ni.setTimeout(()=>{V(this,Jt).isStale||this.updateResult()},r))},Op=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(V(this,Be)):this.options.refetchInterval)??!1},Vp=function(e){Pe(this,Xe,Lp).call(this),ie(this,ks,e),!(Xi||Nn(this.options.enabled,V(this,Be))===!1||!Rp(V(this,ks))||V(this,ks)===0)&&ie(this,$i,Ni.setInterval(()=>{(this.options.refetchIntervalInBackground||ug.isFocused())&&Pe(this,Xe,kc).call(this)},V(this,ks)))},Mp=function(){Pe(this,Xe,Dp).call(this),Pe(this,Xe,Vp).call(this,Pe(this,Xe,Op).call(this))},jp=function(){V(this,Bi)&&(Ni.clearTimeout(V(this,Bi)),ie(this,Bi,void 0))},Lp=function(){V(this,$i)&&(Ni.clearInterval(V(this,$i)),ie(this,$i,void 0))},Fp=function(){const e=V(this,an).getQueryCache().build(V(this,an),this.options);if(e===V(this,Be))return;const t=V(this,Be);ie(this,Be,e),ie(this,Ol,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},zE=function(e){kt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(V(this,Jt))}),V(this,an).getQueryCache().notify({query:V(this,Be),type:"observerResultsUpdated"})})},yE);function m1(n,e){return Nn(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function F_(n,e){return m1(n,e)||n.state.data!==void 0&&Up(n,e,e.refetchOnMount)}function Up(n,e,t){if(Nn(e.enabled,n)!==!1&&Bs(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&dg(n,e)}return!1}function U_(n,e,t,r){return(n!==e||Nn(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&dg(n,t)}function dg(n,e){return Nn(e.enabled,n)!==!1&&n.isStaleByTime(Bs(e.staleTime,n))}function g1(n,e){return!Id(n.getCurrentResult(),e)}function Sd(n){return{onFetch:(e,t)=>{var h,f,m,v,x;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},I=jE(e.options,e.fetchOptions),b=async(S,P,N)=>{if(y)return Promise.reject();if(P==null&&S.pages.length)return Promise.resolve(S);const T=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:P,direction:N?"backward":"forward",meta:e.options.meta};return _(O),O})(),E=await I(T),{maxPages:C}=e.options,D=N?a1:o1;return{pages:D(S.pages,E,C),pageParams:D(S.pageParams,P,C)}};if(s&&i.length){const S=s==="backward",P=S?qE:Bp,N={pages:i,pageParams:o},j=P(r,N);a=await b(N,j,S)}else{const S=n??i.length;do{const P=c===0?o[0]??r.initialPageParam:Bp(r,a);if(c>0&&P==null)break;a=await b(a,P),c++}while(c<S)}return a};e.options.persister?e.fetchFn=()=>{var y,_;return(_=(y=e.options).persister)==null?void 0:_.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function Bp(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function qE(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}function y1(n,e){return e?Bp(n,e)!=null:!1}function v1(n,e){return!e||!n.getPreviousPageParam?!1:qE(n,e)!=null}var _1=class extends p1{constructor(n,e){super(n,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n){super.setOptions({...n,behavior:Sd()})}getOptimisticResult(n){return n.behavior=Sd(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,e){var x,y;const{state:t}=n,r=super.createResult(n,e),{isFetching:s,isRefetching:i,isError:o,isRefetchError:a}=r,c=(y=(x=t.fetchMeta)==null?void 0:x.fetchMore)==null?void 0:y.direction,u=o&&c==="forward",h=s&&c==="forward",f=o&&c==="backward",m=s&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:y1(e,t.data),hasPreviousPage:v1(e,t.data),isFetchNextPageError:u,isFetchingNextPage:h,isFetchPreviousPageError:f,isFetchingPreviousPage:m,isRefetchError:a&&!u&&!f,isRefetching:i&&!h&&!m}}},Ml,or,en,zi,ar,_s,vE,w1=(vE=class extends BE{constructor(t){super();ye(this,ar);ye(this,Ml);ye(this,or);ye(this,en);ye(this,zi);ie(this,Ml,t.client),this.mutationId=t.mutationId,ie(this,en,t.mutationCache),ie(this,or,[]),this.state=t.state||WE(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){V(this,or).includes(t)||(V(this,or).push(t),this.clearGcTimeout(),V(this,en).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ie(this,or,V(this,or).filter(r=>r!==t)),this.scheduleGc(),V(this,en).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){V(this,or).length||(this.state.status==="pending"?this.scheduleGc():V(this,en).remove(this))}continue(){var t;return((t=V(this,zi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,c,u,h,f,m,v,x,y,_,I,b,S,P,N,j,T,E,C,D;const r=()=>{Pe(this,ar,_s).call(this,{type:"continue"})},s={client:V(this,Ml),meta:this.options.meta,mutationKey:this.options.mutationKey};ie(this,zi,UE({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(O,k)=>{Pe(this,ar,_s).call(this,{type:"failed",failureCount:O,error:k})},onPause:()=>{Pe(this,ar,_s).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,en).canRun(this)}));const i=this.state.status==="pending",o=!V(this,zi).canStart();try{if(i)r();else{Pe(this,ar,_s).call(this,{type:"pending",variables:t,isPaused:o}),await((c=(a=V(this,en).config).onMutate)==null?void 0:c.call(a,t,this,s));const k=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t,s));k!==this.state.context&&Pe(this,ar,_s).call(this,{type:"pending",context:k,variables:t,isPaused:o})}const O=await V(this,zi).start();return await((m=(f=V(this,en).config).onSuccess)==null?void 0:m.call(f,O,t,this.state.context,this,s)),await((x=(v=this.options).onSuccess)==null?void 0:x.call(v,O,t,this.state.context,s)),await((_=(y=V(this,en).config).onSettled)==null?void 0:_.call(y,O,null,this.state.variables,this.state.context,this,s)),await((b=(I=this.options).onSettled)==null?void 0:b.call(I,O,null,t,this.state.context,s)),Pe(this,ar,_s).call(this,{type:"success",data:O}),O}catch(O){try{throw await((P=(S=V(this,en).config).onError)==null?void 0:P.call(S,O,t,this.state.context,this,s)),await((j=(N=this.options).onError)==null?void 0:j.call(N,O,t,this.state.context,s)),await((E=(T=V(this,en).config).onSettled)==null?void 0:E.call(T,void 0,O,this.state.variables,this.state.context,this,s)),await((D=(C=this.options).onSettled)==null?void 0:D.call(C,void 0,O,t,this.state.context,s)),O}finally{Pe(this,ar,_s).call(this,{type:"error",error:O})}}finally{V(this,en).runNext(this)}}},Ml=new WeakMap,or=new WeakMap,en=new WeakMap,zi=new WeakMap,ar=new WeakSet,_s=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),kt.batch(()=>{V(this,or).forEach(s=>{s.onMutationUpdate(t)}),V(this,en).notify({mutation:this,type:"updated",action:t})})},vE);function WE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lr,$n,jl,_E,b1=(_E=class extends Ga{constructor(e={}){super();ye(this,Lr);ye(this,$n);ye(this,jl);this.config=e,ie(this,Lr,new Set),ie(this,$n,new Map),ie(this,jl,0)}build(e,t,r){const s=new w1({client:e,mutationCache:this,mutationId:++Ou(this,jl)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){V(this,Lr).add(e);const t=Vu(e);if(typeof t=="string"){const r=V(this,$n).get(t);r?r.push(e):V(this,$n).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(V(this,Lr).delete(e)){const t=Vu(e);if(typeof t=="string"){const r=V(this,$n).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&V(this,$n).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Vu(e);if(typeof t=="string"){const r=V(this,$n).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=Vu(e);if(typeof t=="string"){const s=(r=V(this,$n).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){kt.batch(()=>{V(this,Lr).forEach(e=>{this.notify({type:"removed",mutation:e})}),V(this,Lr).clear(),V(this,$n).clear()})}getAll(){return Array.from(V(this,Lr))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>O_(t,r))}findAll(e={}){return this.getAll().filter(t=>O_(e,t))}notify(e){kt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return kt.batch(()=>Promise.all(e.map(t=>t.continue().catch(nn))))}},Lr=new WeakMap,$n=new WeakMap,jl=new WeakMap,_E);function Vu(n){var e;return(e=n.options.scope)==null?void 0:e.id}var Fr,Ds,cn,Ur,Gr,Ju,$p,wE,x1=(wE=class extends Ga{constructor(t,r){super();ye(this,Gr);ye(this,Fr);ye(this,Ds);ye(this,cn);ye(this,Ur);ie(this,Fr,t),this.setOptions(r),this.bindMethods(),Pe(this,Gr,Ju).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=V(this,Fr).defaultMutationOptions(t),Id(this.options,r)||V(this,Fr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:V(this,cn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Yi(r.mutationKey)!==Yi(this.options.mutationKey)?this.reset():((s=V(this,cn))==null?void 0:s.state.status)==="pending"&&V(this,cn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=V(this,cn))==null||t.removeObserver(this)}onMutationUpdate(t){Pe(this,Gr,Ju).call(this),Pe(this,Gr,$p).call(this,t)}getCurrentResult(){return V(this,Ds)}reset(){var t;(t=V(this,cn))==null||t.removeObserver(this),ie(this,cn,void 0),Pe(this,Gr,Ju).call(this),Pe(this,Gr,$p).call(this)}mutate(t,r){var s;return ie(this,Ur,r),(s=V(this,cn))==null||s.removeObserver(this),ie(this,cn,V(this,Fr).getMutationCache().build(V(this,Fr),this.options)),V(this,cn).addObserver(this),V(this,cn).execute(t)}},Fr=new WeakMap,Ds=new WeakMap,cn=new WeakMap,Ur=new WeakMap,Gr=new WeakSet,Ju=function(){var r;const t=((r=V(this,cn))==null?void 0:r.state)??WE();ie(this,Ds,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},$p=function(t){kt.batch(()=>{var r,s,i,o,a,c,u,h;if(V(this,Ur)&&this.hasListeners()){const f=V(this,Ds).variables,m=V(this,Ds).context,v={client:V(this,Fr),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((s=(r=V(this,Ur)).onSuccess)==null||s.call(r,t.data,f,m,v),(o=(i=V(this,Ur)).onSettled)==null||o.call(i,t.data,null,f,m,v)):(t==null?void 0:t.type)==="error"&&((c=(a=V(this,Ur)).onError)==null||c.call(a,t.error,f,m,v),(h=(u=V(this,Ur)).onSettled)==null||h.call(u,void 0,t.error,f,m,v))}this.listeners.forEach(f=>{f(V(this,Ds))})})},wE),cr,bE,E1=(bE=class extends Ga{constructor(e={}){super();ye(this,cr);this.config=e,ie(this,cr,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??cg(s,t);let o=this.get(i);return o||(o=new f1({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){V(this,cr).has(e.queryHash)||(V(this,cr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=V(this,cr).get(e.queryHash);t&&(e.destroy(),t===e&&V(this,cr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){kt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,cr).get(e)}getAll(){return[...V(this,cr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>D_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>D_(e,r)):t}notify(e){kt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){kt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){kt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},cr=new WeakMap,bE),mt,Os,Vs,_a,wa,Ms,ba,xa,xE,I1=(xE=class{constructor(n={}){ye(this,mt);ye(this,Os);ye(this,Vs);ye(this,_a);ye(this,wa);ye(this,Ms);ye(this,ba);ye(this,xa);ie(this,mt,n.queryCache||new E1),ie(this,Os,n.mutationCache||new b1),ie(this,Vs,n.defaultOptions||{}),ie(this,_a,new Map),ie(this,wa,new Map),ie(this,Ms,0)}mount(){Ou(this,Ms)._++,V(this,Ms)===1&&(ie(this,ba,ug.subscribe(async n=>{n&&(await this.resumePausedMutations(),V(this,mt).onFocus())})),ie(this,xa,Td.subscribe(async n=>{n&&(await this.resumePausedMutations(),V(this,mt).onOnline())})))}unmount(){var n,e;Ou(this,Ms)._--,V(this,Ms)===0&&((n=V(this,ba))==null||n.call(this),ie(this,ba,void 0),(e=V(this,xa))==null||e.call(this),ie(this,xa,void 0))}isFetching(n){return V(this,mt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return V(this,Os).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=V(this,mt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=V(this,mt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Bs(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return V(this,mt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=V(this,mt).get(r.queryHash),i=s==null?void 0:s.state.data,o=r1(e,i);if(o!==void 0)return V(this,mt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return kt.batch(()=>V(this,mt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=V(this,mt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=V(this,mt);kt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=V(this,mt);return kt.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=kt.batch(()=>V(this,mt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(nn).catch(nn)}invalidateQueries(n,e={}){return kt.batch(()=>(V(this,mt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=kt.batch(()=>V(this,mt).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(nn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(nn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=V(this,mt).build(this,e);return t.isStaleByTime(Bs(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(nn).catch(nn)}fetchInfiniteQuery(n){return n.behavior=Sd(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(nn).catch(nn)}ensureInfiniteQueryData(n){return n.behavior=Sd(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Td.isOnline()?V(this,Os).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,mt)}getMutationCache(){return V(this,Os)}getDefaultOptions(){return V(this,Vs)}setDefaultOptions(n){ie(this,Vs,n)}setQueryDefaults(n,e){V(this,_a).set(Yi(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...V(this,_a).values()],t={};return e.forEach(r=>{cl(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){V(this,wa).set(Yi(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...V(this,wa).values()],t={};return e.forEach(r=>{cl(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...V(this,Vs).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=cg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===lg&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...V(this,Vs).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){V(this,mt).clear(),V(this,Os).clear()}},mt=new WeakMap,Os=new WeakMap,Vs=new WeakMap,_a=new WeakMap,wa=new WeakMap,Ms=new WeakMap,ba=new WeakMap,xa=new WeakMap,xE),KE=p.createContext(void 0),Qa=n=>{const e=p.useContext(KE);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},T1=({client:n,children:e})=>(p.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),d.jsx(KE.Provider,{value:n,children:e})),HE=p.createContext(!1),S1=()=>p.useContext(HE);HE.Provider;function A1(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var R1=p.createContext(A1()),C1=()=>p.useContext(R1),P1=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},N1=n=>{p.useEffect(()=>{n.clearReset()},[n])},k1=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||LE(t,[n.error,r])),D1=n=>{if(n.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},O1=(n,e)=>n.isLoading&&n.isFetching&&!e,V1=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,B_=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function M1(n,e,t){var f,m,v,x,y;const r=S1(),s=C1(),i=Qa(),o=i.defaultQueryOptions(n);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=r?"isRestoring":"optimistic",D1(o),P1(o,s),N1(s);const a=!i.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),h=!r&&n.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(_=>{const I=h?c.subscribe(kt.batchCalls(_)):nn;return c.updateResult(),I},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),V1(o,u))throw B_(o,c,s);if(k1({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((x=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||x.call(v,o,u),o.experimental_prefetchInRender&&!Xi&&O1(u,r)){const _=a?B_(o,c,s):(y=i.getQueryCache().get(o.queryHash))==null?void 0:y.promise;_==null||_.catch(nn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Eh(n,e){const t=Qa(),[r]=p.useState(()=>new x1(t,n));p.useEffect(()=>{r.setOptions(n)},[r,n]);const s=p.useSyncExternalStore(p.useCallback(o=>r.subscribe(kt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=p.useCallback((o,a)=>{r.mutate(o,a).catch(nn)},[r]);if(s.error&&LE(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function j1(n,e){return M1(n,_1)}function L1({children:n}){const[e]=p.useState(()=>new I1({defaultOptions:{queries:{staleTime:3e5,gcTime:18e5,retry:1,refetchOnWindowFocus:!1}}}));return d.jsx(T1,{client:e,children:n})}const F1=()=>{};var $_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},U1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),r.push(t[h],t[f],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):U1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new B1;const m=i<<2|a>>4;if(r.push(m),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class B1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $1=function(n){const e=GE(n);return QE.encodeByteArray(e,!0)},Ad=function(n){return $1(n).replace(/\./g,"")},XE=function(n){try{return QE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=()=>YE().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof $_>"u")return;const n=$_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&XE(n[1]);return e&&JSON.parse(e)},Ih=()=>{try{return F1()||z1()||q1()||W1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ZE=n=>{var e,t;return(t=(e=Ih())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},K1=n=>{const e=ZE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},JE=()=>{var n;return(n=Ih())===null||n===void 0?void 0:n.config},eI=n=>{var e;return(e=Ih())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ad(JSON.stringify(t)),Ad(JSON.stringify(o)),""].join(".")}const qc={};function Q1(){const n={prod:[],emulator:[]};for(const e of Object.keys(qc))qc[e]?n.emulator.push(e):n.prod.push(e);return n}function X1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let z_=!1;function tI(n,e){if(typeof window>"u"||typeof document>"u"||!ci(window.location.host)||qc[n]===e||qc[n]||z_)return;qc[n]=e;function t(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=Q1().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{z_=!0,o()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=X1(r),v=t("text"),x=document.getElementById(v)||document.createElement("span"),y=t("learnmore"),_=document.getElementById(y)||document.createElement("a"),I=t("preprendIcon"),b=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;a(S),h(_,y);const P=u();c(b,I),S.append(b,x,_,P),document.body.appendChild(S)}i?(x.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function nI(){var n;const e=(n=Ih())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tD(){const n=Dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rI(){return!nI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sI(){return!nI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function iI(){try{return typeof indexedDB=="object"}catch{return!1}}function nD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="FirebaseError";class Tr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=rD,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ul.prototype.create)}}class Ul{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?sD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Tr(s,a,r)}}function sD(n,e){return n.replace(iD,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const iD=/\{\$([^}]+)}/g;function oD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(q_(i)&&q_(o)){if(!Qr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function q_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aD(n,e){const t=new cD(n,e);return t.subscribe.bind(t)}class cD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");lD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=$f),s.error===void 0&&(s.error=$f),s.complete===void 0&&(s.complete=$f);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $f(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(n){return n&&n._delegate?n._delegate:n}class Qs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uD=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new H1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hD(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dD(n){return n===Ei?void 0:n}function hD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const pD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},mD=je.INFO,gD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},yD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=gD[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fg{constructor(e){this.name=e,this._logLevel=mD,this._logHandler=yD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const vD=(n,e)=>e.some(t=>n instanceof t);let W_,K_;function _D(){return W_||(W_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wD(){return K_||(K_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oI=new WeakMap,zp=new WeakMap,aI=new WeakMap,zf=new WeakMap,pg=new WeakMap;function bD(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t($s(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&oI.set(t,n)}).catch(()=>{}),pg.set(e,n),e}function xD(n){if(zp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});zp.set(n,e)}let qp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ED(n){qp=n(qp)}function ID(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qf(this),e,...t);return aI.set(r,e.sort?e.sort():[e]),$s(r)}:wD().includes(n)?function(...e){return n.apply(qf(this),e),$s(oI.get(this))}:function(...e){return $s(n.apply(qf(this),e))}}function TD(n){return typeof n=="function"?ID(n):(n instanceof IDBTransaction&&xD(n),vD(n,_D())?new Proxy(n,qp):n)}function $s(n){if(n instanceof IDBRequest)return bD(n);if(zf.has(n))return zf.get(n);const e=TD(n);return e!==n&&(zf.set(n,e),pg.set(e,n)),e}const qf=n=>pg.get(n);function SD(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=$s(o);return r&&o.addEventListener("upgradeneeded",c=>{r($s(o.result),c.oldVersion,c.newVersion,$s(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const AD=["get","getKey","getAll","getAllKeys","count"],RD=["put","add","delete","clear"],Wf=new Map;function H_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wf.get(e))return Wf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=RD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AD.includes(t)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&c.done]))[0]};return Wf.set(e,i),i}ED(n=>({...n,get:(e,t,r)=>H_(e,t)||n.get(e,t,r),has:(e,t)=>!!H_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function PD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wp="@firebase/app",G_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new fg("@firebase/app"),ND="@firebase/app-compat",kD="@firebase/analytics-compat",DD="@firebase/analytics",OD="@firebase/app-check-compat",VD="@firebase/app-check",MD="@firebase/auth",jD="@firebase/auth-compat",LD="@firebase/database",FD="@firebase/data-connect",UD="@firebase/database-compat",BD="@firebase/functions",$D="@firebase/functions-compat",zD="@firebase/installations",qD="@firebase/installations-compat",WD="@firebase/messaging",KD="@firebase/messaging-compat",HD="@firebase/performance",GD="@firebase/performance-compat",QD="@firebase/remote-config",XD="@firebase/remote-config-compat",YD="@firebase/storage",ZD="@firebase/storage-compat",JD="@firebase/firestore",eO="@firebase/ai",tO="@firebase/firestore-compat",nO="firebase",rO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="[DEFAULT]",sO={[Wp]:"fire-core",[ND]:"fire-core-compat",[DD]:"fire-analytics",[kD]:"fire-analytics-compat",[VD]:"fire-app-check",[OD]:"fire-app-check-compat",[MD]:"fire-auth",[jD]:"fire-auth-compat",[LD]:"fire-rtdb",[FD]:"fire-data-connect",[UD]:"fire-rtdb-compat",[BD]:"fire-fn",[$D]:"fire-fn-compat",[zD]:"fire-iid",[qD]:"fire-iid-compat",[WD]:"fire-fcm",[KD]:"fire-fcm-compat",[HD]:"fire-perf",[GD]:"fire-perf-compat",[QD]:"fire-rc",[XD]:"fire-rc-compat",[YD]:"fire-gcs",[ZD]:"fire-gcs-compat",[JD]:"fire-fst",[tO]:"fire-fst-compat",[eO]:"fire-vertex","fire-js":"fire-js",[nO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new Map,iO=new Map,Hp=new Map;function Q_(n,e){try{n.container.addComponent(e)}catch(t){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zi(n){const e=n.name;if(Hp.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;Hp.set(e,n);for(const t of ll.values())Q_(t,n);for(const t of iO.values())Q_(t,n);return!0}function Th(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _n(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new Ul("app","Firebase",oO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=rO;function cI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kp,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw zs.create("bad-app-name",{appName:String(s)});if(t||(t=JE()),!t)throw zs.create("no-options");const i=ll.get(s);if(i){if(Qr(t,i.options)&&Qr(r,i.config))return i;throw zs.create("duplicate-app",{appName:s})}const o=new fD(s);for(const c of Hp.values())o.addComponent(c);const a=new aO(t,r,o);return ll.set(s,a),a}function mg(n=Kp){const e=ll.get(n);if(!e&&n===Kp&&JE())return cI();if(!e)throw zs.create("no-app",{appName:n});return e}function cO(){return Array.from(ll.values())}function mr(n,e,t){var r;let s=(r=sO[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(a.join(" "));return}Zi(new Qs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firebase-heartbeat-database",uO=1,ul="firebase-heartbeat-store";let Kf=null;function lI(){return Kf||(Kf=SD(lO,uO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ul)}catch(t){console.warn(t)}}}}).catch(n=>{throw zs.create("idb-open",{originalErrorMessage:n.message})})),Kf}async function dO(n){try{const t=(await lI()).transaction(ul),r=await t.objectStore(ul).get(uI(n));return await t.done,r}catch(e){if(e instanceof Tr)Xr.warn(e.message);else{const t=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(t.message)}}}async function X_(n,e){try{const r=(await lI()).transaction(ul,"readwrite");await r.objectStore(ul).put(e,uI(n)),await r.done}catch(t){if(t instanceof Tr)Xr.warn(t.message);else{const r=zs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xr.warn(r.message)}}}function uI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=1024,fO=30;class pO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Y_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>fO){const o=yO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y_(),{heartbeatsToSend:r,unsentEntries:s}=mO(this._heartbeatsCache.heartbeats),i=Ad(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Xr.warn(t),""}}}function Y_(){return new Date().toISOString().substring(0,10)}function mO(n,e=hO){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Z_(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Z_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class gO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iI()?nD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return X_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return X_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Z_(n){return Ad(JSON.stringify({version:2,heartbeats:n})).length}function yO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){Zi(new Qs("platform-logger",e=>new CD(e),"PRIVATE")),Zi(new Qs("heartbeat",e=>new pO(e),"PRIVATE")),mr(Wp,G_,n),mr(Wp,G_,"esm2017"),mr("fire-js","")}vO("");var _O="firebase",wO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(_O,wO,"app");var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,dI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function C(){}C.prototype=E.prototype,T.D=E.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(D,O,k){for(var R=Array(arguments.length-2),q=2;q<arguments.length;q++)R[q-2]=arguments[q];return E.prototype[O].apply(D,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,E,C){C||(C=0);var D=Array(16);if(typeof E=="string")for(var O=0;16>O;++O)D[O]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(O=0;16>O;++O)D[O]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=T.g[0],C=T.g[1],O=T.g[2];var k=T.g[3],R=E+(k^C&(O^k))+D[0]+3614090360&4294967295;E=C+(R<<7&4294967295|R>>>25),R=k+(O^E&(C^O))+D[1]+3905402710&4294967295,k=E+(R<<12&4294967295|R>>>20),R=O+(C^k&(E^C))+D[2]+606105819&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(E^O&(k^E))+D[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=E+(k^C&(O^k))+D[4]+4118548399&4294967295,E=C+(R<<7&4294967295|R>>>25),R=k+(O^E&(C^O))+D[5]+1200080426&4294967295,k=E+(R<<12&4294967295|R>>>20),R=O+(C^k&(E^C))+D[6]+2821735955&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(E^O&(k^E))+D[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=E+(k^C&(O^k))+D[8]+1770035416&4294967295,E=C+(R<<7&4294967295|R>>>25),R=k+(O^E&(C^O))+D[9]+2336552879&4294967295,k=E+(R<<12&4294967295|R>>>20),R=O+(C^k&(E^C))+D[10]+4294925233&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(E^O&(k^E))+D[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=E+(k^C&(O^k))+D[12]+1804603682&4294967295,E=C+(R<<7&4294967295|R>>>25),R=k+(O^E&(C^O))+D[13]+4254626195&4294967295,k=E+(R<<12&4294967295|R>>>20),R=O+(C^k&(E^C))+D[14]+2792965006&4294967295,O=k+(R<<17&4294967295|R>>>15),R=C+(E^O&(k^E))+D[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=E+(O^k&(C^O))+D[1]+4129170786&4294967295,E=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(E^C))+D[6]+3225465664&4294967295,k=E+(R<<9&4294967295|R>>>23),R=O+(E^C&(k^E))+D[11]+643717713&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^E&(O^k))+D[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=E+(O^k&(C^O))+D[5]+3593408605&4294967295,E=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(E^C))+D[10]+38016083&4294967295,k=E+(R<<9&4294967295|R>>>23),R=O+(E^C&(k^E))+D[15]+3634488961&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^E&(O^k))+D[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=E+(O^k&(C^O))+D[9]+568446438&4294967295,E=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(E^C))+D[14]+3275163606&4294967295,k=E+(R<<9&4294967295|R>>>23),R=O+(E^C&(k^E))+D[3]+4107603335&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^E&(O^k))+D[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=E+(O^k&(C^O))+D[13]+2850285829&4294967295,E=C+(R<<5&4294967295|R>>>27),R=k+(C^O&(E^C))+D[2]+4243563512&4294967295,k=E+(R<<9&4294967295|R>>>23),R=O+(E^C&(k^E))+D[7]+1735328473&4294967295,O=k+(R<<14&4294967295|R>>>18),R=C+(k^E&(O^k))+D[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=E+(C^O^k)+D[5]+4294588738&4294967295,E=C+(R<<4&4294967295|R>>>28),R=k+(E^C^O)+D[8]+2272392833&4294967295,k=E+(R<<11&4294967295|R>>>21),R=O+(k^E^C)+D[11]+1839030562&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^E)+D[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=E+(C^O^k)+D[1]+2763975236&4294967295,E=C+(R<<4&4294967295|R>>>28),R=k+(E^C^O)+D[4]+1272893353&4294967295,k=E+(R<<11&4294967295|R>>>21),R=O+(k^E^C)+D[7]+4139469664&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^E)+D[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=E+(C^O^k)+D[13]+681279174&4294967295,E=C+(R<<4&4294967295|R>>>28),R=k+(E^C^O)+D[0]+3936430074&4294967295,k=E+(R<<11&4294967295|R>>>21),R=O+(k^E^C)+D[3]+3572445317&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^E)+D[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=E+(C^O^k)+D[9]+3654602809&4294967295,E=C+(R<<4&4294967295|R>>>28),R=k+(E^C^O)+D[12]+3873151461&4294967295,k=E+(R<<11&4294967295|R>>>21),R=O+(k^E^C)+D[15]+530742520&4294967295,O=k+(R<<16&4294967295|R>>>16),R=C+(O^k^E)+D[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=E+(O^(C|~k))+D[0]+4096336452&4294967295,E=C+(R<<6&4294967295|R>>>26),R=k+(C^(E|~O))+D[7]+1126891415&4294967295,k=E+(R<<10&4294967295|R>>>22),R=O+(E^(k|~C))+D[14]+2878612391&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~E))+D[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=E+(O^(C|~k))+D[12]+1700485571&4294967295,E=C+(R<<6&4294967295|R>>>26),R=k+(C^(E|~O))+D[3]+2399980690&4294967295,k=E+(R<<10&4294967295|R>>>22),R=O+(E^(k|~C))+D[10]+4293915773&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~E))+D[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=E+(O^(C|~k))+D[8]+1873313359&4294967295,E=C+(R<<6&4294967295|R>>>26),R=k+(C^(E|~O))+D[15]+4264355552&4294967295,k=E+(R<<10&4294967295|R>>>22),R=O+(E^(k|~C))+D[6]+2734768916&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~E))+D[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=E+(O^(C|~k))+D[4]+4149444226&4294967295,E=C+(R<<6&4294967295|R>>>26),R=k+(C^(E|~O))+D[11]+3174756917&4294967295,k=E+(R<<10&4294967295|R>>>22),R=O+(E^(k|~C))+D[2]+718787259&4294967295,O=k+(R<<15&4294967295|R>>>17),R=C+(k^(O|~E))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+O&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var C=E-this.blockSize,D=this.B,O=this.h,k=0;k<E;){if(O==0)for(;k<=C;)s(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<E;)if(D[O++]=T.charCodeAt(k++),O==this.blockSize){s(this,D),O=0;break}}else for(;k<E;)if(D[O++]=T[k++],O==this.blockSize){s(this,D),O=0;break}}this.h=O,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var C=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=C&255,C/=256;for(this.u(T),T=Array(16),E=C=0;4>E;++E)for(var D=0;32>D;D+=8)T[C++]=this.g[E]>>>D&255;return T};function i(T,E){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=E(T)}function o(T,E){this.h=E;for(var C=[],D=!0,O=T.length-1;0<=O;O--){var k=T[O]|0;D&&k==E||(C[O]=k,D=!1)}this.g=C}var a={};function c(T){return-128<=T&&128>T?i(T,function(E){return new o([E|0],0>E?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return _(u(-T));for(var E=[],C=1,D=0;T>=C;D++)E[D]=T/C|0,C*=4294967296;return new o(E,0)}function h(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return _(h(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(E,8)),D=f,O=0;O<T.length;O+=8){var k=Math.min(8,T.length-O),R=parseInt(T.substring(O,O+k),E);8>k?(k=u(Math.pow(E,k)),D=D.j(k).add(u(R))):(D=D.j(C),D=D.add(u(R)))}return D}var f=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(y(this))return-_(this).m();for(var T=0,E=1,C=0;C<this.g.length;C++){var D=this.i(C);T+=(0<=D?D:4294967296+D)*E,E*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(y(this))return"-"+_(this).toString(T);for(var E=u(Math.pow(T,6)),C=this,D="";;){var O=P(C,E).g;C=I(C,O.j(E));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=O,x(C))return k+D;for(;6>k.length;)k="0"+k;D=k+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function y(T){return T.h==-1}n.l=function(T){return T=I(this,T),y(T)?-1:x(T)?0:1};function _(T){for(var E=T.g.length,C=[],D=0;D<E;D++)C[D]=~T.g[D];return new o(C,~T.h).add(m)}n.abs=function(){return y(this)?_(this):this},n.add=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],D=0,O=0;O<=E;O++){var k=D+(this.i(O)&65535)+(T.i(O)&65535),R=(k>>>16)+(this.i(O)>>>16)+(T.i(O)>>>16);D=R>>>16,k&=65535,R&=65535,C[O]=R<<16|k}return new o(C,C[C.length-1]&-2147483648?-1:0)};function I(T,E){return T.add(_(E))}n.j=function(T){if(x(this)||x(T))return f;if(y(this))return y(T)?_(this).j(_(T)):_(_(this).j(T));if(y(T))return _(this.j(_(T)));if(0>this.l(v)&&0>T.l(v))return u(this.m()*T.m());for(var E=this.g.length+T.g.length,C=[],D=0;D<2*E;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var O=0;O<T.g.length;O++){var k=this.i(D)>>>16,R=this.i(D)&65535,q=T.i(O)>>>16,te=T.i(O)&65535;C[2*D+2*O]+=R*te,b(C,2*D+2*O),C[2*D+2*O+1]+=k*te,b(C,2*D+2*O+1),C[2*D+2*O+1]+=R*q,b(C,2*D+2*O+1),C[2*D+2*O+2]+=k*q,b(C,2*D+2*O+2)}for(D=0;D<E;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=E;D<2*E;D++)C[D]=0;return new o(C,0)};function b(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function S(T,E){this.g=T,this.h=E}function P(T,E){if(x(E))throw Error("division by zero");if(x(T))return new S(f,f);if(y(T))return E=P(_(T),E),new S(_(E.g),_(E.h));if(y(E))return E=P(T,_(E)),new S(_(E.g),E.h);if(30<T.g.length){if(y(T)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var C=m,D=E;0>=D.l(T);)C=N(C),D=N(D);var O=j(C,1),k=j(D,1);for(D=j(D,2),C=j(C,2);!x(D);){var R=k.add(D);0>=R.l(T)&&(O=O.add(C),k=R),D=j(D,1),C=j(C,1)}return E=I(T,O.j(E)),new S(O,E)}for(O=f;0<=T.l(E);){for(C=Math.max(1,Math.floor(T.m()/E.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),k=u(C),R=k.j(E);y(R)||0<R.l(T);)C-=D,k=u(C),R=k.j(E);x(k)&&(k=m),O=O.add(k),T=I(T,R)}return new S(O,T)}n.A=function(T){return P(this,T).h},n.and=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)&T.i(D);return new o(C,this.h&T.h)},n.or=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)|T.i(D);return new o(C,this.h|T.h)},n.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],D=0;D<E;D++)C[D]=this.i(D)^T.i(D);return new o(C,this.h^T.h)};function N(T){for(var E=T.g.length+1,C=[],D=0;D<E;D++)C[D]=T.i(D)<<1|T.i(D-1)>>>31;return new o(C,T.h)}function j(T,E){var C=E>>5;E%=32;for(var D=T.g.length-C,O=[],k=0;k<D;k++)O[k]=0<E?T.i(k+C)>>>E|T.i(k+C+1)<<32-E:T.i(k+C);return new o(O,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,qs=o}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hI,Vc,fI,ed,Gp,pI,mI,gI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,g,w){return l==Array.prototype||l==Object.prototype||(l[g]=w.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var g=0;g<l.length;++g){var w=l[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(l,g){if(g)e:{var w=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var F=l[A];if(!(F in w))break e;w=w[F]}l=l[l.length-1],A=w[l],g=g(A),g!=A&&g!=null&&e(w,l,{configurable:!0,writable:!0,value:g})}}function i(l,g){l instanceof String&&(l+="");var w=0,A=!1,F={next:function(){if(!A&&w<l.length){var $=w++;return{value:g($,l[$]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(l){return l||function(){return i(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var g=typeof l;return g=g!="object"?g:l?Array.isArray(l)?"array":g:"null",g=="array"||g=="object"&&typeof l.length=="number"}function u(l){var g=typeof l;return g=="object"&&l!=null||g=="function"}function h(l,g,w){return l.call.apply(l.bind,arguments)}function f(l,g,w){if(!l)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),l.apply(g,F)}}return function(){return l.apply(g,arguments)}}function m(l,g,w){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function v(l,g){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function x(l,g){function w(){}w.prototype=g.prototype,l.aa=g.prototype,l.prototype=new w,l.prototype.constructor=l,l.Qb=function(A,F,$){for(var J=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)J[nt-2]=arguments[nt];return g.prototype[F].apply(A,J)}}function y(l){const g=l.length;if(0<g){const w=Array(g);for(let A=0;A<g;A++)w[A]=l[A];return w}return[]}function _(l,g){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(c(A)){const F=l.length||0,$=A.length||0;l.length=F+$;for(let J=0;J<$;J++)l[F+J]=A[J]}else l.push(A)}}class I{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(l,g,w){for(const A in l)g.call(w,l[A],A,l)}function T(l,g){for(const w in l)g.call(void 0,l[w],w,l)}function E(l){const g={};for(const w in l)g[w]=l[w];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(l,g){let w,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(w in A)l[w]=A[w];for(let $=0;$<C.length;$++)w=C[$],Object.prototype.hasOwnProperty.call(A,w)&&(l[w]=A[w])}}function O(l){var g=1;l=l.split(":");const w=[];for(;0<g&&l.length;)w.push(l.shift()),g--;return l.length&&w.push(l.join(":")),w}function k(l){a.setTimeout(()=>{throw l},0)}function R(){var l=K;let g=null;return l.g&&(g=l.g,l.g=l.g.next,l.g||(l.h=null),g.next=null),g}class q{constructor(){this.h=this.g=null}add(g,w){const A=te.get();A.set(g,w),this.h?this.h.next=A:this.g=A,this.h=A}}var te=new I(()=>new G,l=>l.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Y=!1,K=new q,Ie=()=>{const l=a.Promise.resolve(void 0);oe=()=>{l.then(ce)}};var ce=()=>{for(var l;l=R();){try{l.h.call(l.g)}catch(w){k(w)}var g=te;g.j(l),100>g.h&&(g.h++,l.next=g.g,g.g=l)}Y=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(l,g){this.type=l,this.g=this.target=g,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,g=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return l}();function ot(l,g){if(_e.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var w=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=g,g=l.relatedTarget){if(N){e:{try{P(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else w=="mouseover"?g=l.fromElement:w=="mouseout"&&(g=l.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ft[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ot.aa.h.call(this)}}x(ot,_e);var ft={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Me=0;function qe(l,g,w,A,F){this.listener=l,this.proxy=null,this.src=g,this.type=w,this.capture=!!A,this.ha=F,this.key=++Me,this.da=this.fa=!1}function De(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Fe(l){this.src=l,this.g={},this.h=0}Fe.prototype.add=function(l,g,w,A,F){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var J=Ct(l,g,A,F);return-1<J?(g=l[J],w||(g.fa=!1)):(g=new qe(g,this.src,$,!!A,F),g.fa=w,l.push(g)),g};function Ue(l,g){var w=g.type;if(w in l.g){var A=l.g[w],F=Array.prototype.indexOf.call(A,g,void 0),$;($=0<=F)&&Array.prototype.splice.call(A,F,1),$&&(De(g),l.g[w].length==0&&(delete l.g[w],l.h--))}}function Ct(l,g,w,A){for(var F=0;F<l.length;++F){var $=l[F];if(!$.da&&$.listener==g&&$.capture==!!w&&$.ha==A)return F}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),Cn={};function tr(l,g,w,A,F){if(Array.isArray(g)){for(var $=0;$<g.length;$++)tr(l,g[$],w,A,F);return null}return w=Q(w),l&&l[de]?l.K(g,w,u(A)?!!A.capture:!1,F):Cr(l,g,w,!1,A,F)}function Cr(l,g,w,A,F,$){if(!g)throw Error("Invalid event type");var J=u(F)?!!F.capture:!!F,nt=se(l);if(nt||(l[Ft]=nt=new Fe(l)),w=nt.add(g,w,A,J,$),w.proxy)return w;if(A=yu(),w.proxy=A,A.src=l,A.listener=w,l.addEventListener)it||(F=J),F===void 0&&(F=!1),l.addEventListener(g.toString(),A,F);else if(l.attachEvent)l.attachEvent(U(g.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function yu(){function l(w){return g.call(l.src,l.listener,w)}const g=z;return l}function nr(l,g,w,A,F){if(Array.isArray(g))for(var $=0;$<g.length;$++)nr(l,g[$],w,A,F);else A=u(A)?!!A.capture:!!A,w=Q(w),l&&l[de]?(l=l.i,g=String(g).toString(),g in l.g&&($=l.g[g],w=Ct($,w,A,F),-1<w&&(De($[w]),Array.prototype.splice.call($,w,1),$.length==0&&(delete l.g[g],l.h--)))):l&&(l=se(l))&&(g=l.g[g.toString()],l=-1,g&&(l=Ct(g,w,A,F)),(w=-1<l?g[l]:null)&&M(w))}function M(l){if(typeof l!="number"&&l&&!l.da){var g=l.src;if(g&&g[de])Ue(g.i,l);else{var w=l.type,A=l.proxy;g.removeEventListener?g.removeEventListener(w,A,l.capture):g.detachEvent?g.detachEvent(U(w),A):g.addListener&&g.removeListener&&g.removeListener(A),(w=se(g))?(Ue(w,l),w.h==0&&(w.src=null,g[Ft]=null)):De(l)}}}function U(l){return l in Cn?Cn[l]:Cn[l]="on"+l}function z(l,g){if(l.da)l=!0;else{g=new ot(g,this);var w=l.listener,A=l.ha||l.src;l.fa&&M(l),l=w.call(A,g)}return l}function se(l){return l=l[Ft],l instanceof Fe?l:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q(l){return typeof l=="function"?l:(l[Z]||(l[Z]=function(g){return l.handleEvent(g)}),l[Z])}function ae(){Re.call(this),this.i=new Fe(this),this.M=this,this.F=null}x(ae,Re),ae.prototype[de]=!0,ae.prototype.removeEventListener=function(l,g,w,A){nr(this,l,g,w,A)};function Te(l,g){var w,A=l.F;if(A)for(w=[];A;A=A.F)w.push(A);if(l=l.M,A=g.type||g,typeof g=="string")g=new _e(g,l);else if(g instanceof _e)g.target=g.target||l;else{var F=g;g=new _e(A,l),D(g,F)}if(F=!0,w)for(var $=w.length-1;0<=$;$--){var J=g.g=w[$];F=Ge(J,A,!0,g)&&F}if(J=g.g=l,F=Ge(J,A,!0,g)&&F,F=Ge(J,A,!1,g)&&F,w)for($=0;$<w.length;$++)J=g.g=w[$],F=Ge(J,A,!1,g)&&F}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var l=this.i,g;for(g in l.g){for(var w=l.g[g],A=0;A<w.length;A++)De(w[A]);delete l.g[g],l.h--}}this.F=null},ae.prototype.K=function(l,g,w,A){return this.i.add(String(l),g,!1,w,A)},ae.prototype.L=function(l,g,w,A){return this.i.add(String(l),g,!0,w,A)};function Ge(l,g,w,A){if(g=l.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,$=0;$<g.length;++$){var J=g[$];if(J&&!J.da&&J.capture==w){var nt=J.listener,Ut=J.ha||J.src;J.fa&&Ue(l.i,J),F=nt.call(Ut,A)!==!1&&F}}return F&&!A.defaultPrevented}function Xt(l,g,w){if(typeof l=="function")w&&(l=m(l,w));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(l,g||0)}function gi(l){l.g=Xt(()=>{l.g=null,l.i&&(l.i=!1,gi(l))},l.l);const g=l.h;l.h=null,l.m.apply(null,g)}class rr extends Re{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:gi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yi(l){Re.call(this),this.h=l,this.g={}}x(yi,Re);var Co=[];function Po(l){j(l.g,function(g,w){this.g.hasOwnProperty(w)&&M(g)},l),l.g={}}yi.prototype.N=function(){yi.aa.N.call(this),Po(this)},yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lc=a.JSON.stringify,vu=a.JSON.parse,Tf=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function No(){}No.prototype.h=null;function Nv(l){return l.h||(l.h=l.i())}function kv(){}var uc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sf(){_e.call(this,"d")}x(Sf,_e);function Af(){_e.call(this,"c")}x(Af,_e);var vi={},Dv=null;function _u(){return Dv=Dv||new ae}vi.La="serverreachability";function Ov(l){_e.call(this,vi.La,l)}x(Ov,_e);function dc(l){const g=_u();Te(g,new Ov(g))}vi.STAT_EVENT="statevent";function Vv(l,g){_e.call(this,vi.STAT_EVENT,l),this.stat=g}x(Vv,_e);function Yt(l){const g=_u();Te(g,new Vv(g,l))}vi.Ma="timingevent";function Mv(l,g){_e.call(this,vi.Ma,l),this.size=g}x(Mv,_e);function hc(l,g){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},g)}function fc(){this.g=!0}fc.prototype.xa=function(){this.g=!1};function IN(l,g,w,A,F,$){l.info(function(){if(l.g)if($)for(var J="",nt=$.split("&"),Ut=0;Ut<nt.length;Ut++){var We=nt[Ut].split("=");if(1<We.length){var zt=We[0];We=We[1];var qt=zt.split("_");J=2<=qt.length&&qt[1]=="type"?J+(zt+"="+We+"&"):J+(zt+"=redacted&")}}else J=null;else J=$;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+g+`
`+w+`
`+J})}function TN(l,g,w,A,F,$,J){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+g+`
`+w+`
`+$+" "+J})}function ko(l,g,w,A){l.info(function(){return"XMLHTTP TEXT ("+g+"): "+AN(l,w)+(A?" "+A:"")})}function SN(l,g){l.info(function(){return"TIMEOUT: "+g})}fc.prototype.info=function(){};function AN(l,g){if(!l.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(l=0;l<w.length;l++)if(Array.isArray(w[l])){var A=w[l];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return lc(w)}catch{return g}}var wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rf;function bu(){}x(bu,No),bu.prototype.g=function(){return new XMLHttpRequest},bu.prototype.i=function(){return{}},Rf=new bu;function us(l,g,w,A){this.j=l,this.i=g,this.l=w,this.R=A||1,this.U=new yi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lv}function Lv(){this.i=null,this.g="",this.h=!1}var Fv={},Cf={};function Pf(l,g,w){l.L=1,l.v=Tu(Pr(g)),l.m=w,l.P=!0,Uv(l,null)}function Uv(l,g){l.F=Date.now(),xu(l),l.A=Pr(l.v);var w=l.A,A=l.R;Array.isArray(A)||(A=[String(A)]),e_(w.i,"t",A),l.C=0,w=l.j.J,l.h=new Lv,l.g=v_(l.j,w?g:null,!l.m),0<l.O&&(l.M=new rr(m(l.Y,l,l.g),l.O)),g=l.U,w=l.g,A=l.ca;var F="readystatechange";Array.isArray(F)||(F&&(Co[0]=F.toString()),F=Co);for(var $=0;$<F.length;$++){var J=tr(w,F[$],A||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,g)):(l.u="GET",l.g.ea(l.A,l.u,null,g)),dc(),IN(l.i,l.u,l.A,l.l,l.R,l.m)}us.prototype.ca=function(l){l=l.target;const g=this.M;g&&Nr(l)==3?g.j():this.Y(l)},us.prototype.Y=function(l){try{if(l==this.g)e:{const qt=Nr(this.g);var g=this.g.Ba();const Vo=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||a_(this.g)))){this.J||qt!=4||g==7||(g==8||0>=Vo?dc(3):dc(2)),Nf(this);var w=this.g.Z();this.X=w;t:if(Bv(this)){var A=a_(this.g);l="";var F=A.length,$=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),pc(this);var J="";break t}this.h.i=new a.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,l+=this.h.i.decode(A[g],{stream:!($&&g==F-1)});A.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=w==200,TN(this.i,this.u,this.A,this.l,this.R,qt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Ut=this.g;if((nt=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(nt)){var We=nt;break t}}We=null}if(w=We)ko(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kf(this,w);else{this.o=!1,this.s=3,Yt(12),_i(this),pc(this);break e}}if(this.P){w=!0;let Fn;for(;!this.J&&this.C<J.length;)if(Fn=RN(this,J),Fn==Cf){qt==4&&(this.s=4,Yt(14),w=!1),ko(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==Fv){this.s=4,Yt(15),ko(this.i,this.l,J,"[Invalid Chunk]"),w=!1;break}else ko(this.i,this.l,Fn,null),kf(this,Fn);if(Bv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||J.length!=0||this.h.h||(this.s=1,Yt(16),w=!1),this.o=this.o&&w,!w)ko(this.i,this.l,J,"[Invalid Chunked Response]"),_i(this),pc(this);else if(0<J.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Lf(zt),zt.M=!0,Yt(11))}}else ko(this.i,this.l,J,null),kf(this,J);qt==4&&_i(this),this.o&&!this.J&&(qt==4?p_(this.j,this):(this.o=!1,xu(this)))}else WN(this.g),w==400&&0<J.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),_i(this),pc(this)}}}catch{}finally{}};function Bv(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function RN(l,g){var w=l.C,A=g.indexOf(`
`,w);return A==-1?Cf:(w=Number(g.substring(w,A)),isNaN(w)?Fv:(A+=1,A+w>g.length?Cf:(g=g.slice(A,A+w),l.C=A+w,g)))}us.prototype.cancel=function(){this.J=!0,_i(this)};function xu(l){l.S=Date.now()+l.I,$v(l,l.I)}function $v(l,g){if(l.B!=null)throw Error("WatchDog timer not null");l.B=hc(m(l.ba,l),g)}function Nf(l){l.B&&(a.clearTimeout(l.B),l.B=null)}us.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(SN(this.i,this.A),this.L!=2&&(dc(),Yt(17)),_i(this),this.s=2,pc(this)):$v(this,this.S-l)};function pc(l){l.j.G==0||l.J||p_(l.j,l)}function _i(l){Nf(l);var g=l.M;g&&typeof g.ma=="function"&&g.ma(),l.M=null,Po(l.U),l.g&&(g=l.g,l.g=null,g.abort(),g.ma())}function kf(l,g){try{var w=l.j;if(w.G!=0&&(w.g==l||Df(w.h,l))){if(!l.K&&Df(w.h,l)&&w.G==3){try{var A=w.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<l.F)Nu(w),Cu(w);else break e;jf(w),Yt(18)}}else w.za=F[1],0<w.za-w.T&&37500>F[2]&&w.F&&w.v==0&&!w.C&&(w.C=hc(m(w.Za,w),6e3));if(1>=Wv(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else bi(w,11)}else if((l.K||w.g==l)&&Nu(w),!b(g))for(F=w.Da.g.parse(g),g=0;g<F.length;g++){let We=F[g];if(w.T=We[0],We=We[1],w.G==2)if(We[0]=="c"){w.K=We[1],w.ia=We[2];const zt=We[3];zt!=null&&(w.la=zt,w.j.info("VER="+w.la));const qt=We[4];qt!=null&&(w.Aa=qt,w.j.info("SVER="+w.Aa));const Vo=We[5];Vo!=null&&typeof Vo=="number"&&0<Vo&&(A=1.5*Vo,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Fn=l.g;if(Fn){const Du=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var $=A.h;$.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Of($,$.h),$.h=null))}if(A.D){const Ff=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ff&&(A.ya=Ff,ct(A.I,A.D,Ff))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-l.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var J=l;if(A.qa=y_(A,A.J?A.ia:null,A.W),J.K){Kv(A.h,J);var nt=J,Ut=A.L;Ut&&(nt.I=Ut),nt.B&&(Nf(nt),xu(nt)),A.g=J}else h_(A);0<w.i.length&&Pu(w)}else We[0]!="stop"&&We[0]!="close"||bi(w,7);else w.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?bi(w,7):Mf(w):We[0]!="noop"&&w.l&&w.l.ta(We),w.v=0)}}dc(4)}catch{}}var CN=class{constructor(l,g){this.g=l,this.map=g}};function zv(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qv(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Wv(l){return l.h?1:l.g?l.g.size:0}function Df(l,g){return l.h?l.h==g:l.g?l.g.has(g):!1}function Of(l,g){l.g?l.g.add(g):l.h=g}function Kv(l,g){l.h&&l.h==g?l.h=null:l.g&&l.g.has(g)&&l.g.delete(g)}zv.prototype.cancel=function(){if(this.i=Hv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Hv(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let g=l.i;for(const w of l.g.values())g=g.concat(w.D);return g}return y(l.i)}function PN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var g=[],w=l.length,A=0;A<w;A++)g.push(l[A]);return g}g=[],w=0;for(A in l)g[w++]=l[A];return g}function NN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var g=[];l=l.length;for(var w=0;w<l;w++)g.push(w);return g}g=[],w=0;for(const A in l)g[w++]=A;return g}}}function Gv(l,g){if(l.forEach&&typeof l.forEach=="function")l.forEach(g,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,g,void 0);else for(var w=NN(l),A=PN(l),F=A.length,$=0;$<F;$++)g.call(void 0,A[$],w&&w[$],l)}var Qv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kN(l,g){if(l){l=l.split("&");for(var w=0;w<l.length;w++){var A=l[w].indexOf("="),F=null;if(0<=A){var $=l[w].substring(0,A);F=l[w].substring(A+1)}else $=l[w];g($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function wi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof wi){this.h=l.h,Eu(this,l.j),this.o=l.o,this.g=l.g,Iu(this,l.s),this.l=l.l;var g=l.i,w=new yc;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),Xv(this,w),this.m=l.m}else l&&(g=String(l).match(Qv))?(this.h=!1,Eu(this,g[1]||"",!0),this.o=mc(g[2]||""),this.g=mc(g[3]||"",!0),Iu(this,g[4]),this.l=mc(g[5]||"",!0),Xv(this,g[6]||"",!0),this.m=mc(g[7]||"")):(this.h=!1,this.i=new yc(null,this.h))}wi.prototype.toString=function(){var l=[],g=this.j;g&&l.push(gc(g,Yv,!0),":");var w=this.g;return(w||g=="file")&&(l.push("//"),(g=this.o)&&l.push(gc(g,Yv,!0),"@"),l.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&l.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&l.push("/"),l.push(gc(w,w.charAt(0)=="/"?VN:ON,!0))),(w=this.i.toString())&&l.push("?",w),(w=this.m)&&l.push("#",gc(w,jN)),l.join("")};function Pr(l){return new wi(l)}function Eu(l,g,w){l.j=w?mc(g,!0):g,l.j&&(l.j=l.j.replace(/:$/,""))}function Iu(l,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);l.s=g}else l.s=null}function Xv(l,g,w){g instanceof yc?(l.i=g,LN(l.i,l.h)):(w||(g=gc(g,MN)),l.i=new yc(g,l.h))}function ct(l,g,w){l.i.set(g,w)}function Tu(l){return ct(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function mc(l,g){return l?g?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function gc(l,g,w){return typeof l=="string"?(l=encodeURI(l).replace(g,DN),w&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function DN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Yv=/[#\/\?@]/g,ON=/[#\?:]/g,VN=/[#\?]/g,MN=/[#\?@]/g,jN=/#/g;function yc(l,g){this.h=this.g=null,this.i=l||null,this.j=!!g}function ds(l){l.g||(l.g=new Map,l.h=0,l.i&&kN(l.i,function(g,w){l.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=yc.prototype,n.add=function(l,g){ds(this),this.i=null,l=Do(this,l);var w=this.g.get(l);return w||this.g.set(l,w=[]),w.push(g),this.h+=1,this};function Zv(l,g){ds(l),g=Do(l,g),l.g.has(g)&&(l.i=null,l.h-=l.g.get(g).length,l.g.delete(g))}function Jv(l,g){return ds(l),g=Do(l,g),l.g.has(g)}n.forEach=function(l,g){ds(this),this.g.forEach(function(w,A){w.forEach(function(F){l.call(g,F,A,this)},this)},this)},n.na=function(){ds(this);const l=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let A=0;A<g.length;A++){const F=l[A];for(let $=0;$<F.length;$++)w.push(g[A])}return w},n.V=function(l){ds(this);let g=[];if(typeof l=="string")Jv(this,l)&&(g=g.concat(this.g.get(Do(this,l))));else{l=Array.from(this.g.values());for(let w=0;w<l.length;w++)g=g.concat(l[w])}return g},n.set=function(l,g){return ds(this),this.i=null,l=Do(this,l),Jv(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[g]),this.h+=1,this},n.get=function(l,g){return l?(l=this.V(l),0<l.length?String(l[0]):g):g};function e_(l,g,w){Zv(l,g),0<w.length&&(l.i=null,l.g.set(Do(l,g),y(w)),l.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var A=g[w];const $=encodeURIComponent(String(A)),J=this.V(A);for(A=0;A<J.length;A++){var F=$;J[A]!==""&&(F+="="+encodeURIComponent(String(J[A]))),l.push(F)}}return this.i=l.join("&")};function Do(l,g){return g=String(g),l.j&&(g=g.toLowerCase()),g}function LN(l,g){g&&!l.j&&(ds(l),l.i=null,l.g.forEach(function(w,A){var F=A.toLowerCase();A!=F&&(Zv(this,A),e_(this,F,w))},l)),l.j=g}function FN(l,g){const w=new fc;if(a.Image){const A=new Image;A.onload=v(hs,w,"TestLoadImage: loaded",!0,g,A),A.onerror=v(hs,w,"TestLoadImage: error",!1,g,A),A.onabort=v(hs,w,"TestLoadImage: abort",!1,g,A),A.ontimeout=v(hs,w,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else g(!1)}function UN(l,g){const w=new fc,A=new AbortController,F=setTimeout(()=>{A.abort(),hs(w,"TestPingServer: timeout",!1,g)},1e4);fetch(l,{signal:A.signal}).then($=>{clearTimeout(F),$.ok?hs(w,"TestPingServer: ok",!0,g):hs(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),hs(w,"TestPingServer: error",!1,g)})}function hs(l,g,w,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(w)}catch{}}function BN(){this.g=new Tf}function $N(l,g,w){const A=w||"";try{Gv(l,function(F,$){let J=F;u(F)&&(J=lc(F)),g.push(A+$+"="+encodeURIComponent(J))})}catch(F){throw g.push(A+"type="+encodeURIComponent("_badmap")),F}}function Su(l){this.l=l.Ub||null,this.j=l.eb||!1}x(Su,No),Su.prototype.g=function(){return new Au(this.l,this.j)},Su.prototype.i=function(l){return function(){return l}}({});function Au(l,g){ae.call(this),this.D=l,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Au,ae),n=Au.prototype,n.open=function(l,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=g,this.readyState=1,_c(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(g.body=l),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vc(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,_c(this)),this.g&&(this.readyState=3,_c(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;t_(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function t_(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var g=l.value?l.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!l.done}))&&(this.response=this.responseText+=g)}l.done?vc(this):_c(this),this.readyState==3&&t_(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,vc(this))},n.Qa=function(l){this.g&&(this.response=l,vc(this))},n.ga=function(){this.g&&vc(this)};function vc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,_c(l)}n.setRequestHeader=function(l,g){this.u.append(l,g)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,l.push(w[0]+": "+w[1]),w=g.next();return l.join(`\r
`)};function _c(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function n_(l){let g="";return j(l,function(w,A){g+=A,g+=":",g+=w,g+=`\r
`}),g}function Vf(l,g,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=n_(w),typeof l=="string"?w!=null&&encodeURIComponent(String(w)):ct(l,g,w))}function pt(l){ae.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(pt,ae);var zN=/^https?$/i,qN=["POST","PUT"];n=pt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,g,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);g=g?g.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rf.g(),this.v=this.o?Nv(this.o):Nv(Rf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(l),!0),this.B=!1}catch($){r_(this,$);return}if(l=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)w.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())w.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),F=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qN,g,void 0))||A||F||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,J]of w)this.g.setRequestHeader($,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{o_(this),this.u=!0,this.g.send(l),this.u=!1}catch($){r_(this,$)}};function r_(l,g){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=g,l.m=5,s_(l),Ru(l)}function s_(l){l.A||(l.A=!0,Te(l,"complete"),Te(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Te(this,"complete"),Te(this,"abort"),Ru(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ru(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?i_(this):this.bb())},n.bb=function(){i_(this)};function i_(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Nr(l)!=4||l.Z()!=2)){if(l.u&&Nr(l)==4)Xt(l.Ea,0,l);else if(Te(l,"readystatechange"),Nr(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var A;if(A=J===0){var F=String(l.D).match(Qv)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),A=!zN.test(F?F.toLowerCase():"")}w=A}if(w)Te(l,"complete"),Te(l,"success");else{l.m=6;try{var $=2<Nr(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",s_(l)}}finally{Ru(l)}}}}function Ru(l,g){if(l.g){o_(l);const w=l.g,A=l.v[0]?()=>{}:null;l.g=null,l.v=null,g||Te(l,"ready");try{w.onreadystatechange=A}catch{}}}function o_(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Nr(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var g=this.g.responseText;return l&&g.indexOf(l)==0&&(g=g.substring(l.length)),vu(g)}};function a_(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function WN(l){const g={};l=(l.g&&2<=Nr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(b(l[A]))continue;var w=O(l[A]);const F=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=g[F]||[];g[F]=$,$.push(w)}T(g,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wc(l,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[l]||g}function c_(l){this.Aa=0,this.i=[],this.j=new fc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wc("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wc("baseRetryDelayMs",5e3,l),this.cb=wc("retryDelaySeedMs",1e4,l),this.Wa=wc("forwardChannelMaxRetries",2,l),this.wa=wc("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new zv(l&&l.concurrentRequestLimit),this.Da=new BN,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=c_.prototype,n.la=8,n.G=1,n.connect=function(l,g,w,A){Yt(0),this.W=l,this.H=g||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=y_(this,null,this.W),Pu(this)};function Mf(l){if(l_(l),l.G==3){var g=l.U++,w=Pr(l.I);if(ct(w,"SID",l.K),ct(w,"RID",g),ct(w,"TYPE","terminate"),bc(l,w),g=new us(l,l.j,g),g.L=2,g.v=Tu(Pr(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.v,w=!0),w||(g.g=v_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),xu(g)}g_(l)}function Cu(l){l.g&&(Lf(l),l.g.cancel(),l.g=null)}function l_(l){Cu(l),l.u&&(a.clearTimeout(l.u),l.u=null),Nu(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Pu(l){if(!qv(l.h)&&!l.s){l.s=!0;var g=l.Ga;oe||Ie(),Y||(oe(),Y=!0),K.add(g,l),l.B=0}}function KN(l,g){return Wv(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=g.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=hc(m(l.Ga,l,g),m_(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const F=new us(this,this.j,l);let $=this.o;if(this.S&&($?($=E($),D($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=d_(this,F,g),w=Pr(this.I),ct(w,"RID",l),ct(w,"CVER",22),this.D&&ct(w,"X-HTTP-Session-Id",this.D),bc(this,w),$&&(this.O?g="headers="+encodeURIComponent(String(n_($)))+"&"+g:this.m&&Vf(w,this.m,$)),Of(this.h,F),this.Ua&&ct(w,"TYPE","init"),this.P?(ct(w,"$req",g),ct(w,"SID","null"),F.T=!0,Pf(F,w,null)):Pf(F,w,g),this.G=2}}else this.G==3&&(l?u_(this,l):this.i.length==0||qv(this.h)||u_(this))};function u_(l,g){var w;g?w=g.l:w=l.U++;const A=Pr(l.I);ct(A,"SID",l.K),ct(A,"RID",w),ct(A,"AID",l.T),bc(l,A),l.m&&l.o&&Vf(A,l.m,l.o),w=new us(l,l.j,w,l.B+1),l.m===null&&(w.H=l.o),g&&(l.i=g.D.concat(l.i)),g=d_(l,w,1e3),w.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Of(l.h,w),Pf(w,A,g)}function bc(l,g){l.H&&j(l.H,function(w,A){ct(g,A,w)}),l.l&&Gv({},function(w,A){ct(g,A,w)})}function d_(l,g,w){w=Math.min(l.i.length,w);var A=l.l?m(l.l.Na,l.l,l):null;e:{var F=l.i;let $=-1;for(;;){const J=["count="+w];$==-1?0<w?($=F[0].g,J.push("ofs="+$)):$=0:J.push("ofs="+$);let nt=!0;for(let Ut=0;Ut<w;Ut++){let We=F[Ut].g;const zt=F[Ut].map;if(We-=$,0>We)$=Math.max(0,F[Ut].g-100),nt=!1;else try{$N(zt,J,"req"+We+"_")}catch{A&&A(zt)}}if(nt){A=J.join("&");break e}}}return l=l.i.splice(0,w),g.D=l,A}function h_(l){if(!l.g&&!l.u){l.Y=1;var g=l.Fa;oe||Ie(),Y||(oe(),Y=!0),K.add(g,l),l.v=0}}function jf(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=hc(m(l.Fa,l),m_(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,f_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=hc(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Cu(this),f_(this))};function Lf(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function f_(l){l.g=new us(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var g=Pr(l.qa);ct(g,"RID","rpc"),ct(g,"SID",l.K),ct(g,"AID",l.T),ct(g,"CI",l.F?"0":"1"),!l.F&&l.ja&&ct(g,"TO",l.ja),ct(g,"TYPE","xmlhttp"),bc(l,g),l.m&&l.o&&Vf(g,l.m,l.o),l.L&&(l.g.I=l.L);var w=l.g;l=l.ia,w.L=1,w.v=Tu(Pr(g)),w.m=null,w.P=!0,Uv(w,l)}n.Za=function(){this.C!=null&&(this.C=null,Cu(this),jf(this),Yt(19))};function Nu(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function p_(l,g){var w=null;if(l.g==g){Nu(l),Lf(l),l.g=null;var A=2}else if(Df(l.h,g))w=g.D,Kv(l.h,g),A=1;else return;if(l.G!=0){if(g.o)if(A==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var F=l.B;A=_u(),Te(A,new Mv(A,w)),Pu(l)}else h_(l);else if(F=g.s,F==3||F==0&&0<g.X||!(A==1&&KN(l,g)||A==2&&jf(l)))switch(w&&0<w.length&&(g=l.h,g.i=g.i.concat(w)),F){case 1:bi(l,5);break;case 4:bi(l,10);break;case 3:bi(l,6);break;default:bi(l,2)}}}function m_(l,g){let w=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(w*=2),w*g}function bi(l,g){if(l.j.info("Error code "+g),g==2){var w=m(l.fb,l),A=l.Xa;const F=!A;A=new wi(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Eu(A,"https"),Tu(A),F?FN(A.toString(),w):UN(A.toString(),w)}else Yt(2);l.G=0,l.l&&l.l.sa(g),g_(l),l_(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function g_(l){if(l.G=0,l.ka=[],l.l){const g=Hv(l.h);(g.length!=0||l.i.length!=0)&&(_(l.ka,g),_(l.ka,l.i),l.h.i.length=0,y(l.i),l.i.length=0),l.l.ra()}}function y_(l,g,w){var A=w instanceof wi?Pr(w):new wi(w);if(A.g!="")g&&(A.g=g+"."+A.g),Iu(A,A.s);else{var F=a.location;A=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var $=new wi(null);A&&Eu($,A),g&&($.g=g),F&&Iu($,F),w&&($.l=w),A=$}return w=l.D,g=l.ya,w&&g&&ct(A,w,g),ct(A,"VER",l.la),bc(l,A),A}function v_(l,g,w){if(g&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=l.Ca&&!l.pa?new pt(new Su({eb:w})):new pt(l.pa),g.Ha(l.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function __(){}n=__.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ku(){}ku.prototype.g=function(l,g){return new pn(l,g)};function pn(l,g){ae.call(this),this.g=new c_(g),this.l=l,this.h=g&&g.messageUrlParams||null,l=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(l?l["X-WebChannel-Content-Type"]=g.messageContentType:l={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(l?l["X-WebChannel-Client-Profile"]=g.va:l={"X-WebChannel-Client-Profile":g.va}),this.g.S=l,(l=g&&g.Sb)&&!b(l)&&(this.g.m=l),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,l=this.h,l!==null&&g in l&&(l=this.h,g in l&&delete l[g])),this.j=new Oo(this)}x(pn,ae),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Mf(this.g)},pn.prototype.o=function(l){var g=this.g;if(typeof l=="string"){var w={};w.__data__=l,l=w}else this.u&&(w={},w.__data__=lc(l),l=w);g.i.push(new CN(g.Ya++,l)),g.G==3&&Pu(g)},pn.prototype.N=function(){this.g.l=null,delete this.j,Mf(this.g),delete this.g,pn.aa.N.call(this)};function w_(l){Sf.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var g=l.__sm__;if(g){e:{for(const w in g){l=w;break e}l=void 0}(this.i=l)&&(l=this.i,g=g!==null&&l in g?g[l]:void 0),this.data=g}else this.data=l}x(w_,Sf);function b_(){Af.call(this),this.status=1}x(b_,Af);function Oo(l){this.g=l}x(Oo,__),Oo.prototype.ua=function(){Te(this.g,"a")},Oo.prototype.ta=function(l){Te(this.g,new w_(l))},Oo.prototype.sa=function(l){Te(this.g,new b_)},Oo.prototype.ra=function(){Te(this.g,"b")},ku.prototype.createWebChannel=ku.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,gI=function(){return new ku},mI=function(){return _u()},pI=vi,Gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wu.NO_ERROR=0,wu.TIMEOUT=8,wu.HTTP_ERROR=6,ed=wu,jv.COMPLETE="complete",fI=jv,kv.EventType=uc,uc.OPEN="a",uc.CLOSE="b",uc.ERROR="c",uc.MESSAGE="d",ae.prototype.listen=ae.prototype.K,Vc=kv,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,hI=pt}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const ew="@firebase/firestore",tw="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new fg("@firebase/firestore");function Ko(){return Ji.logLevel}function W(n,...e){if(Ji.logLevel<=je.DEBUG){const t=e.map(gg);Ji.debug(`Firestore (${Xa}): ${n}`,...t)}}function bt(n,...e){if(Ji.logLevel<=je.ERROR){const t=e.map(gg);Ji.error(`Firestore (${Xa}): ${n}`,...t)}}function Xs(n,...e){if(Ji.logLevel<=je.WARN){const t=e.map(gg);Ji.warn(`Firestore (${Xa}): ${n}`,...t)}}function gg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,yI(n,r,t)}function yI(n,e,t){let r=`FIRESTORE (${Xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bt(r),new Error(r)}function ge(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||yI(e,s,r)}function fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kt.UNAUTHENTICATED))}shutdown(){}}class EO{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ge(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let i=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gr)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new bO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class IO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new IO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ge(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=AO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Qp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return be(r,s);{const i=vI(),o=RO(i.encode(rw(n,t)),i.encode(rw(e,t)));return o!==0?o:be(r,s)}}t+=r>65535?2:1}return be(n.length,e.length)}function rw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function RO(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return be(n[t],e[t]);return be(n.length,e.length)}function Ea(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function _I(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__name__";class sr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=sr.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return be(e.length,t.length)}static compareSegments(e,t){const r=sr.isNumericId(e),s=sr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?sr.extractNumericId(e).compare(sr.extractNumericId(t)):Qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qs.fromString(e.substring(4,e.length-2))}}class Ke extends sr{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Ke(t)}static emptyPath(){return new Ke([])}}const CO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends sr{construct(e,t,r){return new ht(e,t,r)}static isValidIdentifier(e){return CO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sw}static keyField(){return new ht([sw])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new H(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new H(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(t)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ke.fromString(e))}static fromName(e){return new ee(Ke.fromString(e).popFirst(5))}static empty(){return new ee(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n,e,t){if(!t)throw new H(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PO(n,e,t,r){if(e===!0&&r===!0)throw new H(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iw(n){if(!ee.isDocumentKey(n))throw new H(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ow(n){if(ee.isDocumentKey(n))throw new H(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue(12329,{type:typeof n})}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sh(n);throw new H(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NO(n,e){if(e<=0)throw new H(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n,e){const t={typeString:n};return e&&(t.value=e),t}function $l(n,e){if(!bI(n))throw new H(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new H(B.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=-62135596800,cw=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cw);return new Ze(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aw)throw new H(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cw}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($l(e,Ze._jsonSchema))return new Ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:St("string",Ze._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ze(0,0))}static max(){return new ve(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;class Rd{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Xp(n){return n.fields.find(e=>e.kind===2)}function Ii(n){return n.fields.filter(e=>e.kind!==2)}Rd.UNKNOWN_ID=-1;class td{constructor(e,t){this.fieldPath=e,this.kind=t}}class dl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dl(0,An.min())}}function xI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new Ze(t+1,0):new Ze(t,r));return new An(s,ee.empty(),e)}function EI(n){return new An(n.readTime,n.key,Ia)}class An{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new An(ve.min(),ee.empty(),Ia)}static max(){return new An(ve.max(),ee.empty(),Ia)}}function vg(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function li(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==II)throw n;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):L.reject(t)}static resolve(e){return new L((t,r)=>{t(e)})}static reject(e){return new L((t,r)=>{r(e)})}static waitFor(e){return new L((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},c=>r(c))}),o=!0,i===s&&t()})}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next(s=>s?L.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,t){return new L((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="SimpleDb";class Ah{static open(e,t,r,s){try{return new Ah(t,e.transaction(s,r))}catch(i){throw new Wc(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new gr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Wc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=_g(r.target.error);this.S.reject(new Wc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(W(mn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new DO(t)}}class Ws{static delete(e){return W(mn,"Removing database:",e),Ai(YE().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!iI())return!1;if(Ws.F())return!0;const e=Dt(),t=Ws.M(e),r=0<t&&t<10,s=SI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Ws.M(Dt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(W(mn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Wc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new H(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Wc(e,o))},s.onupgradeneeded=i=>{W(mn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;if(this.L!==null&&this.L!==i.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${i.oldVersion}, event.newVersion=${i.newVersion}, db.version=${o.version}`);this.B.q(o,s.transaction,i.oldVersion,this.version).next(()=>{W(mn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(Xs('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Ah.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.v(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(W(mn,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function SI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class kO{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Ai(this.$.delete())}}class Wc extends H{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ui(n){return n.name==="IndexedDbTransactionError"}class DO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W(mn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(W(mn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ai(r)}add(e){return W(mn,"ADD",this.store.name,e,e),Ai(this.store.add(e))}get(e){return Ai(this.store.get(e)).next(t=>(t===void 0&&(t=null),W(mn,"GET",this.store.name,e,t),t))}delete(e){return W(mn,"DELETE",this.store.name,e),Ai(this.store.delete(e))}count(){return W(mn,"COUNT",this.store.name),Ai(this.store.count())}j(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.J(i,(a,c)=>{o.push(c)}).next(()=>o)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Y(e,t){W(mn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const s=this.cursor(r);return this.J(s,(i,o,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.J(s,t)}ee(e){const t=this.cursor({});return new L((r,s)=>{t.onerror=i=>{const o=_g(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}J(e,t){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new kO(a),u=t(a.primaryKey,a.value,c);if(u instanceof L){const h=u.catch(f=>(c.done(),L.reject(f)));r.push(h)}c.isDone?s():c.W===null?a.continue():a.continue(c.W)}}).next(()=>L.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ai(n){return new L((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=_g(r.target.error);t(s)}})}let lw=!1;function _g(n){const e=Ws.M(Dt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lw||(lw=!0,setTimeout(()=>{throw r},0)),r}}return n}const Kc="IndexBackfiller";class OO{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){W(Kc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.te.re();W(Kc,`Documents written: ${t}`)}catch(t){ui(t)?W(Kc,"Ignoring IndexedDB error during index backfill: ",t):await li(t)}await this.ne(6e4)})}}class VO{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))}ie(e,t){const r=new Set;let s=t,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W(Kc,`Processing collection: ${o}`),this.se(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>t-s)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.oe(s,i)).next(a=>(W(Kc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}oe(e,t){let r=e;return t.changes.forEach((s,i)=>{const o=EI(i);vg(o,r)>0&&(r=o)}),new An(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}dn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=-1;function Rh(n){return n==null}function hl(n){return n===0&&1/n==-1/0}function AI(n){return typeof n=="number"&&Number.isInteger(n)&&!hl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="";function Qt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uw(e)),e=MO(n.get(t),e);return uw(e)}function MO(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case Cd:t+="";break;default:t+=i}}return t}function uw(n){return n+Cd+""}function dr(n){const e=n.length;if(ge(e>=2,64408,{path:n}),e===2)return ge(n.charAt(0)===Cd&&n.charAt(1)==="",56145,{path:n}),Ke.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(Cd,i);switch((o<0||o>t)&&ue(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:ue(61167,{path:n})}i=o+2}return new Ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="remoteDocuments",zl="owner",Mo="owner",fl="mutationQueues",jO="userId",zn="mutations",dw="batchId",ki="userMutationsIndex",hw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(n,e){return[n,Qt(e)]}function RI(n,e,t){return[n,Qt(e),t]}const LO={},Ta="documentMutations",Pd="remoteDocumentsV14",FO=["prefixPath","collectionGroup","readTime","documentId"],rd="documentKeyIndex",UO=["prefixPath","collectionGroup","documentId"],CI="collectionGroupIndex",BO=["collectionGroup","readTime","prefixPath","documentId"],pl="remoteDocumentGlobal",Yp="remoteDocumentGlobalKey",Sa="targets",PI="queryTargetsIndex",$O=["canonicalId","targetId"],Aa="targetDocuments",zO=["targetId","path"],wg="documentTargetsIndex",qO=["path","targetId"],Nd="targetGlobalKey",Wi="targetGlobal",ml="collectionParents",WO=["collectionId","parent"],Ra="clientMetadata",KO="clientId",Ch="bundles",HO="bundleId",Ph="namedQueries",GO="name",bg="indexConfiguration",QO="indexId",Zp="collectionGroupIndex",XO="collectionGroup",Hc="indexState",YO=["indexId","uid"],NI="sequenceNumberIndex",ZO=["uid","sequenceNumber"],Gc="indexEntries",JO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kI="documentKeyIndex",eV=["indexId","uid","orderedDocumentKey"],Nh="documentOverlays",tV=["userId","collectionPath","documentId"],Jp="collectionPathOverlayIndex",nV=["userId","collectionPath","largestBatchId"],DI="collectionGroupOverlayIndex",rV=["userId","collectionGroup","largestBatchId"],xg="globals",sV="name",OI=[fl,zn,Ta,Ti,Sa,zl,Wi,Aa,Ra,pl,ml,Ch,Ph],iV=[...OI,Nh],VI=[fl,zn,Ta,Pd,Sa,zl,Wi,Aa,Ra,pl,ml,Ch,Ph,Nh],MI=VI,Eg=[...MI,bg,Hc,Gc],oV=Eg,jI=[...Eg,xg],aV=jI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends TI{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Ot(n,e){const t=fe(n);return Ws.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function di(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ju(this.root,e,this.comparator,!0)}}class ju{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Bt.RED,this.left=s??Bt.EMPTY,this.right=i??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Bt(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pw(this.data.getIterator())}getIteratorFrom(e){return new pw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class pw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new hn([])}unionWith(e){let t=new et(ht.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new FI("Invalid base64 string: "+i):i}}(e);return new xt(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const cV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(n){if(ge(!!n,39018),typeof n=="string"){let e=0;const t=cV.exec(n);if(ge(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zr(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="server_timestamp",BI="__type__",$I="__previous_value__",zI="__local_write_time__";function kh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[BI])===null||t===void 0?void 0:t.stringValue)===UI}function Dh(n){const e=n.mapValue.fields[$I];return kh(e)?Dh(e):e}function gl(n){const e=Yr(n.mapValue.fields[zI].timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t,r,s,i,o,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const kd="(default)";class eo{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="__type__",qI="__max__",Ls={mapValue:{fields:{__type__:{stringValue:qI}}}},Tg="__vector__",Ca="value",sd={nullValue:"NULL_VALUE"};function Ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kh(n)?4:WI(n)?9007199254740991:Oh(n)?10:11:ue(28295,{value:n})}function Er(n,e){if(n===e)return!0;const t=Ys(n);if(t!==Ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gl(n).isEqual(gl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),a=Yr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return Zr(s.bytesValue).isEqual(Zr(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),a=dt(i.doubleValue);return o===a?hl(o)===hl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ea(n.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(fw(o)!==fw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Er(o[c],a[c])))return!1;return!0}(n,e);default:return ue(52216,{left:n})}}function yl(n,e){return(n.values||[]).find(t=>Er(t,e))!==void 0}function Zs(n,e){if(n===e)return 0;const t=Ys(n),r=Ys(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=dt(i.integerValue||i.doubleValue),c=dt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return mw(n.timestampValue,e.timestampValue);case 4:return mw(gl(n),gl(e));case 5:return Qp(n.stringValue,e.stringValue);case 6:return function(i,o){const a=Zr(i),c=Zr(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=be(a[u],c[u]);if(h!==0)return h}return be(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=be(dt(i.latitude),dt(o.latitude));return a!==0?a:be(dt(i.longitude),dt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return gw(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},m=o.fields||{},v=(a=f[Ca])===null||a===void 0?void 0:a.arrayValue,x=(c=m[Ca])===null||c===void 0?void 0:c.arrayValue,y=be(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return y!==0?y:gw(v,x)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ls.mapValue&&o===Ls.mapValue)return 0;if(i===Ls.mapValue)return 1;if(o===Ls.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Qp(c[f],h[f]);if(m!==0)return m;const v=Zs(a[c[f]],u[h[f]]);if(v!==0)return v}return be(c.length,h.length)}(n.mapValue,e.mapValue);default:throw ue(23264,{le:t})}}function mw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=Yr(n),r=Yr(e),s=be(t.seconds,r.seconds);return s!==0?s:be(t.nanos,r.nanos)}function gw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Zs(t[s],r[s]);if(i)return i}return be(t.length,r.length)}function Pa(n){return tm(n)}function tm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Zr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=tm(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${tm(t.fields[o])}`;return s+"}"}(n.mapValue):ue(61005,{value:n})}function id(n){switch(Ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dh(n);return e?16+id(e):16;case 5:return 2*n.stringValue.length;case 6:return Zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+id(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return di(r.fields,(i,o)=>{s+=i.length+id(o)}),s}(n.mapValue);default:throw ue(13486,{value:n})}}function to(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nm(n){return!!n&&"integerValue"in n}function vl(n){return!!n&&"arrayValue"in n}function yw(n){return!!n&&"nullValue"in n}function vw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function od(n){return!!n&&"mapValue"in n}function Oh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ig])===null||t===void 0?void 0:t.stringValue)===Tg}function Qc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return di(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qI}const KI={mapValue:{fields:{[Ig]:{stringValue:Tg},[Ca]:{arrayValue:{}}}}};function uV(n){return"nullValue"in n?sd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?to(eo.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Oh(n)?KI:{mapValue:{}}:ue(35942,{value:n})}function dV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?to(eo.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?KI:"mapValue"in n?Oh(n)?{mapValue:{}}:Ls:ue(61959,{value:n})}function _w(n,e){const t=Zs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ww(n,e){const t=Zs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(t)}setAll(e){let t=ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=Qc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];od(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){di(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Gt(Qc(this.value))}}function HI(n){const e=[];return di(n.fields,(t,r)=>{const s=new ht([t]);if(od(r)){const i=HI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new yt(e,0,ve.min(),ve.min(),ve.min(),Gt.empty(),0)}static newFoundDocument(e,t,r,s){return new yt(e,1,t,ve.min(),r,s,0)}static newNoDocument(e,t){return new yt(e,2,t,ve.min(),ve.min(),Gt.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,ve.min(),ve.min(),Gt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){this.position=e,this.inclusive=t}}function bw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=Zs(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Er(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t="asc"){this.field=e,this.dir=t}}function hV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{}class Le extends GI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new fV(e,t,r):t==="array-contains"?new gV(e,r):t==="in"?new eT(e,r):t==="not-in"?new yV(e,r):t==="array-contains-any"?new vV(e,r):new Le(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new pV(e,r):new mV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zs(t,this.value)):t!==null&&Ys(this.value)===Ys(t)&&this.matchesComparison(Zs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends GI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Je(e,t)}matches(e){return Na(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Na(n){return n.op==="and"}function rm(n){return n.op==="or"}function Sg(n){return QI(n)&&Na(n)}function QI(n){for(const e of n.filters)if(e instanceof Je)return!1;return!0}function sm(n){if(n instanceof Le)return n.field.canonicalString()+n.op.toString()+Pa(n.value);if(Sg(n))return n.filters.map(e=>sm(e)).join(",");{const e=n.filters.map(t=>sm(t)).join(",");return`${n.op}(${e})`}}function XI(n,e){return n instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&Er(r.value,s.value)}(n,e):n instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&XI(o,s.filters[a]),!0):!1}(n,e):void ue(19439)}function YI(n,e){const t=n.filters.concat(e);return Je.create(t,n.op)}function ZI(n){return n instanceof Le?function(t){return`${t.field.canonicalString()} ${t.op} ${Pa(t.value)}`}(n):n instanceof Je?function(t){return t.op.toString()+" {"+t.getFilters().map(ZI).join(" ,")+"}"}(n):"Filter"}class fV extends Le{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class pV extends Le{constructor(e,t){super(e,"in",t),this.keys=JI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mV extends Le{constructor(e,t){super(e,"not-in",t),this.keys=JI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function JI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}class gV extends Le{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vl(t)&&yl(t.arrayValue,this.value)}}class eT extends Le{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yl(this.value.arrayValue,t)}}class yV extends Le{constructor(e,t){super(e,"not-in",t)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yl(this.value.arrayValue,t)}}class vV extends Le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Pe=null}}function im(n,e=null,t=[],r=[],s=null,i=null,o=null){return new _V(n,e,t,r,s,i,o)}function no(n){const e=fe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pa(r)).join(",")),e.Pe=t}return e.Pe}function ql(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xw(n.startAt,e.startAt)&&xw(n.endAt,e.endAt)}function Dd(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Od(n,e){return n.filters.filter(t=>t instanceof Le&&t.field.isEqual(e))}function Ew(n,e,t){let r=sd,s=!0;for(const i of Od(n,e)){let o=sd,a=!0;switch(i.op){case"<":case"<=":o=uV(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=sd}_w({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];_w({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function Iw(n,e,t){let r=Ls,s=!0;for(const i of Od(n,e)){let o=Ls,a=!0;switch(i.op){case">=":case">":o=dV(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ls}ww({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];ww({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function tT(n,e,t,r,s,i,o,a){return new xo(n,e,t,r,s,i,o,a)}function Wl(n){return new xo(n)}function Tw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ag(n){return n.collectionGroup!==null}function ta(n){const e=fe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(ht.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Te.push(new _l(i,r))}),t.has(ht.keyField().canonicalString())||e.Te.push(new _l(ht.keyField(),r))}return e.Te}function Tn(n){const e=fe(n);return e.Ie||(e.Ie=wV(e,ta(n))),e.Ie}function wV(n,e){if(n.limitType==="F")return im(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new _l(s.field,i)});const t=n.endAt?new Js(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Js(n.startAt.position,n.startAt.inclusive):null;return im(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function om(n,e){const t=n.filters.concat([e]);return new xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vd(n,e,t){return new xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vh(n,e){return ql(Tn(n),Tn(e))&&n.limitType===e.limitType}function nT(n){return`${no(Tn(n))}|lt:${n.limitType}`}function Ho(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>ZI(s)).join(", ")}]`),Rh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Pa(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Pa(s)).join(",")),`Target(${r})`}(Tn(n))}; limitType=${n.limitType})`}function Kl(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of ta(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=bw(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ta(r),s)||r.endAt&&!function(o,a,c){const u=bw(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ta(r),s))}(n,e)}function rT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sT(n){return(e,t)=>{let r=!1;for(const s of ta(n)){const i=bV(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bV(n,e,t){const r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Zs(c,u):ue(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=new at(ee.comparator);function xn(){return xV}const iT=new at(ee.comparator);function Mc(...n){let e=iT;for(const t of n)e=e.insert(t.key,t);return e}function oT(n){let e=iT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hr(){return Xc()}function aT(){return Xc()}function Xc(){return new is(n=>n.toString(),(n,e)=>n.isEqual(e))}const EV=new at(ee.comparator),IV=new et(ee.comparator);function Ne(...n){let e=IV;for(const t of n)e=e.add(t);return e}const TV=new et(be);function Rg(){return TV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hl(e)?"-0":e}}function cT(n){return{integerValue:""+n}}function lT(n,e){return AI(e)?cT(e):Cg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function SV(n,e,t){return n instanceof ka?function(s,i){const o={fields:{[BI]:{stringValue:UI},[zI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&kh(i)&&(i=Dh(i)),i&&(o.fields[$I]=i),{mapValue:o}}(t,e):n instanceof ro?dT(n,e):n instanceof so?hT(n,e):function(s,i){const o=uT(s,i),a=Sw(o)+Sw(s.Ee);return nm(o)&&nm(s.Ee)?cT(a):Cg(s.serializer,a)}(n,e)}function AV(n,e,t){return n instanceof ro?dT(n,e):n instanceof so?hT(n,e):t}function uT(n,e){return n instanceof Da?function(r){return nm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ka extends Mh{}class ro extends Mh{constructor(e){super(),this.elements=e}}function dT(n,e){const t=fT(e);for(const r of n.elements)t.some(s=>Er(s,r))||t.push(r);return{arrayValue:{values:t}}}class so extends Mh{constructor(e){super(),this.elements=e}}function hT(n,e){let t=fT(e);for(const r of n.elements)t=t.filter(s=>!Er(s,r));return{arrayValue:{values:t}}}class Da extends Mh{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Sw(n){return dt(n.integerValue||n.doubleValue)}function fT(n){return vl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t){this.field=e,this.transform=t}}function RV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof ro&&s instanceof ro||r instanceof so&&s instanceof so?Ea(r.elements,s.elements,Er):r instanceof Da&&s instanceof Da?Er(r.Ee,s.Ee):r instanceof ka&&s instanceof ka}(n.transform,e.transform)}class CV{constructor(e,t){this.version=e,this.transformResults=t}}class Lt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jh{}function pT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gl(n.key,Lt.none()):new Ya(n.key,n.data,Lt.none());{const t=n.data,r=Gt.empty();let s=new et(ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new os(n.key,r,new hn(s.toArray()),Lt.none())}}function PV(n,e,t){n instanceof Ya?function(s,i,o){const a=s.value.clone(),c=Rw(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof os?function(s,i,o){if(!ad(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Rw(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(mT(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Yc(n,e,t,r){return n instanceof Ya?function(i,o,a,c){if(!ad(i.precondition,o))return a;const u=i.value.clone(),h=Cw(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof os?function(i,o,a,c){if(!ad(i.precondition,o))return a;const u=Cw(i.fieldTransforms,c,o),h=o.data;return h.setAll(mT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(i,o,a){return ad(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function NV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=uT(r.transform,s||null);i!=null&&(t===null&&(t=Gt.empty()),t.set(r.field,i))}return t||null}function Aw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ea(r,s,(i,o)=>RV(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ya extends jh{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends jh{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Rw(n,e,t){const r=new Map;ge(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,AV(o,a,t[s]))}return r}function Cw(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,SV(i,o,e))}return r}class Gl extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gT extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PV(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const c=pT(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(t,r)=>Aw(t,r))&&Ea(this.baseMutations,e.baseMutations,(t,r)=>Aw(t,r))}}class Ng{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return EV}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ng(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kg=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,$e;function DV(n){switch(n){case B.OK:return ue(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ue(15467,{code:n})}}function yT(n){if(n===void 0)return bt("GRPC error has no .code"),B.UNKNOWN;switch(n){case It.OK:return B.OK;case It.CANCELLED:return B.CANCELLED;case It.UNKNOWN:return B.UNKNOWN;case It.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case It.INTERNAL:return B.INTERNAL;case It.UNAVAILABLE:return B.UNAVAILABLE;case It.UNAUTHENTICATED:return B.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case It.NOT_FOUND:return B.NOT_FOUND;case It.ALREADY_EXISTS:return B.ALREADY_EXISTS;case It.PERMISSION_DENIED:return B.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case It.ABORTED:return B.ABORTED;case It.OUT_OF_RANGE:return B.OUT_OF_RANGE;case It.UNIMPLEMENTED:return B.UNIMPLEMENTED;case It.DATA_LOSS:return B.DATA_LOSS;default:return ue(39323,{code:n})}}($e=It||(It={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new qs([4294967295,4294967295],0);function Pw(n){const e=vI().encode(n),t=new dI;return t.update(e),new Uint8Array(t.digest())}function Nw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qs([t,r],0),new qs([s,i],0)]}class Dg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new jc(`Invalid padding: ${t}`);if(r<0)throw new jc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new jc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=qs.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(qs.fromNumber(r)));return s.compare(OV)===1&&(s=new qs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Pw(e),[r,s]=Nw(t);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);if(!this.ye(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Dg(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const t=Pw(e),[r,s]=Nw(t);for(let i=0;i<this.hashCount;i++){const o=this.pe(r,s,i);this.we(o)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ql(ve.min(),s,new at(be),xn(),Ne())}}class Xl{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xl(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class vT{constructor(e,t){this.targetId=e,this.De=t}}class _T{constructor(e,t,r=xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class kw{constructor(){this.ve=0,this.Ce=Dw(),this.Fe=xt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),t=Ne(),r=Ne();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}}),new Xl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Dw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class VV{constructor(e){this.We=e,this.Ge=new Map,this.ze=xn(),this.je=Lu(),this.Je=Lu(),this.He=new at(be)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const i=s.target;if(Dd(i))if(r===0){const o=new ee(i.path);this.Xe(t,o,yt.newNoDocument(o,ve.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this.ot(t);if(o!==r){const a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=Zr(r).toUint8Array()}catch(c){if(c instanceof FI)return Xs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dg(o,s,i)}catch(c){return Xs(c instanceof jc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,i,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((i,o)=>{const a=this.st(o);if(a){if(i.current&&Dd(a.target)){const c=new ee(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,yt.newNoDocument(c,e))}i.Ne&&(t.set(o,i.Le()),i.ke())}});let r=Ne();this.Je.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ze.forEach((i,o)=>o.setReadTime(e));const s=new Ql(e,t,this.He,this.ze,r);return this.ze=xn(),this.je=Lu(),this.Je=Lu(),this.He=new at(be),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new kw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new et(be),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new et(be),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kw),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Lu(){return new at(ee.comparator)}function Dw(){return new at(ee.comparator)}const MV={asc:"ASCENDING",desc:"DESCENDING"},jV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LV={and:"AND",or:"OR"};class FV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function am(n,e){return n.useProto3Json||Rh(e)?e:{value:e}}function Oa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UV(n,e){return Oa(n,e.toTimestamp())}function rn(n){return ge(!!n,49232),ve.fromTimestamp(function(t){const r=Yr(t);return new Ze(r.seconds,r.nanos)}(n))}function Og(n,e){return cm(n,e).canonicalString()}function cm(n,e){const t=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function bT(n){const e=Ke.fromString(n);return ge(PT(e),10190,{key:e.toString()}),e}function Md(n,e){return Og(n.databaseId,e.path)}function Ki(n,e){const t=bT(e);if(t.get(1)!==n.databaseId.projectId)throw new H(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(IT(t))}function xT(n,e){return Og(n.databaseId,e)}function ET(n){const e=bT(n);return e.length===4?Ke.emptyPath():IT(e)}function lm(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IT(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ow(n,e,t){return{name:Md(n,e),fields:t.value.mapValue.fields}}function BV(n,e,t){const r=Ki(n,e.name),s=rn(e.updateTime),i=e.createTime?rn(e.createTime):ve.min(),o=new Gt({mapValue:{fields:e.fields}}),a=yt.newFoundDocument(r,s,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function $V(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ge(h===void 0||typeof h=="string",58123),xt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),xt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?B.UNKNOWN:yT(u.code);return new H(h,u.message||"")}(o);t=new _T(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ki(n,r.document.name),i=rn(r.document.updateTime),o=r.document.createTime?rn(r.document.createTime):ve.min(),a=new Gt({mapValue:{fields:r.document.fields}}),c=yt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new cd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ki(n,r.document),i=r.readTime?rn(r.readTime):ve.min(),o=yt.newNoDocument(s,i),a=r.removedTargetIds||[];t=new cd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ki(n,r.document),i=r.removedTargetIds||[];t=new cd([],i,s,null)}else{if(!("filter"in e))return ue(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new kV(s,i),a=r.targetId;t=new vT(a,o)}}return t}function jd(n,e){let t;if(e instanceof Ya)t={update:Ow(n,e.key,e.value)};else if(e instanceof Gl)t={delete:Md(n,e.key)};else if(e instanceof os)t={update:Ow(n,e.key,e.data),updateMask:GV(e.fieldMask)};else{if(!(e instanceof gT))return ue(16599,{Rt:e.type});t={verify:Md(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ka)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof so)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:UV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(n,e.precondition)),t}function um(n,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?Lt.updateTime(rn(i.updateTime)):i.exists!==void 0?Lt.exists(i.exists):Lt.none()}(e.currentDocument):Lt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)ge(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new ka;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new ro(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new so(h)}else"increment"in a?c=new Da(o,a.increment):ue(16584,{proto:a});const u=ht.fromServerFormat(a.fieldPath);return new Hl(u,c)}(n,s)):[];if(e.update){e.update.name;const s=Ki(n,e.update.name),i=new Gt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new hn(u.map(h=>ht.fromServerFormat(h)))}(e.updateMask);return new os(s,i,o,t,r)}return new Ya(s,i,t,r)}if(e.delete){const s=Ki(n,e.delete);return new Gl(s,t)}if(e.verify){const s=Ki(n,e.verify);return new gT(s,t)}return ue(1463,{proto:e})}function zV(n,e){return n&&n.length>0?(ge(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?rn(s.updateTime):rn(i);return o.isEqual(ve.min())&&(o=rn(i)),new CV(o,s.transformResults||[])}(t,e))):[]}function TT(n,e){return{documents:[xT(n,e.path)]}}function ST(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xT(n,s);const i=function(u){if(u.length!==0)return CT(Je.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Go(m.field),direction:WV(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=am(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:t,parent:s}}function AT(n){let e=ET(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ge(r===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(f){const m=RT(f);return m instanceof Je&&Sg(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(x){return new _l(Qo(x.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Rh(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){const m=!!f.before,v=f.values||[];return new Js(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new Js(v,m)}(t.endAt)),tT(e,s,o,i,a,"F",c,u)}function qV(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qo(t.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Qo(t.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qo(t.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qo(t.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(n):n.fieldFilter!==void 0?function(t){return Le.create(Qo(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Je.create(t.compositeFilter.filters.map(r=>RT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(t.compositeFilter.op))}(n):ue(30097,{filter:n})}function WV(n){return MV[n]}function KV(n){return jV[n]}function HV(n){return LV[n]}function Go(n){return{fieldPath:n.canonicalString()}}function Qo(n){return ht.fromServerFormat(n.fieldPath)}function CT(n){return n instanceof Le?function(t){if(t.op==="=="){if(vw(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NAN"}};if(yw(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vw(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NAN"}};if(yw(t.value))return{unaryFilter:{field:Go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Go(t.field),op:KV(t.op),value:t.value}}}(n):n instanceof Je?function(t){const r=t.getFilters().map(s=>CT(s));return r.length===1?r[0]:{compositeFilter:{op:HV(t.op),filters:r}}}(n):ue(54877,{filter:n})}function GV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t,r,s,i=ve.min(),o=ve.min(),a=xt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.gt=e}}function QV(n,e){let t;if(e.document)t=BV(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),s=oo(e.noDocument.readTime);t=yt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue(56709);{const r=ee.fromSegments(e.unknownDocument.path),s=oo(e.unknownDocument.version);t=yt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const i=new Ze(s[0],s[1]);return ve.fromTimestamp(i)}(e.readTime)),t}function Vw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ld(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Md(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Oa(i,o.version.toTimestamp()),createTime:Oa(i,o.createTime.toTimestamp())}}(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:io(e.version)};else{if(!e.isUnknownDocument())return ue(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:io(e.version)}}return r}function Ld(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function io(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oo(n){const e=new Ze(n.seconds,n.nanoseconds);return ve.fromTimestamp(e)}function Ri(n,e){const t=(e.baseMutations||[]).map(i=>um(n.gt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>um(n.gt,i)),s=Ze.fromMillis(e.localWriteTimeMs);return new Pg(e.batchId,s,t,r)}function Lc(n){const e=oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?oo(n.lastLimboFreeSnapshotVersion):ve.min();let r;return r=function(i){return i.documents!==void 0}(n.query)?function(i){const o=i.documents.length;return ge(o===1,1966,{count:o}),Tn(Wl(ET(i.documents[0])))}(n.query):function(i){return Tn(AT(i))}(n.query),new Br(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,xt.fromBase64String(n.resumeToken))}function kT(n,e){const t=io(e.snapshotVersion),r=io(e.lastLimboFreeSnapshotVersion);let s;s=Dd(e.target)?TT(n.gt,e.target):ST(n.gt,e.target).Vt;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:no(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function DT(n){const e=AT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vd(e,e.limit,"L"):e}function Hf(n,e){return new kg(e.largestBatchId,um(n.gt,e.overlayMutation))}function Mw(n,e){const t=e.path.lastSegment();return[n,Qt(e.path.popLast()),t]}function jw(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:io(r.readTime),documentKey:Qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{getBundleMetadata(e,t){return Lw(e).get(t).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:oo(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,t){return Lw(e).put(function(s){return{bundleId:s.id,createTime:io(rn(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return Fw(e).get(t).next(r=>{if(r)return function(i){return{name:i.name,query:DT(i.bundledQuery),readTime:oo(i.readTime)}}(r)})}saveNamedQuery(e,t){return Fw(e).put(function(s){return{name:s.name,readTime:io(rn(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function Lw(n){return Ot(n,Ch)}function Fw(n){return Ot(n,Ph)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new Lh(e,r)}getOverlay(e,t){return xc(e).get(Mw(this.userId,t)).next(r=>r?Hf(this.serializer,r):null)}getOverlays(e,t){const r=hr();return L.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((i,o)=>{const a=new kg(t,o);s.push(this.wt(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(o=>s.add(Qt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(xc(e).Y(Jp,a))}),L.waitFor(i)}getOverlaysForCollection(e,t,r){const s=hr(),i=Qt(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return xc(e).j(Jp,o).next(a=>{for(const c of a){const u=Hf(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const i=hr();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xc(e).X({index:DI,range:a},(c,u,h)=>{const f=Hf(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>i)}wt(e,t){return xc(e).put(function(s,i,o){const[a,c,u]=Mw(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:jd(s.gt,o.mutation)}}(this.serializer,this.userId,t))}}function xc(n){return Ot(n,Nh)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{St(e){return Ot(e,xg)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?xt.fromUint8Array(r):xt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(dt(e.integerValue));else if("doubleValue"in e){const r=dt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),hl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Yr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Zr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?WI(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Oh(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ue(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const s of Object.keys(r))this.xt(s,t),this.Dt(r[s],t)}Lt(e,t){var r,s;const i=e.fields||{};this.Ct(t,53);const o=Ca,a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(dt(a)),this.xt(o,t),this.Dt(i[o],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const s of r)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),ee.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Ci.Ut=new Ci;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=255;function ZV(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function Uw(n){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=ZV(255&r[i]);if(s+=o,o!==8)break}return s}(n);return Math.ceil(e/8)}class JV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const s=t.codePointAt(0);this.Wt(240|s>>>18),this.Wt(128|63&s>>>12),this.Wt(128|63&s>>>6),this.Wt(128|63&s)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const s=t.codePointAt(0);this.jt(240|s>>>18),this.jt(128|63&s>>>12),this.jt(128|63&s>>>6),this.jt(128|63&s)}}this.Jt()}Zt(e){const t=this.Xt(e),r=Uw(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}tn(e){const t=this.Xt(e),r=Uw(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}nn(){this.rn(Lo),this.rn(255)}sn(){this._n(Lo),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===Lo?(this.rn(Lo),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Lo?(this._n(Lo),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class eM{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class tM{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Ec{constructor(){this.un=new JV,this.cn=new eM(this.un),this.ln=new tM(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,r,s){this.Pn=e,this.Tn=t,this.In=r,this.dn=s}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Pi(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:ld(this.In),directionalValue:ld(this.dn),orderedDocumentKey:ld(t),documentKey:r.path.toArray()}}Rn(e,t,r){const s=this.An(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function fs(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=Bw(n.In,e.In),t!==0?t:(t=Bw(n.dn,e.dn),t!==0?t:ee.comparator(n.Tn,e.Tn)))}function Bw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function ld(n){return sI()?function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r}(n):n}function $w(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(n)}class zw{constructor(e){this.Vn=new et((t,r)=>ht.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(ge(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Xp(e);if(t!==void 0&&!this.yn(t))return!1;const r=Ii(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.yn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.wn(a,c)||!this.Sn(this.mn[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.mn.length||!this.Sn(this.mn[o++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new et(ht.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new td(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new td(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new td(r.field,r.dir==="asc"?0:1)));return new Rd(Rd.UNKNOWN_ID,this.collectionId,t,dl.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n){var e,t;if(ge(n instanceof Le||n instanceof Je,20012),n instanceof Le){if(n instanceof eT){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(i=>Le.create(n.field,"==",i)))||[];return Je.create(s,"or")}return n}const r=n.filters.map(s=>OT(s));return Je.create(r,n.op)}function nM(n){if(n.getFilters().length===0)return[];const e=fm(OT(n));return ge(VT(e),7391),dm(e)||hm(e)?[e]:e.getFilters()}function dm(n){return n instanceof Le}function hm(n){return n instanceof Je&&Sg(n)}function VT(n){return dm(n)||hm(n)||function(t){if(t instanceof Je&&rm(t)){for(const r of t.getFilters())if(!dm(r)&&!hm(r))return!1;return!0}return!1}(n)}function fm(n){if(ge(n instanceof Le||n instanceof Je,34018),n instanceof Le)return n;if(n.filters.length===1)return fm(n.filters[0]);const e=n.filters.map(r=>fm(r));let t=Je.create(e,n.op);return t=Fd(t),VT(t)?t:(ge(t instanceof Je,64498),ge(Na(t),40251),ge(t.filters.length>1,57927),t.filters.reduce((r,s)=>Vg(r,s)))}function Vg(n,e){let t;return ge(n instanceof Le||n instanceof Je,38388),ge(e instanceof Le||e instanceof Je,25473),t=n instanceof Le?e instanceof Le?function(s,i){return Je.create([s,i],"and")}(n,e):qw(n,e):e instanceof Le?qw(e,n):function(s,i){if(ge(s.filters.length>0&&i.filters.length>0,48005),Na(s)&&Na(i))return YI(s,i.getFilters());const o=rm(s)?s:i,a=rm(s)?i:s,c=o.filters.map(u=>Vg(u,a));return Je.create(c,"or")}(n,e),Fd(t)}function qw(n,e){if(Na(e))return YI(e,n.getFilters());{const t=e.filters.map(r=>Vg(n,r));return Je.create(t,"or")}}function Fd(n){if(ge(n instanceof Le||n instanceof Je,11850),n instanceof Le)return n;const e=n.getFilters();if(e.length===1)return Fd(e[0]);if(QI(n))return n;const t=e.map(s=>Fd(s)),r=[];return t.forEach(s=>{s instanceof Le?r.push(s):s instanceof Je&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Je.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.Dn=new Mg}addToCollectionParentIndex(e,t){return this.Dn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(An.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(An.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class Mg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new et(Ke.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="IndexedDbIndexManager",Fu=new Uint8Array(0);class sM{constructor(e,t){this.databaseId=t,this.vn=new Mg,this.Cn=new is(r=>no(r),(r,s)=>ql(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const i={collectionId:r,parent:Qt(s)};return Kw(e).put(i)}return L.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[_I(t),""],!1,!0);return Kw(e).j(s).next(i=>{for(const o of i){if(o.collectionId!==t)break;r.push(dr(o.parent))}return r})}addFieldIndex(e,t){const r=Ic(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=Uo(e);return i.next(a=>{o.put(jw(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const r=Ic(e),s=Uo(e),i=Fo(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ic(e),r=Fo(e),s=Uo(e);return t.Y().next(()=>r.Y()).next(()=>s.Y())}createTargetIndexes(e,t){return L.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new zw(r).bn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const r=Fo(e);let s=!0;const i=new Map;return L.forEach(this.Fn(t),o=>this.Mn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Ne();const a=[];return L.forEach(i,(c,u)=>{W(Ww,`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(c)} to execute ${no(t)}`);const h=function(S,P){const N=Xp(P);if(N===void 0)return null;for(const j of Od(S,N.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(u,c),f=function(S,P){const N=new Map;for(const j of Ii(P))for(const T of Od(S,j.fieldPath))switch(T.op){case"==":case"in":N.set(j.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return N.set(j.fieldPath.canonicalString(),T.value),Array.from(N.values())}return null}(u,c),m=function(S,P){const N=[];let j=!0;for(const T of Ii(P)){const E=T.kind===0?Ew(S,T.fieldPath,S.startAt):Iw(S,T.fieldPath,S.startAt);N.push(E.value),j&&(j=E.inclusive)}return new Js(N,j)}(u,c),v=function(S,P){const N=[];let j=!0;for(const T of Ii(P)){const E=T.kind===0?Iw(S,T.fieldPath,S.endAt):Ew(S,T.fieldPath,S.endAt);N.push(E.value),j&&(j=E.inclusive)}return new Js(N,j)}(u,c),x=this.xn(c,u,m),y=this.xn(c,u,v),_=this.On(c,u,f),I=this.Nn(c.indexId,h,x,m.inclusive,y,v.inclusive,_);return L.forEach(I,b=>r.H(b,t.limit).next(S=>{S.forEach(P=>{const N=ee.fromSegments(P.documentKey);o.has(N)||(o=o.add(N),a.push(N))})}))}).next(()=>a)}return L.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=nM(Je.create(e.filters,"and")).map(r=>im(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,s,i,o,a){const c=(t!=null?t.length:1)*Math.max(r.length,i.length),u=c/(t!=null?t.length:1),h=[];for(let f=0;f<c;++f){const m=t?this.Bn(t[f/u]):Fu,v=this.Ln(e,m,r[f%u],s),x=this.kn(e,m,i[f%u],o),y=a.map(_=>this.Ln(e,m,_,!0));h.push(...this.createRange(v,x,y))}return h}Ln(e,t,r,s){const i=new Pi(e,ee.empty(),t,r);return s?i:i.En()}kn(e,t,r,s){const i=new Pi(e,ee.empty(),t,r);return s?i.En():i}Mn(e,t){const r=new zw(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.pn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const s=this.Fn(t);return L.forEach(s,i=>this.Mn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new et(ht.comparator),h=!1;for(const f of c.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&s.length>1&&r===2?1:r)}qn(e,t){const r=new Ec;for(const s of Ii(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.hn(s.kind);Ci.Ut.bt(i,o)}return r.an()}Bn(e){const t=new Ec;return Ci.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Ec;return Ci.Ut.bt(to(this.databaseId,t),r.hn(function(i){const o=Ii(i);return o.length===0?0:o[o.length-1].kind}(e))),r.an()}On(e,t,r){if(r===null)return[];let s=[];s.push(new Ec);let i=0;for(const o of Ii(e)){const a=r[i++];for(const c of s)if(this.$n(t,o.fieldPath)&&vl(a))s=this.Un(s,o,a);else{const u=c.hn(o.kind);Ci.Ut.bt(a,u)}}return this.Kn(s)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new Ec;c.seed(a.an()),Ci.Ut.bt(o,c.hn(t.kind)),i.push(c)}return i}$n(e,t){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ic(e),s=Uo(e);return(t?r.j(Zp,IDBKeyRange.bound(t,t)):r.j()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(h,f){const m=f?new dl(f.sequenceNumber,new An(oo(f.readTime),new ee(dr(f.documentKey)),f.largestBatchId)):dl.empty(),v=h.fields.map(([x,y])=>new td(ht.fromServerFormat(x),y));return new Rd(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:be(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Ic(e),i=Uo(e);return this.Wn(e).next(o=>s.j(Zp,IDBKeyRange.bound(t,t)).next(a=>L.forEach(a,c=>i.put(jw(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return L.forEach(t,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,c=>this.Gn(e,s,c).next(u=>{const h=this.zn(i,c);return u.isEqual(h)?L.resolve():this.jn(e,i,c,u,h)}))))})}Jn(e,t,r,s){return Fo(e).put(s.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,s){return Fo(e).delete(s.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const s=Fo(e);let i=new et(fs);return s.X({index:kI,range:IDBKeyRange.only([r.indexId,this.uid,ld(this.Qn(r,t))])},(o,a)=>{i=i.add(new Pi(r.indexId,t,$w(a.arrayValue),$w(a.directionalValue)))}).next(()=>i)}zn(e,t){let r=new et(fs);const s=this.qn(t,e);if(s==null)return r;const i=Xp(t);if(i!=null){const o=e.data.field(i.fieldPath);if(vl(o))for(const a of o.arrayValue.values||[])r=r.add(new Pi(t.indexId,e.key,this.Bn(a),s))}else r=r.add(new Pi(t.indexId,e.key,Fu,s));return r}jn(e,t,r,s,i){W(Ww,"Updating index entries for document '%s'",t.key);const o=[];return function(c,u,h,f,m){const v=c.getIterator(),x=u.getIterator();let y=jo(v),_=jo(x);for(;y||_;){let I=!1,b=!1;if(y&&_){const S=h(y,_);S<0?b=!0:S>0&&(I=!0)}else y!=null?b=!0:I=!0;I?(f(_),_=jo(x)):b?(m(y),y=jo(v)):(y=jo(v),_=jo(x))}}(s,i,fs,a=>{o.push(this.Jn(e,t,r,a))},a=>{o.push(this.Hn(e,t,r,a))}),L.waitFor(o)}Wn(e){let t=1;return Uo(e).X({index:NI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>fs(o,a)).filter((o,a,c)=>!a||fs(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=fs(o,e),c=fs(o,t);if(a===0)s[0]=e.En();else if(a>0&&c<0)s.push(o),s.push(o.En());else if(c>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Yn(s[o],s[o+1]))return[];const a=s[o].Rn(this.uid,Fu,ee.empty()),c=s[o+1].Rn(this.uid,Fu,ee.empty());i.push(IDBKeyRange.bound(a,c))}return i}Yn(e,t){return fs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Hw)}getMinOffset(e,t){return L.mapArray(this.Fn(t),r=>this.Mn(e,r).next(s=>s||ue(44426))).next(Hw)}}function Kw(n){return Ot(n,ml)}function Fo(n){return Ot(n,Gc)}function Ic(n){return Ot(n,bg)}function Uo(n){return Ot(n,Hc)}function Hw(n){ge(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;vg(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new An(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MT=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(n,e,t){const r=n.store(zn),s=n.store(Ta),i=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.X({range:o},(h,f,m)=>(a++,m.delete()));i.push(c.next(()=>{ge(a===1,47070,{batchId:t.batchId})}));const u=[];for(const h of t.mutations){const f=RI(e,h.key.path,t.batchId);i.push(s.delete(f)),u.push(h.key)}return L.waitFor(i).next(()=>u)}function Ud(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ue(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(MT,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);class Fh{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static yt(e,t,r,s){ge(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Fh(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).X({index:ki,range:r},(s,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const i=Xo(e),o=ps(e);return o.add({}).next(a=>{ge(typeof a=="number",49019);const c=new Pg(a,t,r,s),u=function(v,x,y){const _=y.baseMutations.map(b=>jd(v.gt,b)),I=y.mutations.map(b=>jd(v.gt,b));return{userId:x,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:_,mutations:I}}(this.serializer,this.userId,c),h=[];let f=new et((m,v)=>be(m.canonicalString(),v.canonicalString()));for(const m of s){const v=RI(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(v,LO))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),L.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return ps(e).get(t).next(r=>r?(ge(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ri(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?L.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Zn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ps(e).X({index:ki,range:s},(o,a,c)=>{a.userId===this.userId&&(ge(a.batchId>=r,47524,{er:r}),i=Ri(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=qi;return ps(e).X({index:ki,range:t,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,qi],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).j(ki,t).next(r=>r.map(s=>Ri(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nd(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return Xo(e).X({range:s},(o,a,c)=>{const[u,h,f]=o,m=dr(h);if(u===this.userId&&t.path.isEqual(m))return ps(e).get(f).next(v=>{if(!v)throw ue(61480,{tr:o,batchId:f});ge(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:f}),i.push(Ri(this.serializer,v))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(be);const s=[];return t.forEach(i=>{const o=nd(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Xo(e).X({range:a},(u,h,f)=>{const[m,v,x]=u,y=dr(v);m===this.userId&&i.path.isEqual(y)?r=r.add(x):f.done()});s.push(c)}),L.waitFor(s).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=nd(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new et(be);return Xo(e).X({range:o},(c,u,h)=>{const[f,m,v]=c,x=dr(m);f===this.userId&&r.isPrefixOf(x)?x.length===s&&(a=a.add(v)):h.done()}).next(()=>this.nr(e,a))}nr(e,t){const r=[],s=[];return t.forEach(i=>{s.push(ps(e).get(i).next(o=>{if(o===null)throw ue(35274,{batchId:i});ge(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Ri(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return jT(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Xo(e).X({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=dr(i[1]);s.push(c)}else a.done()}).next(()=>{ge(s.length===0,56720,{ir:s.map(i=>i.canonicalString())})})})}containsKey(e,t){return LT(e,this.userId,t)}sr(e){return FT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:qi,lastStreamToken:""})}}function LT(n,e,t){const r=nd(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Xo(n).X({range:i,Z:!0},(a,c,u)=>{const[h,f,m]=a;h===e&&f===s&&(o=!0),u.done()}).next(()=>o)}function ps(n){return Ot(n,zn)}function Xo(n){return Ot(n,Ta)}function FT(n){return Ot(n,fl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ao(0)}static ur(){return new ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{const r=new ao(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>ve.fromTimestamp(new Ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.lr(e,s)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bo(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(ge(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let s=0;const i=[];return Bo(e).X((o,a)=>{const c=Lc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,t){return Bo(e).X((r,s)=>{const i=Lc(s);t(i)})}cr(e){return Qw(e).get(Nd).next(t=>(ge(t!==null,2888),t))}lr(e,t){return Qw(e).put(Nd,t)}hr(e,t){return Bo(e).put(kT(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=no(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Bo(e).X({range:s,index:PI},(o,a,c)=>{const u=Lc(a);ql(t,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,t,r){const s=[],i=xs(e);return t.forEach(o=>{const a=Qt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,t,r){const s=xs(e);return L.forEach(t,i=>{const o=Qt(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,t){const r=xs(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=xs(e);let i=Ne();return s.X({range:r,Z:!0},(o,a,c)=>{const u=dr(o[1]),h=new ee(u);i=i.add(h)}).next(()=>i)}containsKey(e,t){const r=Qt(t.path),s=IDBKeyRange.bound([r],[_I(r)],!1,!0);let i=0;return xs(e).X({index:wg,Z:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}Et(e,t){return Bo(e).get(t).next(r=>r?Lc(r):null)}}function Bo(n){return Ot(n,Sa)}function Qw(n){return Ot(n,Wi)}function xs(n){return Ot(n,Aa)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="LruGarbageCollector",UT=1048576;function Yw([n,e],[t,r]){const s=be(n,t);return s===0?be(e,r):s}class oM{constructor(e){this.Tr=e,this.buffer=new et(Yw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Yw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){W(Xw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ui(t)?W(Xw,"Ignoring IndexedDB error during garbage collection: ",t):await li(t)}await this.Rr(3e5)})}}class aM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(dn.ue);const r=new oM(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Gw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gw):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ko()<=je.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function $T(n,e){return new aM(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.db=e,this.garbageCollector=$T(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,s)=>t(s))}addReference(e,t,r){return Uu(e,r)}removeReference(e,t,r){return Uu(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Uu(e,t)}Sr(e,t){return function(s,i){let o=!1;return FT(s).ee(a=>LT(s,a,i).next(c=>(c&&(o=!0),L.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.wr(e,(o,a)=>{if(a<=t){const c=this.Sr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ve.min()),xs(e).delete(function(f){return[0,Qt(f.path)]}(o))))});s.push(c)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Uu(e,t)}wr(e,t){const r=xs(e);let s,i=dn.ue;return r.X({index:wg},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==dn.ue&&t(new ee(dr(s)),i),i=u,s=c):i=dn.ue}).next(()=>{i!==dn.ue&&t(new ee(dr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uu(n,e){return xs(n).put(function(r,s){return{targetId:0,path:Qt(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.changes=new is(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xi(e).put(r)}removeEntry(e,t,r){return xi(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ld(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=yt.newInvalidDocument(t);return xi(e).X({index:rd,range:IDBKeyRange.only(Tc(t))},(s,i)=>{r=this.Dr(t,i)}).next(()=>r)}vr(e,t){let r={size:0,document:yt.newInvalidDocument(t)};return xi(e).X({index:rd,range:IDBKeyRange.only(Tc(t))},(s,i)=>{r={document:this.Dr(t,i),size:Ud(i)}}).next(()=>r)}getEntries(e,t){let r=xn();return this.Cr(e,t,(s,i)=>{const o=this.Dr(s,i);r=r.insert(s,o)}).next(()=>r)}Fr(e,t){let r=xn(),s=new at(ee.comparator);return this.Cr(e,t,(i,o)=>{const a=this.Dr(i,o);r=r.insert(i,a),s=s.insert(i,Ud(o))}).next(()=>({documents:r,Mr:s}))}Cr(e,t,r){if(t.isEmpty())return L.resolve();let s=new et(eb);t.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(Tc(s.first()),Tc(s.last())),o=s.getIterator();let a=o.getNext();return xi(e).X({index:rd,range:i},(c,u,h)=>{const f=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&eb(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.G(Tc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Ld(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xi(e).j(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=xn();for(const f of u){const m=this.Dr(ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Kl(t,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,s){let i=xn();const o=Jw(t,r),a=Jw(t,An.max());return xi(e).X({index:CI,range:IDBKeyRange.bound(o,a,!0)},(c,u,h)=>{const f=this.Dr(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new uM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zw(e).get(Yp).next(t=>(ge(!!t,20021),t))}br(e,t){return Zw(e).put(Yp,t)}Dr(e,t){if(t){const r=QV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return yt.newInvalidDocument(e)}}function qT(n){return new lM(n)}class uM extends zT{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new is(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new et((i,o)=>be(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Nr.get(i);if(t.push(this.Or.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=Vw(this.Or.serializer,o);s=s.add(i.path.popLast());const u=Ud(c);r+=u-a.size,t.push(this.Or.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=Vw(this.Or.serializer,o.convertToNoDocument(ve.min()));t.push(this.Or.addEntry(e,i,c))}}),s.forEach(i=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Or.updateMetadata(e,r)),L.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:s})=>(s.forEach((i,o)=>{this.Nr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Zw(n){return Ot(n,pl)}function xi(n){return Ot(n,Pd)}function Tc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Jw(n,e){const t=e.documentKey.path.toArray();return[n,Ld(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function eb(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=be(t[i],r[i]),s)return s;return s=be(t.length,r.length),s||(s=be(t[t.length-2],r[r.length-2]),s||be(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Yc(r.mutation,s,hn.empty(),Ze.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ne()){const s=hr();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Mc();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=hr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ne()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=xn();const o=Xc(),a=function(){return Xc()}();return t.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof os)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Yc(h.mutation,u,h.mutation.getFieldMask(),Ze.now())):o.set(u.key,hn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return a.set(u,new dM(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Xc();let s=new at((o,a)=>o-a),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let h=r.get(c)||hn.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||Ne()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=aT();h.forEach(m=>{if(!i.has(m)){const v=pT(t.get(m),r.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ag(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):L.resolve(hr());let a=Ia,c=i;return o.next(u=>L.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ne())).next(h=>({batchId:a,changes:oT(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let s=Mc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Mc();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,c=>{const u=function(f,m){return new xo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,yt.newInvalidDocument(h)))});let a=Mc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Yc(h.mutation,u,hn.empty(),Ze.now()),Kl(t,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return L.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:rn(s.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:DT(s.bundledQuery),readTime:rn(s.readTime)}}(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.overlays=new at(ee.comparator),this.kr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=hr();return L.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.wt(e,t,i)}),L.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const s=hr(),i=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new at((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=hr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=hr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return L.resolve(a)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kg(t,r));let i=this.kr.get(t);i===void 0&&(i=Ne(),this.kr.set(t,i)),this.kr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.qr=new et(Mt.Qr),this.$r=new et(Mt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Mt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Mt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new ee(new Ke([])),r=new Mt(t,e),s=new Mt(t,e+1),i=[];return this.$r.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ee(new Ke([])),r=new Mt(t,e),s=new Mt(t,e+1);let i=Ne();return this.$r.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Mt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ee.comparator(e.key,t.key)||be(e.Hr,t.Hr)}static Ur(e,t){return be(e.Hr,t.Hr)||ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new et(Mt.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Pg(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.Yr=this.Yr.add(new Mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?qi:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mt(t,0),s=new Mt(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],o=>{const a=this.Zr(o.Hr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(be);return t.forEach(s=>{const i=new Mt(s,0),o=new Mt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,o],a=>{r=r.add(a.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Mt(new ee(i),0);let a=new et(be);return this.Yr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Hr)),!0)},o),L.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ge(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(t.mutations,s=>{const i=new Mt(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Mt(t,0),s=this.Yr.firstAfterOrEqual(r);return L.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.ni=e,this.docs=function(){return new at(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=xn();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=xn();const o=t.path,a=new ee(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vg(EI(h),r)<=0||(s.has(h.key)||Kl(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ue(9500)}ri(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yM(this)}getSize(e){return L.resolve(this.size)}}class yM extends zT{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.persistence=e,this.ii=new is(t=>no(t),ql),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.si=0,this.oi=new jg,this.targetCount=0,this._i=ao.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),L.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ao(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.hr(t),L.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){this.ai={},this.overlays={},this.ui=new dn(0),this.ci=!1,this.ci=!0,this.li=new pM,this.referenceDelegate=e(this),this.hi=new vM(this),this.indexManager=new rM,this.remoteDocumentCache=function(s){return new gM(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new NT(t),this.Ti=new hM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new mM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);const s=new _M(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,t){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class _M extends TI{constructor(e){super(),this.currentSequenceNumber=e}}class Uh{constructor(e){this.persistence=e,this.Ai=new jg,this.Ri=null}static Vi(e){return new Uh(e)}get mi(){if(this.Ri)return this.Ri;throw ue(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const s=ee.fromPath(r);return this.fi(e,s).next(i=>{i||t.removeEntry(s,ve.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return L.or([()=>L.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.gi=new is(r=>Qt(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=$T(this,t)}static Vi(e,t){return new Bd(e,t)}Ii(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return L.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(i=>i?L.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,i.removeEntry(o,ve.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),L.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=id(e.data.value)),t}Sr(e,t,r){return L.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.serializer=e}q(e,t,r,s){const i=new Ah("createOrUpgrade",t);r<1&&s>=1&&(function(c){c.createObjectStore(zl)}(e),function(c){c.createObjectStore(fl,{keyPath:jO}),c.createObjectStore(zn,{keyPath:dw,autoIncrement:!0}).createIndex(ki,hw,{unique:!0}),c.createObjectStore(Ta)}(e),tb(e),function(c){c.createObjectStore(Ti)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore(Aa),c.deleteObjectStore(Sa),c.deleteObjectStore(Wi)}(e),tb(e)),o=o.next(()=>function(c){const u=c.store(Wi),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return u.put(Nd,h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store(zn).j().next(f=>{c.deleteObjectStore(zn),c.createObjectStore(zn,{keyPath:dw,autoIncrement:!0}).createIndex(ki,hw,{unique:!0});const m=u.store(zn),v=f.map(x=>m.put(x));return L.waitFor(v)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore(Ra,{keyPath:KO})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.pi(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore(pl)}(e),this.yi(i)))),r<7&&s>=7&&(o=o.next(()=>this.wi(i))),r<8&&s>=8&&(o=o.next(()=>this.Si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.bi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Ch,{keyPath:HO})})(e),function(c){c.createObjectStore(Ph,{keyPath:GO})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(Nh,{keyPath:tV});u.createIndex(Jp,nV,{unique:!1}),u.createIndex(DI,rV,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(Pd,{keyPath:FO});u.createIndex(rd,UO),u.createIndex(CI,BO)}(e)).next(()=>this.Di(e,i)).next(()=>e.deleteObjectStore(Ti))),r<14&&s>=14&&(o=o.next(()=>this.Ci(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore(bg,{keyPath:QO,autoIncrement:!0}).createIndex(Zp,XO,{unique:!1}),c.createObjectStore(Hc,{keyPath:YO}).createIndex(NI,ZO,{unique:!1}),c.createObjectStore(Gc,{keyPath:JO}).createIndex(kI,eV,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{t.objectStore(Hc).clear()}).next(()=>{t.objectStore(Gc).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(xg,{keyPath:sV})})(e)})),r<18&&s>=18&&sI()&&(o=o.next(()=>{t.objectStore(Hc).clear()}).next(()=>{t.objectStore(Gc).clear()})),o}yi(e){let t=0;return e.store(Ti).X((r,s)=>{t+=Ud(s)}).next(()=>{const r={byteSize:t};return e.store(pl).put(Yp,r)})}pi(e){const t=e.store(fl),r=e.store(zn);return t.j().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,qi],[i.userId,i.lastAcknowledgedBatchId]);return r.j(ki,o).next(a=>L.forEach(a,c=>{ge(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Ri(this.serializer,c);return jT(e,i.userId,u).next(()=>{})}))}))}wi(e){const t=e.store(Aa),r=e.store(Ti);return e.store(Wi).get(Nd).next(s=>{const i=[];return r.X((o,a)=>{const c=new Ke(o),u=function(f){return[0,Qt(f)]}(c);i.push(t.get(u).next(h=>h?L.resolve():(f=>t.put({targetId:0,path:Qt(f),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>L.waitFor(i))})}Si(e,t){e.createObjectStore(ml,{keyPath:WO});const r=t.store(ml),s=new Mg,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Qt(c)})}};return t.store(Ti).X({Z:!0},(o,a)=>{const c=new Ke(o);return i(c.popLast())}).next(()=>t.store(Ta).X({Z:!0},([o,a,c],u)=>{const h=dr(a);return i(h.popLast())}))}bi(e){const t=e.store(Sa);return t.X((r,s)=>{const i=Lc(s),o=kT(this.serializer,i);return t.put(o)})}Di(e,t){const r=t.store(Ti),s=[];return r.X((i,o)=>{const a=t.store(Pd),c=function(f){return f.document?new ee(Ke.fromString(f.document.name).popFirst(5)):f.noDocument?ee.fromSegments(f.noDocument.path):f.unknownDocument?ee.fromSegments(f.unknownDocument.path):ue(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>L.waitFor(s))}Ci(e,t){const r=t.store(zn),s=qT(this.serializer),i=new Lg(Uh.Vi,this.serializer.gt);return r.j().next(o=>{const a=new Map;return o.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:Ne();Ri(this.serializer,c).keys().forEach(f=>h=h.add(f)),a.set(c.userId,h)}),L.forEach(a,(c,u)=>{const h=new Kt(u),f=Lh.yt(this.serializer,h),m=i.getIndexManager(h),v=Fh.yt(h,this.serializer,m,i.referenceDelegate);return new WT(s,v,f,m).recalculateAndSaveOverlaysForDocumentKeys(new em(t,dn.ue),c).next()})})}}function tb(n){n.createObjectStore(Aa,{keyPath:zO}).createIndex(wg,qO,{unique:!0}),n.createObjectStore(Sa,{keyPath:"targetId"}).createIndex(PI,$O,{unique:!0}),n.createObjectStore(Wi)}const ms="IndexedDbPersistence",Gf=18e5,Qf=5e3,Xf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bM="main";class Fg{constructor(e,t,r,s,i,o,a,c,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=i,this.window=o,this.document=a,this.Mi=u,this.xi=h,this.Oi=f,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=m=>Promise.resolve(),!Fg.C())throw new H(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cM(this,s),this.Qi=t+bM,this.serializer=new NT(c),this.$i=new Ws(this.Qi,this.Oi,new wM(this.serializer)),this.li=new YV,this.hi=new iM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qT(this.serializer),this.Ti=new XV,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,h===!1&&bt(ms,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(B.FAILED_PRECONDITION,Xf);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new dn(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(ui(e))return W(ms,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(ms,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return Sc(e).get(Mo).next(t=>L.resolve(this.Xi(t)))}es(e){return Bu(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,Gf)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ot(t,Ra);return r.j().next(s=>{const i=this.rs(s,Gf),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?L.resolve(!0):Sc(e).get(Mo).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Qf)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new H(B.FAILED_PRECONDITION,Xf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bu(e).j().next(r=>this.rs(r,Qf).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W(ms,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[zl,Ra],e=>{const t=new em(e,dn.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Bu(e).j().next(t=>this.rs(t,Gf).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Fh.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sM(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Lh.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){W(ms,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=function(c){return c===18?aV:c===17?jI:c===16?oV:c===15?Eg:c===14?MI:c===13?VI:c===12?iV:c===11?OI:void ue(60245)}(this.Oi);let o;return this.$i.runTransaction(e,s,i,a=>(o=new em(a,this.ui?this.ui.next():dn.ue),t==="readwrite-primary"?this.Ji(o).next(c=>!!c||this.Hi(o)).next(c=>{if(!c)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new H(B.FAILED_PRECONDITION,II);return r(o)}).next(c=>this.Zi(o).next(()=>c)):this.Ts(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ts(e){return Sc(e).get(Mo).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Qf)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new H(B.FAILED_PRECONDITION,Xf)})}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sc(e).put(Mo,t)}static C(){return Ws.C()}Yi(e){const t=Sc(e);return t.get(Mo).next(r=>this.Xi(r)?(W(ms,"Releasing primary lease."),t.delete(Mo)):L.resolve())}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;rI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return W(ms,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bt(ms,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Sc(n){return Ot(n,zl)}function Bu(n){return Ot(n,Ra)}function KT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ne(),s=Ne();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ug(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return rI()?8:SI(Dt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ps(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ys(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xM;return this.ws(e,t,o).next(a=>{if(i.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>i.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ko()<=je.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Ko()<=je.DEBUG&&W("QueryEngine","Query:",Ho(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ko()<=je.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(t))):L.resolve())}ps(e,t){if(Tw(t))return L.resolve(null);let r=Tn(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Vd(t,null,"F"),r=Tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ne(...i);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,Vd(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,s){return Tw(t)||s.isEqual(ve.min())?L.resolve(null):this.gs.getDocuments(e,r).next(i=>{const o=this.bs(t,i);return this.Ds(t,o,r,s)?L.resolve(null):(Ko()<=je.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ho(t)),this.vs(e,o,t,xI(s,Ia)).next(a=>a))})}bs(e,t){let r=new et(sT(e));return t.forEach((s,i)=>{Kl(e,i)&&(r=r.add(i))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,t,r){return Ko()<=je.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.gs.getDocumentsMatchingQuery(e,t,An.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="LocalStore",EM=3e8;class IM{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new at(be),this.Ms=new is(i=>no(i),ql),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function GT(n,e,t,r){return new IM(n,e,t,r)}async function QT(n,e){const t=fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=Ne();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function TM(n,e){const t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,m=f.keys();let v=L.resolve();return m.forEach(x=>{v=v.next(()=>h.getEntry(c,x)).next(y=>{const _=u.docVersions.get(x);ge(_!==null,48541),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ne();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function XT(n){const e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function SM(n,e){const t=fe(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(t.hi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>t.hi.addMatchingKeys(i,h.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(xt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(y,_,I){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=EM?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,v,h)&&a.push(t.hi.updateTargetData(i,v))});let c=xn(),u=Ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(AM(i,o,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(ve.min())){const h=t.hi.getLastRemoteSnapshotVersion(i).next(f=>t.hi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.Fs=s,i))}function AM(n,e,t){let r=Ne(),s=Ne();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=xn();return t.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):W(Bg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:s}})}function RM(n,e){const t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $d(n,e){const t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):t.hi.allocateTargetId(r).next(o=>(s=new Br(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Va(n,e,t){const r=fe(n),s=r.Fs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ui(o))throw o;W(Bg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function pm(n,e,t){const r=fe(n);let s=ve.min(),i=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=fe(c),m=f.Ms.get(h);return m!==void 0?L.resolve(f.Fs.get(m)):f.hi.getTargetData(u,h)}(r,o,Tn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?s:ve.min(),t?i:Ne())).next(a=>(JT(r,rT(e),a),{documents:a,qs:i})))}function YT(n,e){const t=fe(n),r=fe(t.hi),s=t.Fs.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",i=>r.Et(i,e).next(o=>o?o.target:null))}function ZT(n,e){const t=fe(n),r=t.xs.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Os.getAllFromCollectionGroup(s,e,xI(r,Ia),Number.MAX_SAFE_INTEGER)).then(s=>(JT(t,e,s),s))}function JT(n,e,t){let r=n.xs.get(e)||ve.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.xs.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firestore_clients";function nb(n,e){return`${eS}_${n}_${e}`}const tS="firestore_mutations";function rb(n,e,t){let r=`${tS}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const nS="firestore_targets";function Yf(n,e){return`${nS}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="SharedClientState";class zd{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ks(e,t,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new H(s.error.code,s.error.message))),o?new zd(e,t,s.state,i):(bt(lr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){const r=JSON.parse(t);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new H(r.error.code,r.error.message))),i?new Zc(e,r.state,s):(bt(lr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Rg();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=AI(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new qd(e,i):(bt(lr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class $g{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new $g(t.clientId,t.onlineState):(bt(lr,`Failed to parse online state: ${e}`),null)}}class mm{constructor(){this.activeTargetIds=Rg()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zf{constructor(e,t,r,s,i){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new at(be),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=nb(this.persistenceKey,this.js),this.eo=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new mm),this.no=new RegExp(`^${eS}_${o}_([^_]*)$`),this.ro=new RegExp(`^${tS}_${o}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${nS}_${o}_(\\d+)$`),this.so=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.oo=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const s=this.getItem(nb(this.persistenceKey,r));if(s){const i=qd.Ks(r,s);i&&(this.Ys=this.Ys.insert(i.clientId,i))}}this._o();const t=this.storage.getItem(this.so);if(t){const r=this.ao(t);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Yf(this.persistenceKey,e));if(s){const i=Zc.Ks(e,s);i&&(r=i.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yf(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.ho(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return W(lr,"READ",e,t),t}setItem(e,t){W(lr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){W(lr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(W(lr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){const r=this.Ao(t.key);return this.Ro(r,null)}{const r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){const r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){const r=function(i){let o=dn.ue;if(i!=null)try{const a=JSON.parse(i);ge(typeof a=="number",30636,{wo:i}),o=a}catch(a){bt(lr,"Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==dn.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){const r=this.So(t.newValue);await Promise.all(r.map(s=>this.syncEngine.bo(s)))}}}else this.Zs.push(t)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){const s=new zd(this.currentUser,e,t,r),i=rb(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Ws())}ho(e){const t=rb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){const s=Yf(this.persistenceKey,e),i=new Zc(e,t,r);this.setItem(s,i.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const r=this.Ao(e);return qd.Ks(r,t)}mo(e,t){const r=this.ro.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return zd.Ks(new Kt(i),s,t)}po(e,t){const r=this.io.exec(e),s=Number(r[1]);return Zc.Ks(s,t)}ao(e){return $g.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);W(lr,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Ys.insert(e,t):this.Ys.remove(e),s=this.co(this.Ys),i=this.co(r),o=[],a=[];return i.forEach(c=>{s.has(c)||o.push(c)}),s.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.Co(o,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=Rg();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class rS{constructor(){this.Fo=new mm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new mm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="ConnectivityMonitor";class ib{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){W(sb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){W(sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function gm(){return $u===null?$u=function(){return 268435456+Math.round(2147483648*Math.random())}():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="RestConnection",PM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===kd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,i){const o=gm(),a=this.Go(e,t.toUriEncodedString());W(Jf,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:u}=new URL(a),h=ci(u);return this.jo(e,a,c,r,h).then(f=>(W(Jf,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Xs(Jf,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,s,i,o){return this.Wo(e,t,r,s,i)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Go(e,t){const r=PM[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class DM extends NM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,i){const o=gm();return new Promise((a,c)=>{const u=new hI;u.setWithCredentials(!0),u.listenOnce(fI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ed.NO_ERROR:const f=u.getResponseJson();W(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case ed.TIMEOUT:W(Wt,`RPC '${e}' ${o} timed out`),c(new H(B.DEADLINE_EXCEEDED,"Request time out"));break;case ed.HTTP_ERROR:const m=u.getStatus();if(W(Wt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const y=function(I){const b=I.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(b)>=0?b:B.UNKNOWN}(x.status);c(new H(y,x.message))}else c(new H(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new H(B.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{W(Wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);W(Wt,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",h,r,15)})}P_(e,t,r){const s=gm(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gI(),a=mI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=i.join("");W(Wt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.T_(f);let m=!1,v=!1;const x=new kM({Ho:_=>{v?W(Wt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(W(Wt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),W(Wt,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},Yo:()=>f.close()}),y=(_,I,b)=>{_.listen(I,S=>{try{b(S)}catch(P){setTimeout(()=>{throw P},0)}})};return y(f,Vc.EventType.OPEN,()=>{v||(W(Wt,`RPC '${e}' stream ${s} transport opened.`),x.s_())}),y(f,Vc.EventType.CLOSE,()=>{v||(v=!0,W(Wt,`RPC '${e}' stream ${s} transport closed`),x.__(),this.I_(f))}),y(f,Vc.EventType.ERROR,_=>{v||(v=!0,Xs(Wt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),x.__(new H(B.UNAVAILABLE,"The operation could not be completed")))}),y(f,Vc.EventType.MESSAGE,_=>{var I;if(!v){const b=_.data[0];ge(!!b,16349);const S=b,P=(S==null?void 0:S.error)||((I=S[0])===null||I===void 0?void 0:I.error);if(P){W(Wt,`RPC '${e}' stream ${s} received error:`,P);const N=P.status;let j=function(C){const D=It[C];if(D!==void 0)return yT(D)}(N),T=P.message;j===void 0&&(j=B.INTERNAL,T="Unknown error status: "+N+" with message "+P.message),v=!0,x.__(new H(j,T)),f.close()}else W(Wt,`RPC '${e}' stream ${s} received:`,b),x.a_(b)}}),y(a,pI.STAT_EVENT,_=>{_.stat===Gp.PROXY?W(Wt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Gp.NOPROXY&&W(Wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return typeof window<"u"?window:null}function ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(n){return new FV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="PersistentStream";class oS{constructor(e,t,r,s,i,o,a,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new iS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new H(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return W(ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(W(ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OM extends oS{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=$V(this.serializer,e),r=function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?rn(o.readTime):ve.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=lm(this.serializer),t.addTarget=function(i,o){let a;const c=o.target;if(a=Dd(c)?{documents:TT(i,c)}:{query:ST(i,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wT(i,o.resumeToken);const u=am(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){a.readTime=Oa(i,o.snapshotVersion.toTimestamp());const u=am(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=qV(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=lm(this.serializer),t.removeTarget=e,this.k_(t)}}class VM extends oS{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=zV(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=lm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jd(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{}class jM extends MM{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new H(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,cm(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(B.UNKNOWN,i.toString())})}Jo(e,t,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,cm(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class LM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(bt(t),this._a=!1):W("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="RemoteStore";class FM{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Eo(this)&&(W(co,"Restarting streams for network reachability change."),await async function(c){const u=fe(c);u.Ia.add(4),await Yl(u),u.Aa.set("Unknown"),u.Ia.delete(4),await $h(u)}(this))})}),this.Aa=new LM(r,s)}}async function $h(n){if(Eo(n))for(const e of n.da)await e(!0)}async function Yl(n){for(const e of n.da)await e(!1)}function zh(n,e){const t=fe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Wg(t)?qg(t):Ja(t).x_()&&zg(t,e))}function Ma(n,e){const t=fe(n),r=Ja(t);t.Ta.delete(e),r.x_()&&aS(t,e),t.Ta.size===0&&(r.x_()?r.B_():Eo(t)&&t.Aa.set("Unknown"))}function zg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ja(n).H_(e)}function aS(n,e){n.Ra.$e(e),Ja(n).Y_(e)}function qg(n){n.Ra=new VV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ja(n).start(),n.Aa.aa()}function Wg(n){return Eo(n)&&!Ja(n).M_()&&n.Ta.size>0}function Eo(n){return fe(n).Ia.size===0}function cS(n){n.Ra=void 0}async function UM(n){n.Aa.set("Online")}async function BM(n){n.Ta.forEach((e,t)=>{zg(n,e)})}async function $M(n,e){cS(n),Wg(n)?(n.Aa.la(e),qg(n)):n.Aa.set("Unknown")}async function zM(n,e,t){if(n.Aa.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ta.delete(a),s.Ra.removeTarget(a))}(n,e)}catch(r){W(co,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wd(n,r)}else if(e instanceof cd?n.Ra.Ye(e):e instanceof vT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ve.min()))try{const r=await XT(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ta.get(u);h&&i.Ta.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.Ta.get(c);if(!h)return;i.Ta.set(c,h.withResumeToken(xt.EMPTY_BYTE_STRING,h.snapshotVersion)),aS(i,c);const f=new Br(h.target,c,u,h.sequenceNumber);zg(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){W(co,"Failed to raise snapshot:",r),await Wd(n,r)}}async function Wd(n,e,t){if(!ui(e))throw e;n.Ia.add(1),await Yl(n),n.Aa.set("Offline"),t||(t=()=>XT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W(co,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await $h(n)})}function lS(n,e){return e().catch(t=>Wd(n,t,e))}async function Za(n){const e=fe(n),t=ei(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qi;for(;qM(e);)try{const s=await RM(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,WM(e,s)}catch(s){await Wd(e,s)}uS(e)&&dS(e)}function qM(n){return Eo(n)&&n.Pa.length<10}function WM(n,e){n.Pa.push(e);const t=ei(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function uS(n){return Eo(n)&&!ei(n).M_()&&n.Pa.length>0}function dS(n){ei(n).start()}async function KM(n){ei(n).na()}async function HM(n){const e=ei(n);for(const t of n.Pa)e.X_(t.mutations)}async function GM(n,e,t){const r=n.Pa.shift(),s=Ng.from(r,e,t);await lS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Za(n)}async function QM(n,e){e&&ei(n).Z_&&await async function(r,s){if(function(o){return DV(o)&&o!==B.ABORTED}(s.code)){const i=r.Pa.shift();ei(r).N_(),await lS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Za(r)}}(n,e),uS(n)&&dS(n)}async function ab(n,e){const t=fe(n);t.asyncQueue.verifyOperationInProgress(),W(co,"RemoteStore received new credentials");const r=Eo(t);t.Ia.add(3),await Yl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await $h(t)}async function ym(n,e){const t=fe(n);e?(t.Ia.delete(2),await $h(t)):e||(t.Ia.add(2),await Yl(t),t.Aa.set("Unknown"))}function Ja(n){return n.Va||(n.Va=function(t,r,s){const i=fe(t);return i.ia(),new OM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Zo:UM.bind(null,n),e_:BM.bind(null,n),n_:$M.bind(null,n),J_:zM.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Wg(n)?qg(n):n.Aa.set("Unknown")):(await n.Va.stop(),cS(n))})),n.Va}function ei(n){return n.ma||(n.ma=function(t,r,s){const i=fe(t);return i.ia(),new VM(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:KM.bind(null,n),n_:QM.bind(null,n),ea:HM.bind(null,n),ta:GM.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Za(n)):(await n.ma.stop(),n.Pa.length>0&&(W(co,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new Kg(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hg(n,e){if(bt("AsyncQueue",`${e}: ${n}`),ui(n))return new H(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{static emptySet(e){return new na(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Mc(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new na;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.fa=new at(ee.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class ja{constructor(e,t,r,s,i,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ja(e,t,na.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class YM{constructor(){this.queries=lb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=fe(t),i=s.queries;s.queries=lb(),i.forEach((o,a)=>{for(const c of a.wa)c.onError(r)})})(this,new H(B.ABORTED,"Firestore shutting down"))}}function lb(){return new is(n=>nT(n),Vh)}async function Gg(n,e){const t=fe(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Sa()&&e.ba()&&(r=2):(i=new XM,r=e.ba()?0:1);try{switch(r){case 0:i.ya=await t.onListen(s,!0);break;case 1:i.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=Hg(o,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.wa.push(e),e.va(t.onlineState),i.ya&&e.Ca(i.ya)&&Xg(t)}async function Qg(n,e){const t=fe(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.wa.indexOf(e);o>=0&&(i.wa.splice(o,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZM(n,e){const t=fe(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.wa)a.Ca(s)&&(r=!0);o.ya=s}}r&&Xg(t)}function JM(n,e,t){const r=fe(n),s=r.queries.get(e);if(s)for(const i of s.wa)i.onError(t);r.queries.delete(e)}function Xg(n){n.Da.forEach(e=>{e.next()})}var vm,ub;(ub=vm||(vm={})).Fa="default",ub.Cache="cache";class Yg{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.key=e}}class fS{constructor(e){this.key=e}}class ej{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=sT(e),this.eu=new na(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new cb,s=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),v=Kl(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),y=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let _=!1;m&&v?m.data.isEqual(v.data)?x!==y&&(r.track({type:3,doc:v}),_=!0):this.iu(m,v)||(r.track({type:2,doc:v}),_=!0,(c&&this.Xa(v,c)>0||u&&this.Xa(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),_=!0):m&&!v&&(r.track({type:1,doc:m}),_=!0,(c||u)&&(a=!0)),_&&(v?(o=o.add(v),i=y?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(v,x){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{At:_})}};return y(v)-y(x)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(r),s=s!=null&&s;const a=t&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new ja(this.query,e.eu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ne(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new fS(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new hS(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ne();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ja.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ec="SyncEngine";class tj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nj{constructor(e){this.key=e,this.lu=!1}}class rj{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new is(a=>nT(a),Vh),this.Tu=new Map,this.Iu=new Set,this.du=new at(ee.comparator),this.Eu=new Map,this.Au=new jg,this.Ru={},this.Vu=new Map,this.mu=ao.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function sj(n,e,t=!0){const r=qh(n);let s;const i=r.Pu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await pS(r,e,t,!0),s}async function ij(n,e){const t=qh(n);await pS(t,e,!0,!1)}async function pS(n,e,t,r){const s=await $d(n.localStore,Tn(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await Zg(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&zh(n.remoteStore,s),a}async function Zg(n,e,t,r,s){n.gu=(f,m,v)=>async function(y,_,I,b){let S=_.view.nu(I);S.Ds&&(S=await pm(y.localStore,_.query,!1).then(({documents:T})=>_.view.nu(T,S)));const P=b&&b.targetChanges.get(_.targetId),N=b&&b.targetMismatches.get(_.targetId)!=null,j=_.view.applyChanges(S,y.isPrimaryClient,P,N);return _m(y,_.targetId,j._u),j.snapshot}(n,f,m,v);const i=await pm(n.localStore,e,!0),o=new ej(e,i.qs),a=o.nu(i.documents),c=Xl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,c);_m(n,t,u._u);const h=new tj(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function oj(n,e,t){const r=fe(n),s=r.Pu.get(e),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter(o=>!Vh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Va(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ma(r.remoteStore,s.targetId),La(r,s.targetId)}).catch(li)):(La(r,s.targetId),await Va(r.localStore,s.targetId,!0))}async function aj(n,e){const t=fe(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ma(t.remoteStore,r.targetId))}async function cj(n,e,t){const r=ny(n);try{const s=await function(o,a){const c=fe(o),u=Ze.now(),h=a.reduce((v,x)=>v.add(x.key),Ne());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=xn(),y=Ne();return c.Os.getEntries(v,h).next(_=>{x=_,x.forEach((I,b)=>{b.isValidDocument()||(y=y.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,x)).next(_=>{f=_;const I=[];for(const b of a){const S=NV(b,f.get(b.key).overlayedDocument);S!=null&&I.push(new os(b.key,S,HI(S.value.mapValue),Lt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,I,a)}).next(_=>{m=_;const I=_.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(v,_.batchId,I)})}).then(()=>({batchId:m.batchId,changes:oT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new at(be)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u}(r,s.batchId,t),await hi(r,s.changes),await Za(r.remoteStore)}catch(s){const i=Hg(s,"Failed to persist write");t.reject(i)}}async function mS(n,e){const t=fe(n);try{const r=await SM(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Eu.get(i);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.lu=!0:s.modifiedDocuments.size>0?ge(o.lu,14607):s.removedDocuments.size>0&&(ge(o.lu,42227),o.lu=!1))}),await hi(t,r,e)}catch(r){await li(r)}}function db(n,e,t){const r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=fe(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.wa)m.va(a)&&(u=!0)}),u&&Xg(c)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lj(n,e,t){const r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new at(ee.comparator);o=o.insert(i,yt.newNoDocument(i,ve.min()));const a=Ne().add(i),c=new Ql(ve.min(),new Map,new at(be),o,a);await mS(r,c),r.du=r.du.remove(i),r.Eu.delete(e),ty(r)}else await Va(r.localStore,e,!1).then(()=>La(r,e,t)).catch(li)}async function uj(n,e){const t=fe(n),r=e.batch.batchId;try{const s=await TM(t.localStore,e);ey(t,r,null),Jg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await hi(t,s)}catch(s){await li(s)}}async function dj(n,e,t){const r=fe(n);try{const s=await function(o,a){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ge(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);ey(r,e,t),Jg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await hi(r,s)}catch(s){await li(s)}}function Jg(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function ey(n,e,t){const r=fe(n);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function La(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||gS(n,r)})}function gS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ma(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ty(n))}function _m(n,e,t){for(const r of t)r instanceof hS?(n.Au.addReference(r.key,e),hj(n,r)):r instanceof fS?(W(ec,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||gS(n,r.key)):ue(19791,{yu:r})}function hj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(W(ec,"New document in limbo: "+t),n.Iu.add(r),ty(n))}function ty(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ee(Ke.fromString(e)),r=n.mu.next();n.Eu.set(r,new nj(t)),n.du=n.du.insert(t,r),zh(n.remoteStore,new Br(Tn(Wl(t.path)),r,"TargetPurposeLimboResolution",dn.ue))}}async function hi(n,e,t){const r=fe(n),s=[],i=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Ug.Es(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.hu.J_(s),await async function(c,u){const h=fe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(u,m=>L.forEach(m.Is,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>L.forEach(m.ds,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!ui(f))throw f;W(Bg,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=h.Fs.get(m),x=v.snapshotVersion,y=v.withLastLimboFreeSnapshotVersion(x);h.Fs=h.Fs.insert(m,y)}}}(r.localStore,i))}async function fj(n,e){const t=fe(n);if(!t.currentUser.isEqual(e)){W(ec,"User change. New user:",e.toKey());const r=await QT(t.localStore,e);t.currentUser=e,function(i,o){i.Vu.forEach(a=>{a.forEach(c=>{c.reject(new H(B.CANCELLED,o))})}),i.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hi(t,r.Bs)}}function pj(n,e){const t=fe(n),r=t.Eu.get(e);if(r&&r.lu)return Ne().add(r.key);{let s=Ne();const i=t.Tu.get(e);if(!i)return s;for(const o of i){const a=t.Pu.get(o);s=s.unionWith(a.view.tu)}return s}}async function mj(n,e){const t=fe(n),r=await pm(t.localStore,e.query,!0),s=e.view.uu(r);return t.isPrimaryClient&&_m(t,e.targetId,s._u),s}async function gj(n,e){const t=fe(n);return ZT(t.localStore,e).then(r=>hi(t,r))}async function yj(n,e,t,r){const s=fe(n),i=await function(a,c){const u=fe(a),h=fe(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Xn(f,c).next(m=>m?u.localDocuments.getDocuments(f,m):L.resolve(null)))}(s.localStore,e);i!==null?(t==="pending"?await Za(s.remoteStore):t==="acknowledged"||t==="rejected"?(ey(s,e,r||null),Jg(s,e),function(a,c){fe(fe(a).mutationQueue).rr(c)}(s.localStore,e)):ue(6720,"Unknown batchState",{wu:t}),await hi(s,i)):W(ec,"Cannot apply mutation batch with id: "+e)}async function vj(n,e){const t=fe(n);if(qh(t),ny(t),e===!0&&t.fu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await hb(t,r.toArray());t.fu=!0,await ym(t.remoteStore,!0);for(const i of s)zh(t.remoteStore,i)}else if(e===!1&&t.fu!==!1){const r=[];let s=Promise.resolve();t.Tu.forEach((i,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(La(t,o),Va(t.localStore,o,!0))),Ma(t.remoteStore,o)}),await s,await hb(t,r),function(o){const a=fe(o);a.Eu.forEach((c,u)=>{Ma(a.remoteStore,u)}),a.Au.jr(),a.Eu=new Map,a.du=new at(ee.comparator)}(t),t.fu=!1,await ym(t.remoteStore,!1)}}async function hb(n,e,t){const r=fe(n),s=[],i=[];for(const o of e){let a;const c=r.Tu.get(o);if(c&&c.length!==0){a=await $d(r.localStore,Tn(c[0]));for(const u of c){const h=r.Pu.get(u),f=await mj(r,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await YT(r.localStore,o);a=await $d(r.localStore,u),await Zg(r,yS(u),o,!1,a.resumeToken)}s.push(a)}return r.hu.J_(i),s}function yS(n){return tT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _j(n){return function(t){return fe(fe(t).persistence).Ps()}(fe(n).localStore)}async function wj(n,e,t,r){const s=fe(n);if(s.fu)return void W(ec,"Ignoring unexpected query state notification.");const i=s.Tu.get(e);if(i&&i.length>0)switch(t){case"current":case"not-current":{const o=await ZT(s.localStore,rT(i[0])),a=Ql.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await hi(s,o,a);break}case"rejected":await Va(s.localStore,e,!0),La(s,e,r);break;default:ue(64155,t)}}async function bj(n,e,t){const r=qh(n);if(r.fu){for(const s of e){if(r.Tu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){W(ec,"Adding an already active target "+s);continue}const i=await YT(r.localStore,s),o=await $d(r.localStore,i);await Zg(r,yS(i),o.targetId,!1,o.resumeToken),zh(r.remoteStore,o)}for(const s of t)r.Tu.has(s)&&await Va(r.localStore,s,!1).then(()=>{Ma(r.remoteStore,s),La(r,s)}).catch(li)}}function qh(n){const e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lj.bind(null,e),e.hu.J_=ZM.bind(null,e.eventManager),e.hu.pu=JM.bind(null,e.eventManager),e}function ny(n){const e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dj.bind(null,e),e}class wl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return GT(this.persistence,new HT,e.initialUser,this.serializer)}Du(e){return new Lg(Uh.Vi,this.serializer)}bu(e){return new rS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wl.provider={build:()=>new wl};class xj extends wl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ge(this.persistence.referenceDelegate instanceof Bd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BT(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Lg(r=>Bd.Vi(r,t),this.serializer)}}class vS extends wl{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await ny(this.Mu.syncEngine),await Za(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return GT(this.persistence,new HT,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new BT(r,e.asyncQueue,t)}Fu(e,t){const r=new VO(t,this.persistence);return new OO(e.asyncQueue,r)}Du(e){const t=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Fg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sS(),ud(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new rS}}class Ej extends vS{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof Zf&&(this.sharedClientState.syncEngine={Do:yj.bind(null,t),vo:wj.bind(null,t),Co:bj.bind(null,t),Ps:_j.bind(null,t),bo:gj.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji(async r=>{await vj(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}bu(e){const t=sS();if(!Zf.C(t))throw new H(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zf(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>db(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fj.bind(null,this.syncEngine),await ym(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YM}()}createDatastore(e){const t=Bh(e.databaseInfo.databaseId),r=function(i){return new DM(i)}(e.databaseInfo);return function(i,o,a,c){return new jM(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new FM(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>db(this.syncEngine,t,0),function(){return ib.C()?new ib:new CM}())}createSyncEngine(e,t){return function(s,i,o,a,c,u,h){const f=new rj(s,i,o,a,c,u);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=fe(s);W(co,"RemoteStore shutting down."),i.Ia.add(5),await Yl(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bl.provider={build:()=>new bl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="FirestoreClient";class Ij{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Kt.UNAUTHENTICATED,this.clientId=yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(ti,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(ti,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Hg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ep(n,e){n.asyncQueue.verifyOperationInProgress(),W(ti,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await QT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Xs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{W("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Xs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function fb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Tj(n);W(ti,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ab(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>ab(e.remoteStore,s)),n._onlineComponents=e}async function Tj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(ti,"Using user provided OfflineComponentProvider");try{await ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Xs("Error using user provided cache. Falling back to memory cache: "+t),await ep(n,new wl)}}else W(ti,"Using default OfflineComponentProvider"),await ep(n,new xj(void 0));return n._offlineComponents}async function _S(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(ti,"Using user provided OnlineComponentProvider"),await fb(n,n._uninitializedComponentsProvider._online)):(W(ti,"Using default OnlineComponentProvider"),await fb(n,new bl))),n._onlineComponents}function Sj(n){return _S(n).then(e=>e.syncEngine)}async function Kd(n){const e=await _S(n),t=e.eventManager;return t.onListen=sj.bind(null,e.syncEngine),t.onUnlisten=oj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ij.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aj.bind(null,e.syncEngine),t}function Aj(n,e,t={}){const r=new gr;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new ry({next:m=>{h.Ou(),o.enqueueAndForget(()=>Qg(i,f));const v=m.docs.has(a);!v&&m.fromCache?u.reject(new H(B.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?u.reject(new H(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Yg(Wl(a.path),h,{includeMetadataChanges:!0,ka:!0});return Gg(i,f)}(await Kd(n),n.asyncQueue,e,t,r)),r.promise}function Rj(n,e,t={}){const r=new gr;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new ry({next:m=>{h.Ou(),o.enqueueAndForget(()=>Qg(i,f)),m.fromCache&&c.source==="server"?u.reject(new H(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Yg(a,h,{includeMetadataChanges:!0,ka:!0});return Gg(i,f)}(await Kd(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="firestore.googleapis.com",mb=!0;class gb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cj,this.ssl=mb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:mb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UT)throw new H(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sy{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xO;switch(r.type){case"firstParty":return new TO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=pb.get(t);r&&(W("ComponentProvider","Removing Datastore"),pb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sr(this.firestore,e,this._query)}}class vt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if($l(t,vt._jsonSchema))return new vt(e,r||null,new ee(Ke.fromString(t.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:St("string",vt._jsonSchemaVersion),referencePath:St("string")};class Ks extends Sr{constructor(e,t,r){super(e,t,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ee(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Jc(n,e,...t){if(n=st(n),wI("collection","path",e),n instanceof sy){const r=Ke.fromString(e,...t);return ow(r),new Ks(n,null,r)}{if(!(n instanceof vt||n instanceof Ks))throw new H(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return ow(r),new Ks(n.firestore,null,r)}}function yn(n,e,...t){if(n=st(n),arguments.length===1&&(e=yg.newId()),wI("doc","path",e),n instanceof sy){const r=Ke.fromString(e,...t);return iw(r),new vt(n,null,new ee(r))}{if(!(n instanceof vt||n instanceof Ks))throw new H(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return iw(r),new vt(n.firestore,n instanceof Ks?n.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="AsyncQueue";class vb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new iS(this,"async_queue_retry"),this.oc=()=>{const r=ud();r&&W(yb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=ud();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=ud();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ui(e))throw e;W(yb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,bt("INTERNAL UNHANDLED ERROR: ",_b(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Kg.createAndSchedule(this,e,t,r,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ue(47125,{hc:_b(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function _b(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(n,["next","error","complete"])}class Jr extends sy{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new vb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vb(e),this._firestoreClient=void 0,await e}}}function Pj(n,e,t){t||(t=kd);const r=Th(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),i=r.getOptions(t);if(Qr(i,e))return s;throw new H(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new H(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UT)throw new H(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ci(e.host)&&hg(e.host),r.initialize({options:e,instanceIdentifier:t})}function Zl(n){if(n._terminated)throw new H(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Nj(n),n._firestoreClient}function Nj(n){var e,t,r;const s=n._freezeSettings(),i=function(a,c,u,h){return new lV(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Ij(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(xt.fromBase64String(e))}catch(t){throw new H(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kn(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($l(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:St("string",kn._jsonSchemaVersion),bytes:St("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if($l(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:St("string",yr._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($l(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new vr(e.vectorValues);throw new H(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:St("string",vr._jsonSchemaVersion),vectorValues:St("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=/^__.*__$/;class Dj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ya(e,this.data,t,this.fieldTransforms)}}class bS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new os(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ec:n})}}class Wh{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Wh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Hd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xS(this.Ec)&&kj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Oj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bh(e)}Dc(e,t,r,s=!1){return new Wh({Ec:e,methodName:t,bc:r,path:ht.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eu(n){const e=n._freezeSettings(),t=Bh(n._databaseId);return new Oj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ES(n,e,t,r,s,i={}){const o=n.Dc(i.merge||i.mergeFields?2:0,e,t,s);ly("Data must be an object, but it was:",o,r);const a=RS(r,o);let c,u;if(i.merge)c=new hn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=wm(e,f,t);if(!o.contains(m))throw new H(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);PS(h,m)||h.push(m)}c=new hn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Dj(new Gt(a),c,u)}class Kh extends Io{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function IS(n,e,t){return new Wh({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iy extends Io{_toFieldTransform(e){return new Hl(e.path,new ka)}isEqual(e){return e instanceof iy}}class oy extends Io{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=IS(this,e,!0),r=this.vc.map(i=>To(i,t)),s=new ro(r);return new Hl(e.path,s)}isEqual(e){return e instanceof oy&&Qr(this.vc,e.vc)}}class ay extends Io{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=IS(this,e,!0),r=this.vc.map(i=>To(i,t)),s=new so(r);return new Hl(e.path,s)}isEqual(e){return e instanceof ay&&Qr(this.vc,e.vc)}}class cy extends Io{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Da(e.serializer,lT(e.serializer,this.Cc));return new Hl(e.path,t)}isEqual(e){return e instanceof cy&&this.Cc===e.Cc}}function TS(n,e,t,r){const s=n.Dc(1,e,t);ly("Data must be an object, but it was:",s,r);const i=[],o=Gt.empty();di(r,(c,u)=>{const h=uy(e,c,t);u=st(u);const f=s.gc(h);if(u instanceof Kh)i.push(h);else{const m=To(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new hn(i);return new bS(o,a,s.fieldTransforms)}function SS(n,e,t,r,s,i){const o=n.Dc(1,e,t),a=[wm(e,r,t)],c=[s];if(i.length%2!=0)throw new H(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(wm(e,i[m])),c.push(i[m+1]);const u=[],h=Gt.empty();for(let m=a.length-1;m>=0;--m)if(!PS(u,a[m])){const v=a[m];let x=c[m];x=st(x);const y=o.gc(v);if(x instanceof Kh)u.push(v);else{const _=To(x,y);_!=null&&(u.push(v),h.set(v,_))}}const f=new hn(u);return new bS(h,f,o.fieldTransforms)}function AS(n,e,t,r=!1){return To(t,n.Dc(r?4:3,e))}function To(n,e){if(CS(n=st(n)))return ly("Unsupported field value:",e,n),RS(n,e);if(n instanceof Io)return function(r,s){if(!xS(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=To(a,s.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ze.fromDate(r);return{timestampValue:Oa(s.serializer,i)}}if(r instanceof Ze){const i=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oa(s.serializer,i)}}if(r instanceof yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:wT(s.serializer,r._byteString)};if(r instanceof vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Og(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vr)return function(o,a){return{mapValue:{fields:{[Ig]:{stringValue:Tg},[Ca]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return Cg(a.serializer,u)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Sh(r)}`)}(n,e)}function RS(n,e){const t={};return LI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(n,(r,s)=>{const i=To(s,e.Vc(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function CS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof yr||n instanceof kn||n instanceof vt||n instanceof Io||n instanceof vr)}function ly(n,e,t){if(!CS(t)||!bI(t)){const r=Sh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function wm(n,e,t){if((e=st(e))instanceof Jl)return e._internalPath;if(typeof e=="string")return uy(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vj=new RegExp("[~\\*/\\[\\]]");function uy(n,e,t){if(e.search(Vj)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jl(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new H(B.INVALID_ARGUMENT,a+n+c)}function PS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Mj extends dy{data(){return super.data()}}function Hh(n,e){return typeof e=="string"?uy(n,e):e instanceof Jl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class Gh extends hy{}function el(n,e,...t){let r=[];e instanceof hy&&r.push(e),r=r.concat(t),function(i){const o=i.filter(c=>c instanceof fy).length,a=i.filter(c=>c instanceof Qh).length;if(o>1||o>0&&a>0)throw new H(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Qh extends Gh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Qh(e,t,r)}_apply(e){const t=this._parse(e);return kS(e._query,t),new Sr(e.firestore,e.converter,om(e._query,t))}_parse(e){const t=eu(e.firestore);return function(i,o,a,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xb(f,h);const x=[];for(const y of f)x.push(bb(c,i,y));m={arrayValue:{values:x}}}else m=bb(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xb(f,h),m=AS(a,o,f,h==="in"||h==="not-in");return Le.create(u,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ir(n,e,t){const r=e,s=Hh("where",n);return Qh._create(s,r,t)}class fy extends hy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)kS(o,c),o=om(o,c)}(e._query,t),new Sr(e.firestore,e.converter,om(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends Gh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new py(e,t)}_apply(e){const t=function(s,i,o){if(s.startAt!==null)throw new H(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(i,o)}(e._query,this._field,this._direction);return new Sr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new xo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function dd(n,e="asc"){const t=e,r=Hh("orderBy",n);return py._create(r,t)}class my extends Gh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new my(e,t,r)}_apply(e){return new Sr(e.firestore,e.converter,Vd(e._query,this._limit,this._limitType))}}function tp(n){return NO("limit",n),my._create("limit",n,"F")}class gy extends Gh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gy(e,t,r)}_apply(e){const t=Lj(e,this.type,this._docOrFields,this._inclusive);return new Sr(e.firestore,e.converter,function(s,i){return new xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,t))}}function jj(...n){return gy._create("startAfter",n,!1)}function Lj(n,e,t,r){if(t[0]=st(t[0]),t[0]instanceof dy)return function(i,o,a,c,u){if(!c)throw new H(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of ta(i))if(f.field.isKeyField())h.push(to(o,c.key));else{const m=c.data.field(f.field);if(kh(m))throw new H(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const v=f.field.canonicalString();throw new H(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Js(h,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=eu(n.firestore);return function(o,a,c,u,h,f){const m=o.explicitOrderBy;if(h.length>m.length)throw new H(B.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let x=0;x<h.length;x++){const y=h[x];if(m[x].field.isKeyField()){if(typeof y!="string")throw new H(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof y}`);if(!Ag(o)&&y.indexOf("/")!==-1)throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${y}' contains a slash.`);const _=o.path.child(Ke.fromString(y));if(!ee.isDocumentKey(_))throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const I=new ee(_);v.push(to(a,I))}else{const _=AS(c,u,y);v.push(_)}}return new Js(v,f)}(n._query,n.firestore._databaseId,s,e,t,r)}}function bb(n,e,t){if(typeof(t=st(t))=="string"){if(t==="")throw new H(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ag(e)&&t.indexOf("/")!==-1)throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!ee.isDocumentKey(r))throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return to(n,new ee(r))}if(t instanceof vt)return to(n,t._key);throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(t)}.`)}function xb(n,e){if(!Array.isArray(n)||n.length===0)throw new H(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kS(n,e){const t=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Fj{convertValue(e,t="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return di(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Ca].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>dt(o.doubleValue));return new vr(i)}convertGeoPoint(e){return new yr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const t=Yr(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);ge(PT(r),9688,{name:e});const s=new eo(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(t)||bt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hi extends dy{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hi._jsonSchema={type:St("string",Hi._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};class hd extends Hi{data(e={}){return super.data(e)}}class Gi{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hd(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new hd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new hd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Uj(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n){n=In(n,vt);const e=In(n.firestore,Jr);return Aj(Zl(e),n._key).then(t=>OS(e,n,t))}Gi._jsonSchemaVersion="firestore/querySnapshot/1.0",Gi._jsonSchema={type:St("string",Gi._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};class yy extends Fj{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function xm(n){n=In(n,Sr);const e=In(n.firestore,Jr),t=Zl(e),r=new yy(e);return NS(n._query),Rj(t,n._query).then(s=>new Gi(e,r,n,s))}function vy(n,e,t){n=In(n,vt);const r=In(n.firestore,Jr),s=DS(n.converter,e,t);return Xh(r,[ES(eu(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Lt.none())])}function ra(n,e,t,...r){n=In(n,vt);const s=In(n.firestore,Jr),i=eu(s);let o;return o=typeof(e=st(e))=="string"||e instanceof Jl?SS(i,"updateDoc",n._key,e,t,r):TS(i,"updateDoc",n._key,e),Xh(s,[o.toMutation(n._key,Lt.exists(!0))])}function Bj(n){return Xh(In(n.firestore,Jr),[new Gl(n._key,Lt.none())])}function $j(n,...e){var t,r,s;n=st(n);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wb(e[o])||(i=e[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(wb(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(n instanceof vt)u=In(n.firestore,Jr),h=Wl(n._key.path),c={next:f=>{e[o]&&e[o](OS(u,n,f))},error:e[o+1],complete:e[o+2]};else{const f=In(n,Sr);u=In(f.firestore,Jr),h=f._query;const m=new yy(u);c={next:v=>{e[o]&&e[o](new Gi(u,m,f,v))},error:e[o+1],complete:e[o+2]},NS(n._query)}return function(m,v,x,y){const _=new ry(y),I=new Yg(v,_,x);return m.asyncQueue.enqueueAndForget(async()=>Gg(await Kd(m),I)),()=>{_.Ou(),m.asyncQueue.enqueueAndForget(async()=>Qg(await Kd(m),I))}}(Zl(u),h,a,c)}function Xh(n,e){return function(r,s){const i=new gr;return r.asyncQueue.enqueueAndForget(async()=>cj(await Sj(r),s,i)),i.promise}(Zl(n),e)}function OS(n,e,t){const r=t.docs.get(e._key),s=new yy(n);return new Hi(n,s,e._key,r,new Fc(t.hasPendingWrites,t.fromCache),e.converter)}class zj{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Hj(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function qj(n){return new zj(n)}class Wj{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bl.provider,this._offlineComponentProvider={build:t=>new vS(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Kj{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bl.provider,this._offlineComponentProvider={build:t=>new Ej(t,e==null?void 0:e.cacheSizeBytes)}}}function Hj(n){return new Wj(void 0)}function Gj(){return new Kj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=eu(e)}set(e,t,r){this._verifyNotCommitted();const s=np(e,this._firestore),i=DS(s.converter,t,r),o=ES(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Lt.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const i=np(e,this._firestore);let o;return o=typeof(t=st(t))=="string"||t instanceof Jl?SS(this._dataReader,"WriteBatch.update",i._key,t,r,s):TS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=np(e,this._firestore);return this._mutations=this._mutations.concat(new Gl(t._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function np(n,e){if((n=st(n)).firestore!==e)throw new H(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function fd(){return new iy("serverTimestamp")}function Xj(...n){return new oy("arrayUnion",n)}function Yj(...n){return new ay("arrayRemove",n)}function Zj(n){return new cy("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(n){return Zl(n=In(n,Jr)),new Qj(n,e=>Xh(n,e))}(function(e,t=!0){(function(s){Xa=s})(bo),Zi(new Qs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Jr(new EO(r.getProvider("auth-internal")),new SO(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),mr(ew,tw,e),mr(ew,tw,"esm2017")})();var ur=function(){return ur=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ur.apply(this,arguments)};function tu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function e2(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function VS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t2=VS,MS=new Ul("auth","Firebase",VS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=new fg("@firebase/auth");function n2(n,...e){Gd.logLevel<=je.WARN&&Gd.warn(`Auth (${bo}): ${n}`,...e)}function pd(n,...e){Gd.logLevel<=je.ERROR&&Gd.error(`Auth (${bo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(n,...e){throw _y(n,...e)}function _r(n,...e){return _y(n,...e)}function jS(n,e,t){const r=Object.assign(Object.assign({},t2()),{[e]:t});return new Ul("auth","Firebase",r).create(e,{appName:n.name})}function Wr(n){return jS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _y(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return MS.create(n,...e)}function xe(n,e,...t){if(!n)throw _y(e,...t)}function $r(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pd(e),new Error(e)}function es(n,e){n||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function r2(){return Eb()==="http:"||Eb()==="https:"}function Eb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r2()||J1()||"connection"in navigator)?navigator.onLine:!0}function i2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=Y1()||eD()}get(){return s2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(n,e){es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c2=new nu(3e4,6e4);function fi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function as(n,e,t,r,s={}){return FS(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Bl(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},i);return Z1()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&ci(n.emulatorConfig.host)&&(u.credentials="include"),LS.fetch()(await US(n,n.config.apiHost,t,a),u)})}async function FS(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},o2),e);try{const s=new u2(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zu(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw zu(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw zu(n,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jS(n,h,u);Xn(n,h)}}catch(s){if(s instanceof Tr)throw s;Xn(n,"network-request-failed",{message:String(s)})}}async function ru(n,e,t,r,s={}){const i=await as(n,e,t,r,s);return"mfaPendingCredential"in i&&Xn(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function US(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?wy(n.config,s):`${n.config.apiScheme}://${s}`;return a2.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function l2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class u2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_r(this.auth,"network-request-failed")),c2.get())})}}function zu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=_r(n,e,r);return s.customData._tokenResponse=t,s}function Ib(n){return n!==void 0&&n.enterprise!==void 0}class d2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function h2(n,e){return as(n,"GET","/v2/recaptchaConfig",fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(n,e){return as(n,"POST","/v1/accounts:delete",e)}async function Qd(n,e){return as(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function p2(n,e=!1){const t=st(n),r=await t.getIdToken(e),s=by(r);xe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:tl(rp(s.auth_time)),issuedAtTime:tl(rp(s.iat)),expirationTime:tl(rp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function rp(n){return Number(n)*1e3}function by(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pd("JWT malformed, contained fewer than 3 sections"),null;try{const s=XE(t);return s?JSON.parse(s):(pd("Failed to decode base64 JWT payload"),null)}catch(s){return pd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Tb(n){const e=by(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Tr&&m2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function m2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Fa(n,Qd(t,{idToken:r}));xe(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?BS(i.providerUserInfo):[],a=v2(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Im(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function y2(n){const e=st(n);await Xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v2(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function BS(n){return n.map(e=>{var{providerId:t}=e,r=tu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(n,e){const t=await FS(n,{},async()=>{const r=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await US(n,s,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return n.emulatorConfig&&ci(n.emulatorConfig.host)&&(c.credentials="include"),LS.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function w2(n,e){return as(n,"POST","/v2/accounts:revokeToken",fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=Tb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await _2(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new sa;return r&&(xe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(xe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sa,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,i=tu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new g2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Im(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Fa(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return p2(this,e)}reload(){return y2(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Wr(this.auth));const e=await this.getIdToken();return await Fa(this,f2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,i,o,a,c,u,h;const f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(s=t.email)!==null&&s!==void 0?s:void 0,v=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,I=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:P,isAnonymous:N,providerData:j,stsTokenManager:T}=t;xe(S&&T,e,"internal-error");const E=sa.fromJSON(this.name,T);xe(typeof S=="string",e,"internal-error"),gs(f,e.name),gs(m,e.name),xe(typeof P=="boolean",e,"internal-error"),xe(typeof N=="boolean",e,"internal-error"),gs(v,e.name),gs(x,e.name),gs(y,e.name),gs(_,e.name),gs(I,e.name),gs(b,e.name);const C=new Gn({uid:S,auth:e,email:m,emailVerified:P,displayName:f,isAnonymous:N,photoURL:x,phoneNumber:v,tenantId:y,stsTokenManager:E,createdAt:I,lastLoginAt:b});return j&&Array.isArray(j)&&(C.providerData=j.map(D=>Object.assign({},D))),_&&(C._redirectEventId=_),C}static async _fromIdTokenResponse(e,t,r=!1){const s=new sa;s.updateFromServerResponse(t);const i=new Gn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xd(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];xe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?BS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new sa;a.updateFromIdToken(r);const c=new Gn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Im(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Map;function zr(n){es(n instanceof Function,"Expected a class definition");let e=Sb.get(n);return e?(es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Sb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$S.type="NONE";const Ab=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n,e,t){return`firebase:${n}:${e}:${t}`}class ia{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=md(this.userKey,s.apiKey,i),this.fullPersistenceKey=md("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qd(this.auth,{idToken:e}).catch(()=>{});return t?Gn._fromGetAccountInfoResponse(this.auth,t,e):null}return Gn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ia(zr(Ab),e,r);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||zr(Ab);const o=md(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Qd(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Gn._fromGetAccountInfoResponse(e,m,h)}else f=Gn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ia(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ia(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GS(e))return"Blackberry";if(QS(e))return"Webos";if(qS(e))return"Safari";if((e.includes("chrome/")||WS(e))&&!e.includes("edge/"))return"Chrome";if(HS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zS(n=Dt()){return/firefox\//i.test(n)}function qS(n=Dt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WS(n=Dt()){return/crios\//i.test(n)}function KS(n=Dt()){return/iemobile/i.test(n)}function HS(n=Dt()){return/android/i.test(n)}function GS(n=Dt()){return/blackberry/i.test(n)}function QS(n=Dt()){return/webos/i.test(n)}function xy(n=Dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function b2(n=Dt()){var e;return xy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function x2(){return tD()&&document.documentMode===10}function XS(n=Dt()){return xy(n)||HS(n)||QS(n)||GS(n)||/windows phone/i.test(n)||KS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n,e=[]){let t;switch(n){case"Browser":t=Rb(Dt());break;case"Worker":t=`${Rb(Dt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(n,e={}){return as(n,"GET","/v2/passwordPolicy",fi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=6;class S2{constructor(e){var t,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:T2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cb(this),this.idTokenSubscription=new Cb(this),this.beforeStateQueue=new E2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zr(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ia.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qd(this,{idToken:e}),r=await Gn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Wr(this));const t=e?st(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await I2(this),t=new S2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ul("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await w2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zr(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await ia.create(this,[zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&n2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function So(n){return st(n)}class Cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=aD(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R2(n){Yh=n}function ZS(n){return Yh.loadJS(n)}function C2(){return Yh.recaptchaEnterpriseScript}function P2(){return Yh.gapiScript}function N2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class k2{constructor(){this.enterprise=new D2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class D2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const O2="recaptcha-enterprise",JS="NO_RECAPTCHA";class V2{constructor(e){this.type=O2,this.auth=So(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{h2(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new d2(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;Ib(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(JS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new k2().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!t&&Ib(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=C2();c.length!==0&&(c+=a),ZS(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Pb(n,e,t,r=!1,s=!1){const i=new V2(n);let o;if(s)o=JS;else try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Tm(n,e,t,r,s){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Pb(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Pb(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n,e){const t=Th(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Qr(i,e??{}))return s;Xn(s,"already-initialized")}return t.initialize({options:e})}function j2(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(zr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function L2(n,e,t){const r=So(n);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=e0(e),{host:o,port:a}=F2(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Qr(u,r.config.emulator)&&Qr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ci(o)?(hg(`${i}//${o}${c}`),tI("Auth",!0)):U2()}function e0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function F2(n){const e=e0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Nb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Nb(o)}}}function Nb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function U2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function B2(n,e){return as(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(n,e){return ru(n,"POST","/v1/accounts:signInWithPassword",fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(n,e){return ru(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,e))}async function q2(n,e){return ru(n,"POST","/v1/accounts:signInWithEmailLink",fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Ey{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new xl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new xl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,t,"signInWithPassword",$2);case"emailLink":return z2(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,r,"signUpPassword",B2);case"emailLink":return q2(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(n,e){return ru(n,"POST","/v1/accounts:signInWithIdp",fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="http://localhost";class lo extends Ey{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,i=tu(t,["providerId","signInMethod"]);if(!r||!s)return null;const o=new lo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return oa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,oa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oa(e,t)}buildRequest(){const e={requestUri:W2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function H2(n){const e=Dc(Oc(n)).link,t=e?Dc(Oc(e)).deep_link_id:null,r=Dc(Oc(n)).deep_link_id;return(r?Dc(Oc(r)).link:null)||r||t||e||n}class Iy{constructor(e){var t,r,s,i,o,a;const c=Dc(Oc(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=K2((s=c.mode)!==null&&s!==void 0?s:null);xe(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=H2(e);try{return new Iy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.providerId=tc.PROVIDER_ID}static credential(e,t){return xl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Iy.parseLink(t);return xe(r,"argument-error"),xl._fromEmailAndCode(e,r.code,r.tenantId)}}tc.PROVIDER_ID="password";tc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends t0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends su{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return lo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Is.credential(t,r)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends su{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends su{constructor(){super("twitter.com")}static credential(e,t){return lo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ss.credential(t,r)}catch{return null}}}Ss.TWITTER_SIGN_IN_METHOD="twitter.com";Ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,e){return ru(n,"POST","/v1/accounts:signUp",fi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await Gn._fromIdTokenResponse(e,r,s),o=kb(r);return new uo({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=kb(r);return new uo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function kb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends Tr{constructor(e,t,r,s){var i;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Yd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Yd(e,t,r,s)}}function n0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Yd._fromErrorAndOperation(n,i,e,r):i})}async function Q2(n,e,t=!1){const r=await Fa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return uo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(n,e,t=!1){const{auth:r}=n;if(_n(r.app))return Promise.reject(Wr(r));const s="reauthenticate";try{const i=await Fa(n,n0(r,s,e,n),t);xe(i.idToken,r,"internal-error");const o=by(i.idToken);xe(o,r,"internal-error");const{sub:a}=o;return xe(n.uid===a,r,"user-mismatch"),uo._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0(n,e,t=!1){if(_n(n.app))return Promise.reject(Wr(n));const r="signIn",s=await n0(n,r,e),i=await uo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function Y2(n,e){return r0(So(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(n){const e=So(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z2(n,e,t){if(_n(n.app))return Promise.reject(Wr(n));const r=So(n),o=await Tm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",G2).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&s0(n),c}),a=await uo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function J2(n,e,t){return _n(n.app)?Promise.reject(Wr(n)):Y2(st(n),tc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s0(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(n,e){return as(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=st(n),i={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Fa(r,eL(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function nL(n,e,t,r){return st(n).onIdTokenChanged(e,t,r)}function rL(n,e,t){return st(n).beforeAuthStateChanged(e,t)}function sL(n,e,t,r){return st(n).onAuthStateChanged(e,t,r)}function iL(n){return st(n).signOut()}const Zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zd,"1"),this.storage.removeItem(Zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=1e3,aL=10;class o0 extends i0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);x2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,aL):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},oL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o0.type="LOCAL";const cL=o0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends i0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}a0.type="SESSION";const c0=a0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Zh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(t.origin,i)),c=await lL(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=Ty("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function dL(n){wr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function hL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function pL(){return l0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="firebaseLocalStorageDb",mL=1,Jd="firebaseLocalStorage",d0="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jh(n,e){return n.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function gL(){const n=indexedDB.deleteDatabase(u0);return new iu(n).toPromise()}function Sm(){const n=indexedDB.open(u0,mL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Jd,{keyPath:d0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Jd)?e(r):(r.close(),await gL(),e(await Sm()))})})}async function Db(n,e,t){const r=Jh(n,!0).put({[d0]:e,value:t});return new iu(r).toPromise()}async function yL(n,e){const t=Jh(n,!1).get(e),r=await new iu(t).toPromise();return r===void 0?null:r.value}function Ob(n,e){const t=Jh(n,!0).delete(e);return new iu(t).toPromise()}const vL=800,_L=3;class h0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_L)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zh._getInstance(pL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await hL(),!this.activeServiceWorker)return;this.sender=new uL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sm();return await Db(e,Zd,"1"),await Ob(e,Zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Db(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ob(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jh(s,!1).getAll();return new iu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h0.type="LOCAL";const wL=h0;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n,e){return e?zr(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy extends Ey{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xL(n){return r0(n.auth,new Sy(n),n.bypassAuthState)}function EL(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),X2(t,new Sy(n),n.bypassAuthState)}async function IL(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Q2(t,new Sy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xL;case"linkViaPopup":case"linkViaRedirect":return IL;case"reauthViaPopup":case"reauthViaRedirect":return EL;default:Xn(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new nu(2e3,1e4);class Jo extends f0{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Jo.currentPopupAction&&Jo.currentPopupAction.cancel(),Jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TL.get())};e()}}Jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="pendingRedirect",gd=new Map;class AL extends f0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gd.get(this.auth._key());if(!e){try{const r=await RL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gd.set(this.auth._key(),e)}return this.bypassAuthState||gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RL(n,e){const t=NL(e),r=PL(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function CL(n,e){gd.set(n._key(),e)}function PL(n){return zr(n._redirectPersistence)}function NL(n){return md(SL,n.config.apiKey,n.name)}async function kL(n,e,t=!1){if(_n(n.app))return Promise.reject(Wr(n));const r=So(n),s=bL(r,e),o=await new AL(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=10*60*1e3;class OL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!p0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_r(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vb(e))}saveEventToCache(e){this.cachedEventUids.add(Vb(e)),this.lastProcessedEventTime=Date.now()}}function Vb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function p0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(n,e={}){return as(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LL=/^https?/;async function FL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ML(n);for(const t of e)try{if(UL(t))return}catch{}Xn(n,"unauthorized-domain")}function UL(n){const e=Em(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!LL.test(t))return!1;if(jL.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new nu(3e4,6e4);function Mb(){const n=wr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $L(n){return new Promise((e,t)=>{var r,s,i;function o(){Mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mb(),t(_r(n,"network-request-failed"))},timeout:BL.get()})}if(!((s=(r=wr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wr().gapi)===null||i===void 0)&&i.load)o();else{const a=N2("iframefcb");return wr()[a]=()=>{gapi.load?o():t(_r(n,"network-request-failed"))},ZS(`${P2()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw yd=null,e})}let yd=null;function zL(n){return yd=yd||$L(n),yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new nu(5e3,15e3),WL="__/auth/iframe",KL="emulator/auth/iframe",HL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QL(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wy(e,KL):`https://${n.config.authDomain}/${WL}`,r={apiKey:e.apiKey,appName:n.name,v:bo},s=GL.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Bl(r).slice(1)}`}async function XL(n){const e=await zL(n),t=wr().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:QL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_r(n,"network-request-failed"),a=wr().setTimeout(()=>{i(o)},qL.get());function c(){wr().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZL=500,JL=600,eF="_blank",tF="http://localhost";class jb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nF(n,e,t,r=ZL,s=JL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},YL),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Dt().toLowerCase();t&&(a=WS(u)?eF:t),zS(u)&&(e=e||tF,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(b2(u)&&a!=="_self")return rF(e||"",a),new jb(null);const f=window.open(e||"",a,h);xe(f,n,"popup-blocked");try{f.focus()}catch{}return new jb(f)}function rF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="__/auth/handler",iF="emulator/auth/handler",oF=encodeURIComponent("fac");async function Lb(n,e,t,r,s,i){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:bo,eventId:s};if(e instanceof t0){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",oD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof su){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await n._getAppCheckToken(),u=c?`#${oF}=${encodeURIComponent(c)}`:"";return`${aF(n)}?${Bl(a).slice(1)}${u}`}function aF({config:n}){return n.emulator?wy(n,iF):`https://${n.authDomain}/${sF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class cF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c0,this._completeRedirectFn=kL,this._overrideRedirectResult=CL}async _openPopup(e,t,r,s){var i;es((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Lb(e,t,r,Em(),s);return nF(e,o,Ty())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await Lb(e,t,r,Em(),s);return dL(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(es(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XL(e),r=new OL(e);return t.register("authEvent",s=>(xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sp,{type:sp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[sp];o!==void 0&&t(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=FL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XS()||qS()||xy()}}const lF=cF;var Fb="@firebase/auth",Ub="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hF(n){Zi(new Qs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YS(n)},u=new A2(r,s,i,c);return j2(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zi(new Qs("auth-internal",e=>{const t=So(e.getProvider("auth").getImmediate());return(r=>new uF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(Fb,Ub,dF(n)),mr(Fb,Ub,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=5*60,pF=eI("authIdTokenMaxAge")||fF;let Bb=null;const mF=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>pF)return;const s=t==null?void 0:t.token;Bb!==s&&(Bb=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gF(n=mg()){const e=Th(n,"auth");if(e.isInitialized())return e.getImmediate();const t=M2(n,{popupRedirectResolver:lF,persistence:[wL,cL,c0]}),r=eI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=mF(i.toString());rL(t,o,()=>o(t.currentUser)),nL(t,a=>o(a))}}const s=ZE("auth");return s&&L2(t,`http://${s}`),t}function yF(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}R2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=_r("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",yF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hF("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="firebasestorage.googleapis.com",g0="storageBucket",vF=2*60*1e3,_F=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends Tr{constructor(e,t,r=0){super(ip(e),`Firebase Storage: ${t} (${ip(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _t;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_t||(_t={}));function ip(n){return"storage/"+n}function Ay(){const n="An unknown error occurred, please check the error payload for server response.";return new wt(_t.UNKNOWN,n)}function wF(n){return new wt(_t.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function bF(n){return new wt(_t.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(_t.UNAUTHENTICATED,n)}function EF(){return new wt(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IF(n){return new wt(_t.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function TF(){return new wt(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SF(){return new wt(_t.CANCELED,"User canceled the upload/download.")}function AF(n){return new wt(_t.INVALID_URL,"Invalid URL '"+n+"'.")}function RF(n){return new wt(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function CF(){return new wt(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+g0+"' property when initializing the app?")}function PF(){return new wt(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NF(){return new wt(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kF(n){return new wt(_t.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Am(n){return new wt(_t.INVALID_ARGUMENT,n)}function y0(){return new wt(_t.APP_DELETED,"The Firebase app was deleted.")}function DF(n){return new wt(_t.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nl(n,e){return new wt(_t.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ac(n){throw new wt(_t.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=En.makeFromUrl(e,t)}catch{return new En(e,"")}if(r.path==="")return r;throw RF(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},y=t===m0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,_="([^?#]*)",I=new RegExp(`^https?://${y}/${s}/${_}`,"i"),S=[{regex:a,indices:c,postModify:i},{regex:v,indices:x,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<S.length;P++){const N=S[P],j=N.regex.exec(e);if(j){const T=j[N.indices.bucket];let E=j[N.indices.path];E||(E=""),r=new En(T,E),N.postModify(r);break}}if(r==null)throw AF(e);return r}}class OF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(n,e,t){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(..._){u||(u=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,n(v,c())},_)}function m(){i&&clearTimeout(i)}function v(_,...I){if(u){m();return}if(_){m(),h.call(null,_,...I);return}if(c()||o){m(),h.call(null,_,...I);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let x=!1;function y(_){x||(x=!0,m(),!u&&(s!==null?(_||(a=2),clearTimeout(s),f(0)):_||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,y(!0)},t),y}function MF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(n){return n!==void 0}function LF(n){return typeof n=="object"&&!Array.isArray(n)}function Ry(n){return typeof n=="string"||n instanceof String}function $b(n){return Cy()&&n instanceof Blob}function Cy(){return typeof Blob<"u"}function zb(n,e,t,r){if(r<e)throw Am(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Am(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function v0(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Qi;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qi||(Qi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,t,r,s,i,o,a,c,u,h,f,m=!0,v=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,y)=>{this.resolve_=x,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Qi.NO_ERROR,c=i.getStatus();if(!a||FF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Qi.ABORT;r(!1,new qu(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new qu(u,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());jF(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=Ay();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?y0():SF();o(c)}else{const c=TF();o(c)}};this.canceled_?t(!1,new qu(!1,null,!0)):this.backoffId_=VF(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qu{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function BF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function $F(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function qF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function WF(n,e,t,r,s,i,o=!0,a=!1){const c=v0(n.urlParams),u=n.url+c,h=Object.assign({},n.headers);return zF(h,e),BF(h,t),$F(h,i),qF(h,r),new UF(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HF(...n){const e=KF();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Cy())return new Blob(n);throw new wt(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(n){if(typeof atob>"u")throw kF("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class op{constructor(e,t){this.data=e,this.contentType=t||null}}function XF(n,e){switch(n){case fr.RAW:return new op(_0(e));case fr.BASE64:case fr.BASE64URL:return new op(w0(n,e));case fr.DATA_URL:return new op(ZF(e),JF(e))}throw Ay()}function _0(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=n.charCodeAt(++t);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function YF(n){let e;try{e=decodeURIComponent(n)}catch{throw nl(fr.DATA_URL,"Malformed data URL.")}return _0(e)}function w0(n,e){switch(n){case fr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw nl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw nl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=QF(e)}catch(s){throw s.message.includes("polyfill")?s:nl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class b0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw nl(fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=e4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ZF(n){const e=new b0(n);return e.base64?w0(fr.BASE64,e.rest):YF(e.rest)}function JF(n){return new b0(n).contentType}function e4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){let r=0,s="";$b(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if($b(this.data_)){const r=this.data_,s=GF(r,e,t);return s===null?null:new As(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new As(r,!0)}}static getBlob(...e){if(Cy()){const t=e.map(r=>r instanceof As?r.data_:r);return new As(HF.apply(null,t))}else{const t=e.map(o=>Ry(o)?XF(fr.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new As(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n){let e;try{e=JSON.parse(n)}catch{return null}return LF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function n4(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function E0(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n,e){return e}class Zt{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||r4}}let Wu=null;function s4(n){return!Ry(n)||n.length<2?n:E0(n)}function I0(){if(Wu)return Wu;const n=[];n.push(new Zt("bucket")),n.push(new Zt("generation")),n.push(new Zt("metageneration")),n.push(new Zt("name","fullPath",!0));function e(i,o){return s4(o)}const t=new Zt("name");t.xform=e,n.push(t);function r(i,o){return o!==void 0?Number(o):o}const s=new Zt("size");return s.xform=r,n.push(s),n.push(new Zt("timeCreated")),n.push(new Zt("updated")),n.push(new Zt("md5Hash",null,!0)),n.push(new Zt("cacheControl",null,!0)),n.push(new Zt("contentDisposition",null,!0)),n.push(new Zt("contentEncoding",null,!0)),n.push(new Zt("contentLanguage",null,!0)),n.push(new Zt("contentType",null,!0)),n.push(new Zt("metadata","customMetadata",!0)),Wu=n,Wu}function i4(n,e){function t(){const r=n.bucket,s=n.fullPath,i=new En(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function o4(n,e,t){const r={};r.type="file";const s=t.length;for(let i=0;i<s;i++){const o=t[i];r[o.local]=o.xform(r,e[o.server])}return i4(r,n),r}function T0(n,e,t){const r=x0(e);return r===null?null:o4(n,r,t)}function a4(n,e,t,r){const s=x0(e);if(s===null||!Ry(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=n.bucket,f=n.fullPath,m="/b/"+o(h)+"/o/"+o(f),v=Py(m,t,r),x=v0({alt:"media",token:u});return v+x})[0]}function c4(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class S0{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(n){if(!n)throw Ay()}function l4(n,e){function t(r,s){const i=T0(n,s,e);return A0(i!==null),i}return t}function u4(n,e){function t(r,s){const i=T0(n,s,e);return A0(i!==null),a4(i,s,n.host,n._protocol)}return t}function R0(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=EF():s=xF():t.getStatus()===402?s=bF(n.bucket):t.getStatus()===403?s=IF(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function d4(n){const e=R0(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=wF(n.path)),i.serverResponse=s.serverResponse,i}return t}function h4(n,e,t){const r=e.fullServerUrl(),s=Py(r,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,a=new S0(s,i,u4(n,t),o);return a.errorHandler=d4(e),a}function f4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function p4(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=f4(null,e)),r}function m4(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let P=0;P<2;P++)S=S+Math.random().toString().slice(2);return S}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const u=p4(e,r,s),h=c4(u,t),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",v=As.getBlob(f,r,m);if(v===null)throw PF();const x={name:u.fullPath},y=Py(i,n.host,n._protocol),_="POST",I=n.maxUploadRetryTime,b=new S0(y,_,l4(n,t),I);return b.urlParams=x,b.headers=o,b.body=v.uploadData(),b.errorHandler=R0(e),b}class g4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,i){if(this.sent_)throw Ac("cannot .send() more than once");if(ci(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class y4 extends g4{initXhr(){this.xhr_.responseType="text"}}function C0(){return new y4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t){this._service=e,t instanceof En?this._location=t:this._location=En.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ho(e,t)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return E0(this._location.path)}get storage(){return this._service}get parent(){const e=t4(this._location.path);if(e===null)return null;const t=new En(this._location.bucket,e);return new ho(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw DF(e)}}function v4(n,e,t){n._throwIfRoot("uploadBytes");const r=m4(n.storage,n._location,I0(),new As(e,!0),t);return n.storage.makeRequestWithTokens(r,C0).then(s=>({metadata:s,ref:n}))}function _4(n){n._throwIfRoot("getDownloadURL");const e=h4(n.storage,n._location,I0());return n.storage.makeRequestWithTokens(e,C0).then(t=>{if(t===null)throw NF();return t})}function w4(n,e){const t=n4(n._location.path,e),r=new En(n._location.bucket,t);return new ho(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(n){return/^[A-Za-z]+:\/\//.test(n)}function x4(n,e){return new ho(n,e)}function P0(n,e){if(n instanceof Ny){const t=n;if(t._bucket==null)throw CF();const r=new ho(t,t._bucket);return e!=null?P0(r,e):r}else return e!==void 0?w4(n,e):n}function E4(n,e){if(e&&b4(e)){if(n instanceof Ny)return x4(n,e);throw Am("To use ref(service, url), the first argument must be a Storage instance.")}else return P0(n,e)}function qb(n,e){const t=e==null?void 0:e[g0];return t==null?null:En.makeFromBucketSpec(t,n)}function I4(n,e,t,r={}){n.host=`${e}:${t}`;const s=ci(e);s&&(hg(`https://${n.host}/b`),tI("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:G1(i,n.app.options.projectId))}class Ny{constructor(e,t,r,s,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=m0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vF,this._maxUploadRetryTime=_F,this._requests=new Set,s!=null?this._bucket=En.makeFromBucketSpec(s,this._host):this._bucket=qb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=qb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ho(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new OF(y0());{const o=WF(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Wb="@firebase/storage",Kb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="storage";function T4(n,e,t){return n=st(n),v4(n,e,t)}function S4(n){return n=st(n),_4(n)}function A4(n,e){return n=st(n),E4(n,e)}function R4(n=mg(),e){n=st(n);const r=Th(n,N0).getImmediate({identifier:e}),s=K1("storage");return s&&C4(r,...s),r}function C4(n,e,t,r={}){I4(n,e,t,r)}function P4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Ny(t,r,s,e,bo)}function N4(){Zi(new Qs(N0,P4,"PUBLIC").setMultipleInstances(!0)),mr(Wb,Kb,""),mr(Wb,Kb,"esm2017")}N4();const k0={apiKey:"AIzaSyDD17WDp1lwMtD9qeubYD0NJ0VbdQ0P1jo",authDomain:"fir-config-12a50.firebaseapp.com",projectId:"fir-config-12a50",storageBucket:"fir-config-12a50.firebasestorage.app",messagingSenderId:"580819717100",appId:"1:580819717100:web:38d3a481dd722eeb280ec9",measurementId:"G-DN1JZER9ZL"},ap=Object.entries(k0).filter(([n,e])=>!e&&n!=="measurementId").map(([n])=>n);if(ap.length>0)throw console.error("Erro de Configurao Firebase: Faltam as seguintes variveis de ambiente:",ap),new Error(`Configurao Firebase em falta: ${ap.join(", ")}. Verifique o ficheiro .env`);const ky=cO().length?mg():cI(k0),jt=Pj(ky,{localCache:qj({tabManager:Gj()})});let qn=null;if(typeof window<"u")try{qn=gF(ky)}catch{}const k4=R4(ky),D0=p.createContext(void 0);function D4({children:n}){const[e,t]=p.useState(null),[r,s]=p.useState(!0),i=p.useCallback(async m=>{const v=yn(jt,"users",m.uid),x=await bm(v);if(x.exists()){const y=x.data();t({uid:m.uid,email:m.email,name:y.username,favorites:y.favorites||[],preferredBrands:y.preferredBrands||[],preferredSizes:y.preferredSizes||[],walletBalance:y.walletBalance||0,wallet:y.wallet?{available:y.wallet.available??0,pending:y.wallet.pending??0}:void 0,bio:y.bio,location:y.location,phone:y.phone,photoURL:y.photoURL,iban:y.iban,createdAt:y.createdAt})}else t(null)},[]),o=p.useCallback(async()=>{if(!qn)return;const m=qn.currentUser;m&&await i(m)},[i]);p.useEffect(()=>{if(!qn){s(!1);return}const m=sL(qn,async v=>{v?await i(v):t(null),s(!1)});return()=>m()},[i]);const a=p.useCallback(async()=>{if(qn)try{await iL(qn)}catch(m){console.error("Erro ao fazer logout:",m)}},[]),c=p.useCallback(async m=>{if(!e)return;const v=yn(jt,"users",e.uid),x=e.favorites.includes(m);try{x?(await ra(v,{favorites:Yj(m)}),t(y=>y?{...y,favorites:y.favorites.filter(_=>_!==m)}:null)):(await ra(v,{favorites:Xj(m)}),t(y=>y?{...y,favorites:[...y.favorites,m]}:null))}catch(y){throw console.error("ERRO AO ATUALIZAR FAVORITOS:",y),y}},[e]),u=p.useCallback(async m=>{if(!e)return;const v=yn(jt,"users",e.uid);try{await vy(v,m,{merge:!0}),t(x=>x?{...x,...m}:null)}catch(x){throw console.error("Erro ao atualizar preferncias:",x),x}},[e]),h=p.useCallback(async m=>{if(!e)return;const v=yn(jt,"users",e.uid);try{await ra(v,{walletBalance:Zj(m)}),t(x=>x?{...x,walletBalance:(x.walletBalance||0)+m}:null)}catch(x){throw console.error("Erro ao adicionar ao saldo da carteira:",x),x}},[e]),f=p.useMemo(()=>({user:e,loading:r,logout:a,toggleFavorite:c,updateUserPreferences:u,addToWallet:h,refetchUser:o}),[e,r,a,c,u,h,o]);return d.jsx(D0.Provider,{value:f,children:n})}function nc(){const n=p.useContext(D0);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function Hb(n){if(!n.name||n.name.length<3||n.name.length>100)throw new Error("Nome do produto invlido (3-100 caracteres)");if(!n.description||n.description.length<10||n.description.length>2e3)throw new Error("Descrio invlida (10-2000 caracteres)");if(!n.price||n.price<=0||n.price>1e4)throw new Error("Preo invlido (0.01 - 10000 EUR)");if(!n.imageUrls||n.imageUrls.length===0||n.imageUrls.length>10)throw new Error("Imagens invlidas (1-10 imagens)");if(!n.quantity||n.quantity<1||n.quantity>100)throw new Error("Quantidade invlida (1-100)");return!0}const ou={async getById(n){try{const e=yn(jt,"products",n),t=await bm(e);return t.exists()?{id:t.id,...t.data()}:null}catch(e){throw console.error("Erro ao buscar produto:",e),e}},async list(n={}){try{const{limitCount:e=12,lastDocId:t=null,filters:r=[],orderByField:s="createdAt",orderDirection:i="desc"}=n,o=Jc(jt,"products");let a=el(o,...r,dd(s,i),tp(e));if(t){const m=yn(jt,"products",t),v=await bm(m);v.exists()&&(a=el(o,...r,dd(s,i),jj(v),tp(e)))}const c=await xm(a),u=c.docs.map(m=>({id:m.id,...m.data()})),h=c.docs[c.docs.length-1],f=h?h.id:null;return{products:u,lastDocId:f}}catch(e){throw console.error("Erro ao listar produtos:",e),e}},async create(n){try{Hb(n);const e=yn(Jc(jt,"products"));return await vy(e,{...n,status:n.status||"disponvel",createdAt:fd()}),e.id}catch(e){throw console.error("Erro ao criar produto:",e),e}},async update(n,e){try{Object.keys(e).length>0&&Hb(e);const t=yn(jt,"products",n);await ra(t,{...e,updatedAt:fd()})}catch(t){throw console.error("Erro ao atualizar produto:",t),t}},async markAsSold(n){try{const e=yn(jt,"products",n);await ra(e,{status:"vendido",updatedAt:fd()})}catch(e){throw console.error("Erro ao marcar como vendido:",e),e}},async delete(n){try{const e=yn(jt,"products",n);await Bj(e)}catch(e){throw console.error("Erro ao apagar produto:",e),e}},async getByUser(n,e=20){try{const t=Jc(jt,"products"),r=el(t,ir("userId","==",n),dd("createdAt","desc"),tp(e));return(await xm(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(t){throw console.error("Erro ao buscar produtos do utilizador:",t),t}}},wn={all:["products"],lists:()=>[...wn.all,"list"],list:n=>[...wn.lists(),n],details:()=>[...wn.all,"detail"],detail:n=>[...wn.details(),n],byUser:n=>[...wn.all,"user",n]};function O4(n={}){const{filters:e,limitPerPage:t=12,enabled:r=!0}=n,s=()=>{const i=[];return e!=null&&e.status?i.push(ir("status","==",e.status)):i.push(ir("status","==","disponvel")),e!=null&&e.category&&i.push(ir("category","==",e.category)),(e==null?void 0:e.minPrice)!==void 0&&e.minPrice>0&&i.push(ir("price",">=",e.minPrice)),(e==null?void 0:e.maxPrice)!==void 0&&e.maxPrice<1/0&&i.push(ir("price","<=",e.maxPrice)),e!=null&&e.condition&&i.push(ir("condition","==",e.condition)),e!=null&&e.brand&&i.push(ir("brand","==",e.brand)),i};return j1({queryKey:wn.list(e),queryFn:async({pageParam:i})=>{const o=s();return await ou.list({filters:o,limitCount:t,lastDocId:i})},initialPageParam:null,getNextPageParam:i=>i.lastDocId||void 0,staleTime:1e3*60*5,gcTime:1e3*60*30,enabled:r})}function V4(){const n=Qa();return Eh({mutationFn:async e=>await ou.create(e),onSuccess:()=>{n.invalidateQueries({queryKey:wn.lists()})}})}function M4(){const n=Qa();return Eh({mutationFn:async({productId:e,updates:t})=>await ou.update(e,t),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:wn.lists()}),n.invalidateQueries({queryKey:wn.detail(t.productId)})}})}function j4(){const n=Qa();return Eh({mutationFn:async e=>await ou.markAsSold(e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:wn.lists()}),n.invalidateQueries({queryKey:wn.detail(t)})}})}function L4(){const n=Qa();return Eh({mutationFn:async e=>await ou.delete(e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:wn.lists()}),n.removeQueries({queryKey:wn.detail(t)})}})}const O0=p.createContext(void 0);function F4({children:n}){const[e]=Ha(),t=p.useMemo(()=>{const S=Number(e.get("minPrice")),P=e.get("maxPrice")==="Infinity"?void 0:Number(e.get("maxPrice")),N=e.get("category"),j=e.get("condition"),T=e.get("brand");return{category:N||void 0,minPrice:S>0?S:void 0,maxPrice:P&&P<1/0?P:void 0,condition:j||void 0,brand:T||void 0,status:"disponvel"}},[e]),{data:r,isLoading:s,isFetchingNextPage:i,hasNextPage:o,fetchNextPage:a}=O4({filters:t,limitPerPage:12}),c=V4(),u=M4(),h=L4(),f=j4(),m=p.useMemo(()=>r!=null&&r.pages?r.pages.flatMap(S=>S.products):[],[r]),v=p.useCallback(async S=>{await c.mutateAsync(S)},[c]),x=p.useCallback(async S=>{const{id:P,...N}=S;await u.mutateAsync({productId:P,updates:N})},[u]),y=p.useCallback(async S=>{await h.mutateAsync(S)},[h]),_=p.useCallback(async S=>{await f.mutateAsync(S)},[f]),I=p.useCallback(()=>{o&&!i&&a()},[o,i,a]),b=p.useMemo(()=>({products:m,loading:s,hasMoreProducts:o||!1,addProduct:v,updateProduct:x,deleteProduct:y,markAsSold:_,loadMoreProducts:I,isFetchingMore:i}),[m,s,o,v,x,y,_,I,i]);return d.jsx(O0.Provider,{value:b,children:n})}function ef(){const n=p.useContext(O0);if(n===void 0)throw new Error("useProducts must be used within a ProductProvider");return n}const U4=5,V0=p.createContext(void 0);function B4({children:n}){const[e,t]=p.useState([]),[r,s]=p.useState(!1),i=p.useCallback(({product:_,quantity:I,size:b})=>{if(t(S=>{const P=`${_.id}-${b||""}`;return S.find(j=>j.id===P)?S.map(j=>j.id===P?{...j,quantity:j.quantity+I}:j):[...S,{id:P,product:_,quantity:I,size:b}]}),typeof window<"u"){const S=new CustomEvent("cart:item-added",{detail:{product:_,quantity:I,size:b}});window.dispatchEvent(S)}},[]),o=p.useCallback(_=>{t(I=>I.filter(b=>b.id!==_))},[]),a=p.useCallback((_,I)=>{if(I<=0){o(_);return}t(b=>b.map(S=>S.id===_?{...S,quantity:I}:S))},[o]),c=()=>{t([]),s(!1)},u=p.useCallback(()=>{s(_=>!_)},[]);function h(){return{cartItems:e,isVerificationEnabled:r,subtotal:m,total:x}}const f=p.useMemo(()=>e.reduce((_,I)=>_+I.quantity,0),[e]),m=p.useMemo(()=>e.reduce((_,I)=>_+I.product.price*I.quantity,0),[e]),v=p.useMemo(()=>r?U4:0,[r]),x=p.useMemo(()=>m+v,[m,v]),y=p.useMemo(()=>({cartItems:e,addToCart:i,removeFromCart:o,updateItemQuantity:a,clearCart:c,cartCount:f,subtotal:m,verificationFee:v,total:x,isVerificationEnabled:r,toggleVerification:u,createSecureCheckoutPayload:h}),[e,i,o,a,c,f,m,v,x,r,u]);return d.jsx(V0.Provider,{value:y,children:n})}function M0(){const n=p.useContext(V0);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return{...n,...n&&typeof n.createSecureCheckoutPayload=="function"?{createSecureCheckoutPayload:n.createSecureCheckoutPayload}:{}}}const $4=1,z4=1e6;let cp=0;function q4(){return cp=(cp+1)%Number.MAX_SAFE_INTEGER,cp.toString()}const lp=new Map,Gb=n=>{if(lp.has(n))return;const e=setTimeout(()=>{lp.delete(n),rl({type:"REMOVE_TOAST",toastId:n})},z4);lp.set(n,e)},W4=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,$4)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Gb(t):n.toasts.forEach(r=>{Gb(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},vd=[];let _d={toasts:[]};function rl(n){_d=W4(_d,n),vd.forEach(e=>{e(_d)})}function K4({...n}){const e=q4(),t=s=>rl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>rl({type:"DISMISS_TOAST",toastId:e});return rl({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function tf(){const[n,e]=p.useState(_d);return p.useEffect(()=>(vd.push(e),()=>{const t=vd.indexOf(e);t>-1&&vd.splice(t,1)}),[n]),{...n,toast:K4,dismiss:t=>rl({type:"DISMISS_TOAST",toastId:t})}}function re(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Qb(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function cs(...n){return e=>{let t=!1;const r=n.map(s=>{const i=Qb(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Qb(n[s],null)}}}}function ke(...n){return p.useCallback(cs(...n),n)}function H4(n,e){const t=p.createContext(e),r=i=>{const{children:o,...a}=i,c=p.useMemo(()=>a,Object.values(a));return d.jsx(t.Provider,{value:c,children:o})};r.displayName=n+"Provider";function s(i){const o=p.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function Jn(n,e=[]){let t=[];function r(i,o){const a=p.createContext(o),c=t.length;t=[...t,o];const u=f=>{var I;const{scope:m,children:v,...x}=f,y=((I=m==null?void 0:m[n])==null?void 0:I[c])||a,_=p.useMemo(()=>x,Object.values(x));return d.jsx(y.Provider,{value:_,children:v})};u.displayName=i+"Provider";function h(f,m){var y;const v=((y=m==null?void 0:m[n])==null?void 0:y[c])||a,x=p.useContext(v);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=t.map(o=>p.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return p.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[r,G4(s,...e)]}function G4(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Xb(n){const e=Q4(n),t=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(Y4);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return d.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function Q4(n){const e=p.forwardRef((t,r)=>{const{children:s,...i}=t;if(p.isValidElement(s)){const o=J4(s),a=Z4(i,s.props);return s.type!==p.Fragment&&(a.ref=r?cs(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var X4=Symbol("radix.slottable");function Y4(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===X4}function Z4(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function J4(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function au(n){const e=n+"CollectionProvider",[t,r]=Jn(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:_,children:I}=y,b=we.useRef(null),S=we.useRef(new Map).current;return d.jsx(s,{scope:_,itemMap:S,collectionRef:b,children:I})};o.displayName=e;const a=n+"CollectionSlot",c=Xb(a),u=we.forwardRef((y,_)=>{const{scope:I,children:b}=y,S=i(a,I),P=ke(_,S.collectionRef);return d.jsx(c,{ref:P,children:b})});u.displayName=a;const h=n+"CollectionItemSlot",f="data-radix-collection-item",m=Xb(h),v=we.forwardRef((y,_)=>{const{scope:I,children:b,...S}=y,P=we.useRef(null),N=ke(_,P),j=i(h,I);return we.useEffect(()=>(j.itemMap.set(P,{ref:P,...S}),()=>void j.itemMap.delete(P))),d.jsx(m,{[f]:"",ref:N,children:b})});v.displayName=h;function x(y){const _=i(n+"CollectionConsumer",y);return we.useCallback(()=>{const b=_.collectionRef.current;if(!b)return[];const S=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((j,T)=>S.indexOf(j.ref.current)-S.indexOf(T.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:v},x,r]}function eU(n){const e=tU(n),t=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(rU);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return d.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function tU(n){const e=p.forwardRef((t,r)=>{const{children:s,...i}=t;if(p.isValidElement(s)){const o=iU(s),a=sU(i,s.props);return s.type!==p.Fragment&&(a.ref=r?cs(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var nU=Symbol("radix.slottable");function rU(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===nU}function sU(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function iU(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var oU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ee=oU.reduce((n,e)=>{const t=eU(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Dy(n,e){n&&Ll.flushSync(()=>n.dispatchEvent(e))}function fn(n){const e=p.useRef(n);return p.useEffect(()=>{e.current=n}),p.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function aU(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var cU="DismissableLayer",Rm="dismissableLayer.update",lU="dismissableLayer.pointerDownOutside",uU="dismissableLayer.focusOutside",Yb,j0=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cu=p.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,u=p.useContext(j0),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=p.useState({}),x=ke(e,T=>f(T)),y=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),I=y.indexOf(_),b=h?y.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,P=b>=I,N=hU(T=>{const E=T.target,C=[...u.branches].some(D=>D.contains(E));!P||C||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},m),j=fU(T=>{const E=T.target;[...u.branches].some(D=>D.contains(E))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},m);return aU(T=>{b===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},m),p.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Yb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Zb(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Yb)}},[h,m,t,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Zb())},[h,u]),p.useEffect(()=>{const T=()=>v({});return document.addEventListener(Rm,T),()=>document.removeEventListener(Rm,T)},[]),d.jsx(Ee.div,{...c,ref:x,style:{pointerEvents:S?P?"auto":"none":void 0,...n.style},onFocusCapture:re(n.onFocusCapture,j.onFocusCapture),onBlurCapture:re(n.onBlurCapture,j.onBlurCapture),onPointerDownCapture:re(n.onPointerDownCapture,N.onPointerDownCapture)})});cu.displayName=cU;var dU="DismissableLayerBranch",L0=p.forwardRef((n,e)=>{const t=p.useContext(j0),r=p.useRef(null),s=ke(e,r);return p.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),d.jsx(Ee.div,{...n,ref:s})});L0.displayName=dU;function hU(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){F0(lU,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function fU(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&F0(uU,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Zb(){const n=new CustomEvent(Rm);document.dispatchEvent(n)}function F0(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Dy(s,i):s.dispatchEvent(i)}var pU=cu,mU=L0,$t=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},gU="Portal",lu=p.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=p.useState(!1);$t(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?QN.createPortal(d.jsx(Ee.div,{...r,ref:e}),o):null});lu.displayName=gU;function yU(n,e){return p.useReducer((t,r)=>e[t][r]??t,n)}var Ar=n=>{const{present:e,children:t}=n,r=vU(e),s=typeof t=="function"?t({present:r.isPresent}):p.Children.only(t),i=ke(r.ref,_U(s));return typeof t=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};Ar.displayName="Presence";function vU(n){const[e,t]=p.useState(),r=p.useRef(null),s=p.useRef(n),i=p.useRef("none"),o=n?"mounted":"unmounted",[a,c]=yU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Ku(r.current);i.current=a==="mounted"?u:"none"},[a]),$t(()=>{const u=r.current,h=s.current;if(h!==n){const m=i.current,v=Ku(u);n?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),$t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=v=>{const y=Ku(r.current).includes(CSS.escape(v.animationName));if(v.target===e&&y&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=v=>{v.target===e&&(i.current=Ku(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function Ku(n){return(n==null?void 0:n.animationName)||"none"}function _U(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var wU=bh[" useInsertionEffect ".trim().toString()]||$t;function ni({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,o]=bU({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:s;{const h=p.useRef(n!==void 0);p.useEffect(()=>{const f=h.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const u=p.useCallback(h=>{var f;if(a){const m=xU(h)?h(n):h;m!==n&&((f=o.current)==null||f.call(o,m))}else i(h)},[a,n,i,o]);return[c,u]}function bU({defaultProp:n,onChange:e}){const[t,r]=p.useState(n),s=p.useRef(t),i=p.useRef(e);return wU(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==t&&((o=i.current)==null||o.call(i,t),s.current=t)},[t,s]),[t,r,i]}function xU(n){return typeof n=="function"}var U0=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),EU="VisuallyHidden",Oy=p.forwardRef((n,e)=>d.jsx(Ee.span,{...n,ref:e,style:{...U0,...n.style}}));Oy.displayName=EU;var Vy="ToastProvider",[My,IU,TU]=au("Toast"),[B0]=Jn("Toast",[TU]),[SU,nf]=B0(Vy),$0=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[a,c]=p.useState(null),[u,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Vy}\`. Expected non-empty \`string\`.`),d.jsx(My.Provider,{scope:e,children:d.jsx(SU,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:p.useCallback(()=>h(v=>v+1),[]),onToastRemove:p.useCallback(()=>h(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};$0.displayName=Vy;var z0="ToastViewport",AU=["F8"],Cm="toast.viewportPause",Pm="toast.viewportResume",q0=p.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=AU,label:s="Notifications ({hotkey})",...i}=n,o=nf(z0,t),a=IU(t),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=ke(e,f,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const _=I=>{var S;r.length!==0&&r.every(P=>I[P]||I.code===P)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),p.useEffect(()=>{const _=c.current,I=f.current;if(x&&_&&I){const b=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(Cm);I.dispatchEvent(j),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(Pm);I.dispatchEvent(j),o.isClosePausedRef.current=!1}},P=j=>{!_.contains(j.relatedTarget)&&S()},N=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",b),_.addEventListener("focusout",P),_.addEventListener("pointermove",b),_.addEventListener("pointerleave",N),window.addEventListener("blur",b),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",b),_.removeEventListener("focusout",P),_.removeEventListener("pointermove",b),_.removeEventListener("pointerleave",N),window.removeEventListener("blur",b),window.removeEventListener("focus",S)}}},[x,o.isClosePausedRef]);const y=p.useCallback(({tabbingDirection:_})=>{const b=a().map(S=>{const P=S.ref.current,N=[P,...UU(P)];return _==="forwards"?N:N.reverse()});return(_==="forwards"?b.reverse():b).flat()},[a]);return p.useEffect(()=>{const _=f.current;if(_){const I=b=>{var N,j,T;const S=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!S){const E=document.activeElement,C=b.shiftKey;if(b.target===_&&C){(N=u.current)==null||N.focus();return}const k=y({tabbingDirection:C?"backwards":"forwards"}),R=k.findIndex(q=>q===E);up(k.slice(R+1))?b.preventDefault():C?(j=u.current)==null||j.focus():(T=h.current)==null||T.focus()}};return _.addEventListener("keydown",I),()=>_.removeEventListener("keydown",I)}},[a,y]),d.jsxs(mU,{ref:c,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&d.jsx(Nm,{ref:u,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"forwards"});up(_)}}),d.jsx(My.Slot,{scope:t,children:d.jsx(Ee.ol,{tabIndex:-1,...i,ref:m})}),x&&d.jsx(Nm,{ref:h,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"backwards"});up(_)}})]})});q0.displayName=z0;var W0="ToastFocusProxy",Nm=p.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=nf(W0,t);return d.jsx(Oy,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Nm.displayName=W0;var uu="Toast",RU="toast.swipeStart",CU="toast.swipeMove",PU="toast.swipeCancel",NU="toast.swipeEnd",K0=p.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[a,c]=ni({prop:r,defaultProp:s??!0,onChange:i,caller:uu});return d.jsx(Ar,{present:t||a,children:d.jsx(OU,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:fn(n.onPause),onResume:fn(n.onResume),onSwipeStart:re(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:re(n.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:re(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:re(n.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});K0.displayName=uu;var[kU,DU]=B0(uu,{onClose(){}}),OU=p.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:v,...x}=n,y=nf(uu,t),[_,I]=p.useState(null),b=ke(e,q=>I(q)),S=p.useRef(null),P=p.useRef(null),N=s||y.duration,j=p.useRef(0),T=p.useRef(N),E=p.useRef(0),{onToastAdd:C,onToastRemove:D}=y,O=fn(()=>{var te;(_==null?void 0:_.contains(document.activeElement))&&((te=y.viewport)==null||te.focus()),o()}),k=p.useCallback(q=>{!q||q===1/0||(window.clearTimeout(E.current),j.current=new Date().getTime(),E.current=window.setTimeout(O,q))},[O]);p.useEffect(()=>{const q=y.viewport;if(q){const te=()=>{k(T.current),u==null||u()},G=()=>{const oe=new Date().getTime()-j.current;T.current=T.current-oe,window.clearTimeout(E.current),c==null||c()};return q.addEventListener(Cm,G),q.addEventListener(Pm,te),()=>{q.removeEventListener(Cm,G),q.removeEventListener(Pm,te)}}},[y.viewport,N,c,u,k]),p.useEffect(()=>{i&&!y.isClosePausedRef.current&&k(N)},[i,N,y.isClosePausedRef,k]),p.useEffect(()=>(C(),()=>D()),[C,D]);const R=p.useMemo(()=>_?J0(_):null,[_]);return y.viewport?d.jsxs(d.Fragment,{children:[R&&d.jsx(VU,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:R}),d.jsx(kU,{scope:t,onClose:O,children:Ll.createPortal(d.jsx(My.ItemSlot,{scope:t,children:d.jsx(pU,{asChild:!0,onEscapeKeyDown:re(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||O(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(Ee.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...x,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:re(n.onKeyDown,q=>{q.key==="Escape"&&(a==null||a(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:re(n.onPointerDown,q=>{q.button===0&&(S.current={x:q.clientX,y:q.clientY})}),onPointerMove:re(n.onPointerMove,q=>{if(!S.current)return;const te=q.clientX-S.current.x,G=q.clientY-S.current.y,oe=!!P.current,Y=["left","right"].includes(y.swipeDirection),K=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,Ie=Y?K(0,te):0,ce=Y?0:K(0,G),Re=q.pointerType==="touch"?10:2,_e={x:Ie,y:ce},it={originalEvent:q,delta:_e};oe?(P.current=_e,Hu(CU,f,it,{discrete:!1})):Jb(_e,y.swipeDirection,Re)?(P.current=_e,Hu(RU,h,it,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(te)>Re||Math.abs(G)>Re)&&(S.current=null)}),onPointerUp:re(n.onPointerUp,q=>{const te=P.current,G=q.target;if(G.hasPointerCapture(q.pointerId)&&G.releasePointerCapture(q.pointerId),P.current=null,S.current=null,te){const oe=q.currentTarget,Y={originalEvent:q,delta:te};Jb(te,y.swipeDirection,y.swipeThreshold)?Hu(NU,v,Y,{discrete:!0}):Hu(PU,m,Y,{discrete:!0}),oe.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),VU=n=>{const{__scopeToast:e,children:t,...r}=n,s=nf(uu,e),[i,o]=p.useState(!1),[a,c]=p.useState(!1);return LU(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:d.jsx(lu,{asChild:!0,children:d.jsx(Oy,{...r,children:i&&d.jsxs(d.Fragment,{children:[s.label," ",t]})})})},MU="ToastTitle",H0=p.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return d.jsx(Ee.div,{...r,ref:e})});H0.displayName=MU;var jU="ToastDescription",G0=p.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return d.jsx(Ee.div,{...r,ref:e})});G0.displayName=jU;var Q0="ToastAction",X0=p.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?d.jsx(Z0,{altText:t,asChild:!0,children:d.jsx(jy,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Q0}\`. Expected non-empty \`string\`.`),null)});X0.displayName=Q0;var Y0="ToastClose",jy=p.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=DU(Y0,t);return d.jsx(Z0,{asChild:!0,children:d.jsx(Ee.button,{type:"button",...r,ref:e,onClick:re(n.onClick,s.onClose)})})});jy.displayName=Y0;var Z0=p.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return d.jsx(Ee.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function J0(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),FU(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...J0(r))}}),e}function Hu(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Dy(s,i):s.dispatchEvent(i)}var Jb=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function LU(n=()=>{}){const e=fn(n);$t(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function FU(n){return n.nodeType===n.ELEMENT_NODE}function UU(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function up(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var BU=$0,eA=q0,tA=K0,nA=H0,rA=G0,sA=X0,iA=jy;function oA(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=oA(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function aA(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=oA(n))&&(r&&(r+=" "),r+=e);return r}const ex=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,tx=aA,rc=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return tx(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=t==null?void 0:t[u],f=i==null?void 0:i[u];if(h===null)return null;const m=ex(h)||ex(f);return s[u][m]}),a=t&&Object.entries(t).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...v}=h;return Object.entries(v).every(x=>{let[y,_]=x;return Array.isArray(_)?_.includes({...i,...a}[y]):{...i,...a}[y]===_})?[...u,f,m]:u},[]);return tx(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),nx=n=>{const e=zU(n);return e.charAt(0).toUpperCase()+e.slice(1)},cA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),qU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=p.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>p.createElement("svg",{ref:c,...WU,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:cA("lucide",s),...!i&&!qU(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(n,e)=>{const t=p.forwardRef(({className:r,...s},i)=>p.createElement(KU,{ref:i,iconNode:e,className:cA(`lucide-${$U(nx(n))}`,`lucide-${n}`,r),...s}));return t.displayName=nx(n),t};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],GU=tt("bell",HU);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ly=tt("check",QU);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fy=tt("chevron-down",XU);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ZU=tt("chevron-right",YU);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],eB=tt("chevron-up",JU);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nB=tt("circle-alert",tB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sB=tt("circle-check-big",rB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oB=tt("circle",iB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],cB=tt("cloud-upload",aB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],uB=tt("dollar-sign",lB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],hB=tt("heart",dB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],El=tt("loader-circle",fB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],mB=tt("menu",pB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],rx=tt("message-square",gB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],sx=tt("moon",yB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],_B=tt("package",vB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],bB=tt("pencil",wB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]],lA=tt("recycle",xB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],IB=tt("refresh-ccw",EB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],SB=tt("search",TB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],RB=tt("shield-check",AB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ix=tt("shopping-bag",CB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],uA=tt("shopping-cart",PB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Uc=tt("star",NB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ox=tt("sun",kB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],OB=tt("trash-2",DB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ax=tt("user",VB);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rf=tt("x",MB),Uy="-",jB=n=>{const e=FB(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(Uy);return a[0]===""&&a.length!==1&&a.shift(),dA(a,e)||LB(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},dA=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?dA(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(Uy);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},cx=/^\[(.+)\]$/,LB=n=>{if(cx.test(n)){const e=cx.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},FB=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return BB(Object.entries(n.classGroups),t).forEach(([i,o])=>{km(o,r,i,e)}),r},km=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:lx(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(UB(s)){km(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{km(o,lx(e,i),t,r)})})},lx=(n,e)=>{let t=n;return e.split(Uy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},UB=n=>n.isThemeGetter,BB=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,$B=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},hA="!",zB=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,h=0,f;for(let _=0;_<a.length;_++){let I=a[_];if(u===0){if(I===s&&(r||a.slice(_,_+i)===e)){c.push(a.slice(h,_)),h=_+i;continue}if(I==="/"){f=_;continue}}I==="["?u++:I==="]"&&u--}const m=c.length===0?a:a.substring(h),v=m.startsWith(hA),x=v?m.substring(1):m,y=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:x,maybePostfixModifierPosition:y}};return t?a=>t({className:a,parseClassName:o}):o},qB=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},WB=n=>({cache:$B(n.cacheSize),parseClassName:zB(n),...jB(n)}),KB=/\s+/,HB=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(KB);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:v}=t(u);let x=!!v,y=r(x?m.substring(0,v):m);if(!y){if(!x){a=u+(a.length>0?" "+a:a);continue}if(y=r(m),!y){a=u+(a.length>0?" "+a:a);continue}x=!1}const _=qB(h).join(":"),I=f?_+hA:_,b=I+y;if(i.includes(b))continue;i.push(b);const S=s(y,x);for(let P=0;P<S.length;++P){const N=S[P];i.push(I+N)}a=u+(a.length>0?" "+a:a)}return a};function GB(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=fA(e))&&(r&&(r+=" "),r+=t);return r}const fA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=fA(n[r]))&&(t&&(t+=" "),t+=e);return t};function QB(n,...e){let t,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),n());return t=WB(u),r=t.cache.get,s=t.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const h=HB(c,t);return s(c,h),h}return function(){return i(GB.apply(null,arguments))}}const lt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},pA=/^\[(?:([a-z-]+):)?(.+)\]$/i,XB=/^\d+\/\d+$/,YB=new Set(["px","full","screen"]),ZB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,t$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kr=n=>aa(n)||YB.has(n)||XB.test(n),ys=n=>sc(n,"length",u$),aa=n=>!!n&&!Number.isNaN(Number(n)),dp=n=>sc(n,"number",aa),Rc=n=>!!n&&Number.isInteger(Number(n)),r$=n=>n.endsWith("%")&&aa(n.slice(0,-1)),Ce=n=>pA.test(n),vs=n=>ZB.test(n),s$=new Set(["length","size","percentage"]),i$=n=>sc(n,s$,mA),o$=n=>sc(n,"position",mA),a$=new Set(["image","url"]),c$=n=>sc(n,a$,h$),l$=n=>sc(n,"",d$),Cc=()=>!0,sc=(n,e,t)=>{const r=pA.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},u$=n=>JB.test(n)&&!e$.test(n),mA=()=>!1,d$=n=>t$.test(n),h$=n=>n$.test(n),f$=()=>{const n=lt("colors"),e=lt("spacing"),t=lt("blur"),r=lt("brightness"),s=lt("borderColor"),i=lt("borderRadius"),o=lt("borderSpacing"),a=lt("borderWidth"),c=lt("contrast"),u=lt("grayscale"),h=lt("hueRotate"),f=lt("invert"),m=lt("gap"),v=lt("gradientColorStops"),x=lt("gradientColorStopPositions"),y=lt("inset"),_=lt("margin"),I=lt("opacity"),b=lt("padding"),S=lt("saturate"),P=lt("scale"),N=lt("sepia"),j=lt("skew"),T=lt("space"),E=lt("translate"),C=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Ce,e],k=()=>[Ce,e],R=()=>["",kr,ys],q=()=>["auto",aa,Ce],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",Ce],Ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[aa,Ce];return{cacheSize:500,separator:":",theme:{colors:[Cc],spacing:[kr,ys],blur:["none","",vs,Ce],brightness:ce(),borderColor:[n],borderRadius:["none","","full",vs,Ce],borderSpacing:k(),borderWidth:R(),contrast:ce(),grayscale:K(),hueRotate:ce(),invert:K(),gap:k(),gradientColorStops:[n],gradientColorStopPositions:[r$,ys],inset:O(),margin:O(),opacity:ce(),padding:k(),saturate:ce(),scale:ce(),sepia:K(),skew:ce(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[vs]}],"break-after":[{"break-after":Ie()}],"break-before":[{"break-before":Ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),Ce]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rc,Ce]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Rc,Ce]}],"grid-cols":[{"grid-cols":[Cc]}],"col-start-end":[{col:["auto",{span:["full",Rc,Ce]},Ce]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Cc]}],"row-start-end":[{row:["auto",{span:[Rc,Ce]},Ce]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,e]}],"min-w":[{"min-w":[Ce,e,"min","max","fit"]}],"max-w":[{"max-w":[Ce,e,"none","full","min","max","fit","prose",{screen:[vs]},vs]}],h:[{h:[Ce,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vs,ys]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dp]}],"font-family":[{font:[Cc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",aa,dp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",kr,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[I]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[I]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",kr,ys]}],"underline-offset":[{"underline-offset":["auto",kr,Ce]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[I]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),o$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",i$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c$]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[I]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[I]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[kr,Ce]}],"outline-w":[{outline:[kr,ys]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[I]}],"ring-offset-w":[{"ring-offset":[kr,ys]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",vs,l$]}],"shadow-color":[{shadow:[Cc]}],opacity:[{opacity:[I]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",vs,Ce]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[I]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Rc,Ce]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[kr,ys,dp]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p$=QB(f$);function me(...n){return p$(aA(n))}const m$=BU,gA=p.forwardRef(({className:n,...e},t)=>d.jsx(eA,{ref:t,className:me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));gA.displayName=eA.displayName;const g$=rc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),yA=p.forwardRef(({className:n,variant:e,...t},r)=>d.jsx(tA,{ref:r,className:me(g$({variant:e}),n),...t}));yA.displayName=tA.displayName;const y$=p.forwardRef(({className:n,...e},t)=>d.jsx(sA,{ref:t,className:me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));y$.displayName=sA.displayName;const vA=p.forwardRef(({className:n,...e},t)=>d.jsx(iA,{ref:t,className:me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:d.jsx(rf,{className:"h-4 w-4"})}));vA.displayName=iA.displayName;const _A=p.forwardRef(({className:n,...e},t)=>d.jsx(nA,{ref:t,className:me("text-sm font-semibold",n),...e}));_A.displayName=nA.displayName;const wA=p.forwardRef(({className:n,...e},t)=>d.jsx(rA,{ref:t,className:me("text-sm opacity-90",n),...e}));wA.displayName=rA.displayName;function v$(){const{toasts:n}=tf();return d.jsxs(m$,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return d.jsxs(yA,{...i,children:[d.jsxs("div",{className:"grid gap-1",children:[t&&d.jsx(_A,{children:t}),r&&d.jsx(wA,{children:r})]}),s,d.jsx(vA,{})]},e)}),d.jsx(gA,{})]})}var _$=Symbol.for("react.lazy"),eh=bh[" use ".trim().toString()];function w$(n){return typeof n=="object"&&n!==null&&"then"in n}function bA(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===_$&&"_payload"in n&&w$(n._payload)}function By(n){const e=x$(n),t=p.forwardRef((r,s)=>{let{children:i,...o}=r;bA(i)&&typeof eh=="function"&&(i=eh(i._payload));const a=p.Children.toArray(i),c=a.find(I$);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return d.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var b$=By("Slot");function x$(n){const e=p.forwardRef((t,r)=>{let{children:s,...i}=t;if(bA(s)&&typeof eh=="function"&&(s=eh(s._payload)),p.isValidElement(s)){const o=S$(s),a=T$(i,s.props);return s.type!==p.Fragment&&(a.ref=r?cs(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var E$=Symbol("radix.slottable");function I$(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===E$}function T$(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function S$(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const $y=rc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-[0.625rem] text-sm font-medium ring-offset-background transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:cursor-not-allowed",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-soft hover:bg-primary/90 hover:shadow-elevated active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-soft hover:bg-destructive/90 hover:shadow-elevated active:scale-[0.98]",outline:"border border-border bg-background hover:bg-accent/50 hover:border-accent-foreground/20 hover:text-accent-foreground transition-gentle",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-soft transition-gentle",ghost:"hover:bg-accent/40 hover:text-accent-foreground transition-gentle",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80 transition-gentle"},size:{default:"h-11 px-5 py-2.5",sm:"h-9 px-4 text-xs",lg:"h-12 px-8 text-base",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),rt=p.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?b$:"button";return d.jsx(o,{className:me($y({variant:e,size:t,className:n})),ref:i,...s})});rt.displayName="Button";class A$ extends p.Component{constructor(t){super(t);E_(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsxs("div",{className:"flex min-h-[400px] flex-col items-center justify-center p-8 text-center",children:[d.jsx("div",{className:"mb-4 rounded-full bg-destructive/10 p-4",children:d.jsx(nB,{className:"h-12 w-12 text-destructive"})}),d.jsx("h2",{className:"mb-2 text-2xl font-semibold text-foreground",children:"Algo correu mal"}),d.jsx("p",{className:"mb-6 max-w-md text-muted-foreground",children:"Pedimos desculpa, mas ocorreu um erro inesperado. Por favor, tenta recarregar a pgina ou contacta o suporte se o problema persistir."}),!1,d.jsxs("div",{className:"flex gap-4",children:[d.jsxs(rt,{onClick:this.handleReset,variant:"outline",className:"gap-2",children:[d.jsx(IB,{className:"h-4 w-4"}),"Tentar novamente"]}),d.jsx(rt,{onClick:()=>window.location.href="/",variant:"default",children:"Voltar  pgina inicial"})]})]}):this.props.children}}const R$=rc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Di({className:n,variant:e,...t}){return d.jsx("div",{className:me(R$({variant:e}),n),...t})}var C$=p.createContext(void 0);function sf(n){const e=p.useContext(C$);return n||e||"ltr"}var hp=0;function zy(){p.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??ux()),document.body.insertAdjacentElement("beforeend",n[1]??ux()),hp++,()=>{hp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hp--}},[])}function ux(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var fp="focusScope.autoFocusOnMount",pp="focusScope.autoFocusOnUnmount",dx={bubbles:!1,cancelable:!0},P$="FocusScope",of=p.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=n,[a,c]=p.useState(null),u=fn(s),h=fn(i),f=p.useRef(null),m=ke(e,y=>c(y)),v=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let y=function(S){if(v.paused||!a)return;const P=S.target;a.contains(P)?f.current=P:ws(f.current,{select:!0})},_=function(S){if(v.paused||!a)return;const P=S.relatedTarget;P!==null&&(a.contains(P)||ws(f.current,{select:!0}))},I=function(S){if(document.activeElement===document.body)for(const N of S)N.removedNodes.length>0&&ws(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const b=new MutationObserver(I);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),b.disconnect()}}},[r,a,v.paused]),p.useEffect(()=>{if(a){fx.add(v);const y=document.activeElement;if(!a.contains(y)){const I=new CustomEvent(fp,dx);a.addEventListener(fp,u),a.dispatchEvent(I),I.defaultPrevented||(N$(M$(xA(a)),{select:!0}),document.activeElement===y&&ws(a))}return()=>{a.removeEventListener(fp,u),setTimeout(()=>{const I=new CustomEvent(pp,dx);a.addEventListener(pp,h),a.dispatchEvent(I),I.defaultPrevented||ws(y??document.body,{select:!0}),a.removeEventListener(pp,h),fx.remove(v)},0)}}},[a,u,h,v]);const x=p.useCallback(y=>{if(!t&&!r||v.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,I=document.activeElement;if(_&&I){const b=y.currentTarget,[S,P]=k$(b);S&&P?!y.shiftKey&&I===P?(y.preventDefault(),t&&ws(S,{select:!0})):y.shiftKey&&I===S&&(y.preventDefault(),t&&ws(P,{select:!0})):I===b&&y.preventDefault()}},[t,r,v.paused]);return d.jsx(Ee.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});of.displayName=P$;function N$(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ws(r,{select:e}),document.activeElement!==t)return}function k$(n){const e=xA(n),t=hx(e,n),r=hx(e.reverse(),n);return[t,r]}function xA(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function hx(n,e){for(const t of n)if(!D$(t,{upTo:e}))return t}function D$(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function O$(n){return n instanceof HTMLInputElement&&"select"in n}function ws(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&O$(n)&&e&&n.select()}}var fx=V$();function V$(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=px(n,e),n.unshift(e)},remove(e){var t;n=px(n,e),(t=n[0])==null||t.resume()}}}function px(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function M$(n){return n.filter(e=>e.tagName!=="A")}var j$=bh[" useId ".trim().toString()]||(()=>{}),L$=0;function Kr(n){const[e,t]=p.useState(j$());return $t(()=>{t(r=>r??String(L$++))},[n]),n||(e?`radix-${e}`:"")}const F$=["top","right","bottom","left"],ri=Math.min,vn=Math.max,th=Math.round,Gu=Math.floor,br=n=>({x:n,y:n}),U$={left:"right",right:"left",bottom:"top",top:"bottom"},B$={start:"end",end:"start"};function Dm(n,e,t){return vn(n,ri(e,t))}function ts(n,e){return typeof n=="function"?n(e):n}function ns(n){return n.split("-")[0]}function ic(n){return n.split("-")[1]}function qy(n){return n==="x"?"y":"x"}function Wy(n){return n==="y"?"height":"width"}const $$=new Set(["top","bottom"]);function pr(n){return $$.has(ns(n))?"y":"x"}function Ky(n){return qy(pr(n))}function z$(n,e,t){t===void 0&&(t=!1);const r=ic(n),s=Ky(n),i=Wy(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=nh(o)),[o,nh(o)]}function q$(n){const e=nh(n);return[Om(n),e,Om(e)]}function Om(n){return n.replace(/start|end/g,e=>B$[e])}const mx=["left","right"],gx=["right","left"],W$=["top","bottom"],K$=["bottom","top"];function H$(n,e,t){switch(n){case"top":case"bottom":return t?e?gx:mx:e?mx:gx;case"left":case"right":return e?W$:K$;default:return[]}}function G$(n,e,t,r){const s=ic(n);let i=H$(ns(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Om)))),i}function nh(n){return n.replace(/left|right|bottom|top/g,e=>U$[e])}function Q$(n){return{top:0,right:0,bottom:0,left:0,...n}}function EA(n){return typeof n!="number"?Q$(n):{top:n,right:n,bottom:n,left:n}}function rh(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function yx(n,e,t){let{reference:r,floating:s}=n;const i=pr(e),o=Ky(e),a=Wy(o),c=ns(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(ic(e)){case"start":v[o]-=m*(t&&u?-1:1);break;case"end":v[o]+=m*(t&&u?-1:1);break}return v}const X$=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:h,y:f}=yx(u,r,c),m=r,v={},x=0;for(let y=0;y<a.length;y++){const{name:_,fn:I}=a[y],{x:b,y:S,data:P,reset:N}=await I({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:n,floating:e}});h=b??h,f=S??f,v={...v,[_]:{...v[_],...P}},N&&x<=50&&(x++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):N.rects),{x:h,y:f}=yx(u,m,c)),y=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:v}};async function Il(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=ts(e,n),x=EA(v),_=a[m?f==="floating"?"reference":"floating":f],I=rh(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(_)))==null||t?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),b=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),P=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},N=rh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:S,strategy:c}):b);return{top:(I.top-N.top+x.top)/P.y,bottom:(N.bottom-I.bottom+x.bottom)/P.y,left:(I.left-N.left+x.left)/P.x,right:(N.right-I.right+x.right)/P.x}}const Y$=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:h=0}=ts(n,e)||{};if(u==null)return{};const f=EA(h),m={x:t,y:r},v=Ky(s),x=Wy(v),y=await o.getDimensions(u),_=v==="y",I=_?"top":"left",b=_?"bottom":"right",S=_?"clientHeight":"clientWidth",P=i.reference[x]+i.reference[v]-m[v]-i.floating[x],N=m[v]-i.reference[v],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=j?j[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(j)))&&(T=a.floating[S]||i.floating[x]);const E=P/2-N/2,C=T/2-y[x]/2-1,D=ri(f[I],C),O=ri(f[b],C),k=D,R=T-y[x]-O,q=T/2-y[x]/2+E,te=Dm(k,q,R),G=!c.arrow&&ic(s)!=null&&q!==te&&i.reference[x]/2-(q<k?D:O)-y[x]/2<0,oe=G?q<k?q-k:q-R:0;return{[v]:m[v]+oe,data:{[v]:te,centerOffset:q-te-oe,...G&&{alignmentOffset:oe}},reset:G}}}),Z$=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,..._}=ts(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const I=ns(s),b=pr(a),S=ns(a)===a,P=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(S||!y?[nh(a)]:q$(a)),j=x!=="none";!m&&j&&N.push(...G$(a,y,x,P));const T=[a,...N],E=await Il(e,_),C=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(E[I]),f){const q=z$(s,o,P);C.push(E[q[0]],E[q[1]])}if(D=[...D,{placement:s,overflows:C}],!C.every(q=>q<=0)){var O,k;const q=(((O=i.flip)==null?void 0:O.index)||0)+1,te=T[q];if(te&&(!(f==="alignment"?b!==pr(te):!1)||D.every(Y=>pr(Y.placement)===b?Y.overflows[0]>0:!0)))return{data:{index:q,overflows:D},reset:{placement:te}};let G=(k=D.filter(oe=>oe.overflows[0]<=0).sort((oe,Y)=>oe.overflows[1]-Y.overflows[1])[0])==null?void 0:k.placement;if(!G)switch(v){case"bestFit":{var R;const oe=(R=D.filter(Y=>{if(j){const K=pr(Y.placement);return K===b||K==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(K=>K>0).reduce((K,Ie)=>K+Ie,0)]).sort((Y,K)=>Y[1]-K[1])[0])==null?void 0:R[0];oe&&(G=oe);break}case"initialPlacement":G=a;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function vx(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function _x(n){return F$.some(e=>n[e]>=0)}const J$=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ts(n,e);switch(r){case"referenceHidden":{const i=await Il(e,{...s,elementContext:"reference"}),o=vx(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:_x(o)}}}case"escaped":{const i=await Il(e,{...s,altBoundary:!0}),o=vx(i,t.floating);return{data:{escapedOffsets:o,escaped:_x(o)}}}default:return{}}}}},IA=new Set(["left","top"]);async function e6(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ns(t),a=ic(t),c=pr(t)==="y",u=IA.has(o)?-1:1,h=i&&c?-1:1,f=ts(e,n);let{mainAxis:m,crossAxis:v,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof x=="number"&&(v=a==="end"?x*-1:x),c?{x:v*h,y:m*u}:{x:m*u,y:v*h}}const t6=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await e6(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},n6=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:I,y:b}=_;return{x:I,y:b}}},...c}=ts(n,e),u={x:t,y:r},h=await Il(e,c),f=pr(ns(s)),m=qy(f);let v=u[m],x=u[f];if(i){const _=m==="y"?"top":"left",I=m==="y"?"bottom":"right",b=v+h[_],S=v-h[I];v=Dm(b,v,S)}if(o){const _=f==="y"?"top":"left",I=f==="y"?"bottom":"right",b=x+h[_],S=x-h[I];x=Dm(b,x,S)}const y=a.fn({...e,[m]:v,[f]:x});return{...y,data:{x:y.x-t,y:y.y-r,enabled:{[m]:i,[f]:o}}}}}},r6=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=ts(n,e),h={x:t,y:r},f=pr(s),m=qy(f);let v=h[m],x=h[f];const y=ts(a,e),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const S=m==="y"?"height":"width",P=i.reference[m]-i.floating[S]+_.mainAxis,N=i.reference[m]+i.reference[S]-_.mainAxis;v<P?v=P:v>N&&(v=N)}if(u){var I,b;const S=m==="y"?"width":"height",P=IA.has(ns(s)),N=i.reference[f]-i.floating[S]+(P&&((I=o.offset)==null?void 0:I[f])||0)+(P?0:_.crossAxis),j=i.reference[f]+i.reference[S]+(P?0:((b=o.offset)==null?void 0:b[f])||0)-(P?_.crossAxis:0);x<N?x=N:x>j&&(x=j)}return{[m]:v,[f]:x}}}},s6=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=ts(n,e),h=await Il(e,u),f=ns(s),m=ic(s),v=pr(s)==="y",{width:x,height:y}=i.floating;let _,I;f==="top"||f==="bottom"?(_=f,I=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(I=f,_=m==="end"?"top":"bottom");const b=y-h.top-h.bottom,S=x-h.left-h.right,P=ri(y-h[_],b),N=ri(x-h[I],S),j=!e.middlewareData.shift;let T=P,E=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(E=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=b),j&&!m){const D=vn(h.left,0),O=vn(h.right,0),k=vn(h.top,0),R=vn(h.bottom,0);v?E=x-2*(D!==0||O!==0?D+O:vn(h.left,h.right)):T=y-2*(k!==0||R!==0?k+R:vn(h.top,h.bottom))}await c({...e,availableWidth:E,availableHeight:T});const C=await o.getDimensions(a.floating);return x!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function af(){return typeof window<"u"}function oc(n){return TA(n)?(n.nodeName||"").toLowerCase():"#document"}function Sn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Rr(n){var e;return(e=(TA(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function TA(n){return af()?n instanceof Node||n instanceof Sn(n).Node:!1}function Yn(n){return af()?n instanceof Element||n instanceof Sn(n).Element:!1}function Ir(n){return af()?n instanceof HTMLElement||n instanceof Sn(n).HTMLElement:!1}function wx(n){return!af()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Sn(n).ShadowRoot}const i6=new Set(["inline","contents"]);function du(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Zn(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!i6.has(s)}const o6=new Set(["table","td","th"]);function a6(n){return o6.has(oc(n))}const c6=[":popover-open",":modal"];function cf(n){return c6.some(e=>{try{return n.matches(e)}catch{return!1}})}const l6=["transform","translate","scale","rotate","perspective"],u6=["transform","translate","scale","rotate","perspective","filter"],d6=["paint","layout","strict","content"];function Hy(n){const e=Gy(),t=Yn(n)?Zn(n):n;return l6.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||u6.some(r=>(t.willChange||"").includes(r))||d6.some(r=>(t.contain||"").includes(r))}function h6(n){let e=si(n);for(;Ir(e)&&!Ua(e);){if(Hy(e))return e;if(cf(e))return null;e=si(e)}return null}function Gy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const f6=new Set(["html","body","#document"]);function Ua(n){return f6.has(oc(n))}function Zn(n){return Sn(n).getComputedStyle(n)}function lf(n){return Yn(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function si(n){if(oc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||wx(n)&&n.host||Rr(n);return wx(e)?e.host:e}function SA(n){const e=si(n);return Ua(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ir(e)&&du(e)?e:SA(e)}function Tl(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=SA(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=Sn(s);if(i){const a=Vm(o);return e.concat(o,o.visualViewport||[],du(s)?s:[],a&&t?Tl(a):[])}return e.concat(s,Tl(s,[],t))}function Vm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function AA(n){const e=Zn(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ir(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=th(t)!==i||th(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function Qy(n){return Yn(n)?n:n.contextElement}function ca(n){const e=Qy(n);if(!Ir(e))return br(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=AA(e);let o=(i?th(t.width):t.width)/r,a=(i?th(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const p6=br(0);function RA(n){const e=Sn(n);return!Gy()||!e.visualViewport?p6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function m6(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Sn(n)?!1:e}function fo(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=Qy(n);let o=br(1);e&&(r?Yn(r)&&(o=ca(r)):o=ca(n));const a=m6(i,t,r)?RA(i):br(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=Sn(i),v=r&&Yn(r)?Sn(r):r;let x=m,y=Vm(x);for(;y&&r&&v!==x;){const _=ca(y),I=y.getBoundingClientRect(),b=Zn(y),S=I.left+(y.clientLeft+parseFloat(b.paddingLeft))*_.x,P=I.top+(y.clientTop+parseFloat(b.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,f*=_.y,c+=S,u+=P,x=Sn(y),y=Vm(x)}}return rh({width:h,height:f,x:c,y:u})}function uf(n,e){const t=lf(n).scrollLeft;return e?e.left+t:fo(Rr(n)).left+t}function CA(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-uf(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function g6(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=Rr(r),a=e?cf(e.floating):!1;if(r===o||a&&i)return t;let c={scrollLeft:0,scrollTop:0},u=br(1);const h=br(0),f=Ir(r);if((f||!f&&!i)&&((oc(r)!=="body"||du(o))&&(c=lf(r)),Ir(r))){const v=fo(r);u=ca(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const m=o&&!f&&!i?CA(o,c):br(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:t.y*u.y-c.scrollTop*u.y+h.y+m.y}}function y6(n){return Array.from(n.getClientRects())}function v6(n){const e=Rr(n),t=lf(n),r=n.ownerDocument.body,s=vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+uf(n);const a=-t.scrollTop;return Zn(r).direction==="rtl"&&(o+=vn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const bx=25;function _6(n,e){const t=Sn(n),r=Rr(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const h=Gy();(!h||h&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}const u=uf(r);if(u<=0){const h=r.ownerDocument,f=h.body,m=getComputedStyle(f),v=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(r.clientWidth-f.clientWidth-v);x<=bx&&(i-=x)}else u<=bx&&(i+=u);return{width:i,height:o,x:a,y:c}}const w6=new Set(["absolute","fixed"]);function b6(n,e){const t=fo(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=Ir(n)?ca(n):br(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function xx(n,e,t){let r;if(e==="viewport")r=_6(n,t);else if(e==="document")r=v6(Rr(n));else if(Yn(e))r=b6(e,t);else{const s=RA(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return rh(r)}function PA(n,e){const t=si(n);return t===e||!Yn(t)||Ua(t)?!1:Zn(t).position==="fixed"||PA(t,e)}function x6(n,e){const t=e.get(n);if(t)return t;let r=Tl(n,[],!1).filter(a=>Yn(a)&&oc(a)!=="body"),s=null;const i=Zn(n).position==="fixed";let o=i?si(n):n;for(;Yn(o)&&!Ua(o);){const a=Zn(o),c=Hy(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&w6.has(s.position)||du(o)&&!c&&PA(n,o))?r=r.filter(h=>h!==o):s=a,o=si(o)}return e.set(n,r),r}function E6(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?cf(e)?[]:x6(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,h)=>{const f=xx(e,h,s);return u.top=vn(f.top,u.top),u.right=ri(f.right,u.right),u.bottom=ri(f.bottom,u.bottom),u.left=vn(f.left,u.left),u},xx(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function I6(n){const{width:e,height:t}=AA(n);return{width:e,height:t}}function T6(n,e,t){const r=Ir(e),s=Rr(e),i=t==="fixed",o=fo(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=br(0);function u(){c.x=uf(s)}if(r||!r&&!i)if((oc(e)!=="body"||du(s))&&(a=lf(e)),r){const v=fo(e,!0,i,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?CA(s,a):br(0),f=o.left+a.scrollLeft-c.x-h.x,m=o.top+a.scrollTop-c.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function mp(n){return Zn(n).position==="static"}function Ex(n,e){if(!Ir(n)||Zn(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Rr(n)===t&&(t=t.ownerDocument.body),t}function NA(n,e){const t=Sn(n);if(cf(n))return t;if(!Ir(n)){let s=si(n);for(;s&&!Ua(s);){if(Yn(s)&&!mp(s))return s;s=si(s)}return t}let r=Ex(n,e);for(;r&&a6(r)&&mp(r);)r=Ex(r,e);return r&&Ua(r)&&mp(r)&&!Hy(r)?t:r||h6(n)||t}const S6=async function(n){const e=this.getOffsetParent||NA,t=this.getDimensions,r=await t(n.floating);return{reference:T6(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function A6(n){return Zn(n).direction==="rtl"}const R6={convertOffsetParentRelativeRectToViewportRelativeRect:g6,getDocumentElement:Rr,getClippingRect:E6,getOffsetParent:NA,getElementRects:S6,getClientRects:y6,getDimensions:I6,getScale:ca,isElement:Yn,isRTL:A6};function kA(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function C6(n,e){let t=null,r;const s=Rr(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=n.getBoundingClientRect(),{left:h,top:f,width:m,height:v}=u;if(a||e(),!m||!v)return;const x=Gu(f),y=Gu(s.clientWidth-(h+m)),_=Gu(s.clientHeight-(f+v)),I=Gu(h),S={rootMargin:-x+"px "+-y+"px "+-_+"px "+-I+"px",threshold:vn(0,ri(1,c))||1};let P=!0;function N(j){const T=j[0].intersectionRatio;if(T!==c){if(!P)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!kA(u,n.getBoundingClientRect())&&o(),P=!1}try{t=new IntersectionObserver(N,{...S,root:s.ownerDocument})}catch{t=new IntersectionObserver(N,S)}t.observe(n)}return o(!0),i}function P6(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Qy(n),h=s||i?[...u?Tl(u):[],...Tl(e)]:[];h.forEach(I=>{s&&I.addEventListener("scroll",t,{passive:!0}),i&&I.addEventListener("resize",t)});const f=u&&a?C6(u,t):null;let m=-1,v=null;o&&(v=new ResizeObserver(I=>{let[b]=I;b&&b.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=v)==null||S.observe(e)})),t()}),u&&!c&&v.observe(u),v.observe(e));let x,y=c?fo(n):null;c&&_();function _(){const I=fo(n);y&&!kA(y,I)&&t(),y=I,x=requestAnimationFrame(_)}return t(),()=>{var I;h.forEach(b=>{s&&b.removeEventListener("scroll",t),i&&b.removeEventListener("resize",t)}),f==null||f(),(I=v)==null||I.disconnect(),v=null,c&&cancelAnimationFrame(x)}}const N6=t6,k6=n6,D6=Z$,O6=s6,V6=J$,Ix=Y$,M6=r6,j6=(n,e,t)=>{const r=new Map,s={platform:R6,...t},i={...s.platform,_c:r};return X$(n,e,{...s,platform:i})};var L6=typeof document<"u",F6=function(){},wd=L6?p.useLayoutEffect:F6;function sh(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!sh(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!sh(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function DA(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Tx(n,e){const t=DA(n);return Math.round(e*t)/t}function gp(n){const e=p.useRef(n);return wd(()=>{e.current=n}),e}function U6(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[h,f]=p.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=p.useState(r);sh(m,r)||v(r);const[x,y]=p.useState(null),[_,I]=p.useState(null),b=p.useCallback(Y=>{Y!==j.current&&(j.current=Y,y(Y))},[]),S=p.useCallback(Y=>{Y!==T.current&&(T.current=Y,I(Y))},[]),P=i||x,N=o||_,j=p.useRef(null),T=p.useRef(null),E=p.useRef(h),C=c!=null,D=gp(c),O=gp(s),k=gp(u),R=p.useCallback(()=>{if(!j.current||!T.current)return;const Y={placement:e,strategy:t,middleware:m};O.current&&(Y.platform=O.current),j6(j.current,T.current,Y).then(K=>{const Ie={...K,isPositioned:k.current!==!1};q.current&&!sh(E.current,Ie)&&(E.current=Ie,Ll.flushSync(()=>{f(Ie)}))})},[m,e,t,O,k]);wd(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(Y=>({...Y,isPositioned:!1})))},[u]);const q=p.useRef(!1);wd(()=>(q.current=!0,()=>{q.current=!1}),[]),wd(()=>{if(P&&(j.current=P),N&&(T.current=N),P&&N){if(D.current)return D.current(P,N,R);R()}},[P,N,R,D,C]);const te=p.useMemo(()=>({reference:j,floating:T,setReference:b,setFloating:S}),[b,S]),G=p.useMemo(()=>({reference:P,floating:N}),[P,N]),oe=p.useMemo(()=>{const Y={position:t,left:0,top:0};if(!G.floating)return Y;const K=Tx(G.floating,h.x),Ie=Tx(G.floating,h.y);return a?{...Y,transform:"translate("+K+"px, "+Ie+"px)",...DA(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:Ie}},[t,a,G.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:R,refs:te,elements:G,floatingStyles:oe}),[h,R,te,G,oe])}const B6=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Ix({element:r.current,padding:s}).fn(t):{}:r?Ix({element:r,padding:s}).fn(t):{}}}},$6=(n,e)=>({...N6(n),options:[n,e]}),z6=(n,e)=>({...k6(n),options:[n,e]}),q6=(n,e)=>({...M6(n),options:[n,e]}),W6=(n,e)=>({...D6(n),options:[n,e]}),K6=(n,e)=>({...O6(n),options:[n,e]}),H6=(n,e)=>({...V6(n),options:[n,e]}),G6=(n,e)=>({...B6(n),options:[n,e]});var Q6="Arrow",OA=p.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return d.jsx(Ee.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});OA.displayName=Q6;var X6=OA;function Xy(n){const[e,t]=p.useState(void 0);return $t(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Yy="Popper",[VA,df]=Jn(Yy),[Y6,MA]=VA(Yy),jA=n=>{const{__scopePopper:e,children:t}=n,[r,s]=p.useState(null);return d.jsx(Y6,{scope:e,anchor:r,onAnchorChange:s,children:t})};jA.displayName=Yy;var LA="PopperAnchor",FA=p.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=MA(LA,t),o=p.useRef(null),a=ke(e,o),c=p.useRef(null);return p.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||o.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:d.jsx(Ee.div,{...s,ref:a})});FA.displayName=LA;var Zy="PopperContent",[Z6,J6]=VA(Zy),UA=p.forwardRef((n,e)=>{var de,Me,qe,De,Fe,Ue;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:x,...y}=n,_=MA(Zy,t),[I,b]=p.useState(null),S=ke(e,Ct=>b(Ct)),[P,N]=p.useState(null),j=Xy(P),T=(j==null?void 0:j.width)??0,E=(j==null?void 0:j.height)??0,C=r+(i!=="center"?"-"+i:""),D=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},O=Array.isArray(u)?u:[u],k=O.length>0,R={padding:D,boundary:O.filter(t9),altBoundary:k},{refs:q,floatingStyles:te,placement:G,isPositioned:oe,middlewareData:Y}=U6({strategy:"fixed",placement:C,whileElementsMounted:(...Ct)=>P6(...Ct,{animationFrame:v==="always"}),elements:{reference:_.anchor},middleware:[$6({mainAxis:s+E,alignmentAxis:o}),c&&z6({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?q6():void 0,...R}),c&&W6({...R}),K6({...R,apply:({elements:Ct,rects:Ft,availableWidth:Cn,availableHeight:tr})=>{const{width:Cr,height:yu}=Ft.reference,nr=Ct.floating.style;nr.setProperty("--radix-popper-available-width",`${Cn}px`),nr.setProperty("--radix-popper-available-height",`${tr}px`),nr.setProperty("--radix-popper-anchor-width",`${Cr}px`),nr.setProperty("--radix-popper-anchor-height",`${yu}px`)}}),P&&G6({element:P,padding:a}),n9({arrowWidth:T,arrowHeight:E}),m&&H6({strategy:"referenceHidden",...R})]}),[K,Ie]=zA(G),ce=fn(x);$t(()=>{oe&&(ce==null||ce())},[oe,ce]);const Re=(de=Y.arrow)==null?void 0:de.x,_e=(Me=Y.arrow)==null?void 0:Me.y,it=((qe=Y.arrow)==null?void 0:qe.centerOffset)!==0,[ot,ft]=p.useState();return $t(()=>{I&&ft(window.getComputedStyle(I).zIndex)},[I]),d.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:oe?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ot,"--radix-popper-transform-origin":[(De=Y.transformOrigin)==null?void 0:De.x,(Fe=Y.transformOrigin)==null?void 0:Fe.y].join(" "),...((Ue=Y.hide)==null?void 0:Ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:d.jsx(Z6,{scope:t,placedSide:K,onArrowChange:N,arrowX:Re,arrowY:_e,shouldHideArrow:it,children:d.jsx(Ee.div,{"data-side":K,"data-align":Ie,...y,ref:S,style:{...y.style,animation:oe?void 0:"none"}})})})});UA.displayName=Zy;var BA="PopperArrow",e9={top:"bottom",right:"left",bottom:"top",left:"right"},$A=p.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=J6(BA,r),o=e9[i.placedSide];return d.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:d.jsx(X6,{...s,ref:t,style:{...s.style,display:"block"}})})});$A.displayName=BA;function t9(n){return n!==null}var n9=n=>({name:"transformOrigin",options:n,fn(e){var _,I,b;const{placement:t,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,h]=zA(t),f={start:"0%",center:"50%",end:"100%"}[h],m=(((I=s.arrow)==null?void 0:I.x)??0)+a/2,v=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let x="",y="";return u==="bottom"?(x=o?f:`${m}px`,y=`${-c}px`):u==="top"?(x=o?f:`${m}px`,y=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=o?f:`${v}px`):u==="left"&&(x=`${r.floating.width+c}px`,y=o?f:`${v}px`),{data:{x,y}}}});function zA(n){const[e,t="center"]=n.split("-");return[e,t]}var qA=jA,WA=FA,KA=UA,HA=$A,yp="rovingFocusGroup.onEntryFocus",r9={bubbles:!1,cancelable:!0},hu="RovingFocusGroup",[Mm,GA,s9]=au(hu),[i9,QA]=Jn(hu,[s9]),[o9,a9]=i9(hu),XA=p.forwardRef((n,e)=>d.jsx(Mm.Provider,{scope:n.__scopeRovingFocusGroup,children:d.jsx(Mm.Slot,{scope:n.__scopeRovingFocusGroup,children:d.jsx(c9,{...n,ref:e})})}));XA.displayName=hu;var c9=p.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=n,m=p.useRef(null),v=ke(e,m),x=sf(i),[y,_]=ni({prop:o,defaultProp:a??null,onChange:c,caller:hu}),[I,b]=p.useState(!1),S=fn(u),P=GA(t),N=p.useRef(!1),[j,T]=p.useState(0);return p.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(yp,S),()=>E.removeEventListener(yp,S)},[S]),d.jsx(o9,{scope:t,orientation:r,dir:x,loop:s,currentTabStopId:y,onItemFocus:p.useCallback(E=>_(E),[_]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:p.useCallback(()=>T(E=>E-1),[]),children:d.jsx(Ee.div,{tabIndex:I||j===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...n.style},onMouseDown:re(n.onMouseDown,()=>{N.current=!0}),onFocus:re(n.onFocus,E=>{const C=!N.current;if(E.target===E.currentTarget&&C&&!I){const D=new CustomEvent(yp,r9);if(E.currentTarget.dispatchEvent(D),!D.defaultPrevented){const O=P().filter(G=>G.focusable),k=O.find(G=>G.active),R=O.find(G=>G.id===y),te=[k,R,...O].filter(Boolean).map(G=>G.ref.current);JA(te,h)}}N.current=!1}),onBlur:re(n.onBlur,()=>b(!1))})})}),YA="RovingFocusGroupItem",ZA=p.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=n,c=Kr(),u=i||c,h=a9(YA,t),f=h.currentTabStopId===u,m=GA(t),{onFocusableItemAdd:v,onFocusableItemRemove:x,currentTabStopId:y}=h;return p.useEffect(()=>{if(r)return v(),()=>x()},[r,v,x]),d.jsx(Mm.ItemSlot,{scope:t,id:u,focusable:r,active:s,children:d.jsx(Ee.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:re(n.onMouseDown,_=>{r?h.onItemFocus(u):_.preventDefault()}),onFocus:re(n.onFocus,()=>h.onItemFocus(u)),onKeyDown:re(n.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){h.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const I=d9(_,h.orientation,h.dir);if(I!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let S=m().filter(P=>P.focusable).map(P=>P.ref.current);if(I==="last")S.reverse();else if(I==="prev"||I==="next"){I==="prev"&&S.reverse();const P=S.indexOf(_.currentTarget);S=h.loop?h9(S,P+1):S.slice(P+1)}setTimeout(()=>JA(S))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:y!=null}):o})})});ZA.displayName=YA;var l9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function u9(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function d9(n,e,t){const r=u9(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return l9[r]}function JA(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function h9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var f9=XA,p9=ZA;function m9(n){const e=g9(n),t=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(v9);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return d.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function g9(n){const e=p.forwardRef((t,r)=>{const{children:s,...i}=t;if(p.isValidElement(s)){const o=w9(s),a=_9(i,s.props);return s.type!==p.Fragment&&(a.ref=r?cs(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var y9=Symbol("radix.slottable");function v9(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===y9}function _9(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function w9(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var b9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},$o=new WeakMap,Qu=new WeakMap,Xu={},vp=0,eR=function(n){return n&&(n.host||eR(n.parentNode))},x9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=eR(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},E9=function(n,e,t,r){var s=x9(e,Array.isArray(n)?n:[n]);Xu[t]||(Xu[t]=new WeakMap);var i=Xu[t],o=[],a=new Set,c=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var v=m.getAttribute(r),x=v!==null&&v!=="false",y=($o.get(m)||0)+1,_=(i.get(m)||0)+1;$o.set(m,y),i.set(m,_),o.push(m),y===1&&x&&Qu.set(m,!0),_===1&&m.setAttribute(t,"true"),x||m.setAttribute(r,"true")}catch(I){console.error("aria-hidden: cannot operate on ",m,I)}})};return h(e),a.clear(),vp++,function(){o.forEach(function(f){var m=$o.get(f)-1,v=i.get(f)-1;$o.set(f,m),i.set(f,v),m||(Qu.has(f)||f.removeAttribute(r),Qu.delete(f)),v||f.removeAttribute(t)}),vp--,vp||($o=new WeakMap,$o=new WeakMap,Qu=new WeakMap,Xu={})}},Jy=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=b9(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),E9(r,s,t,"aria-hidden")):function(){return null}},bd="right-scroll-bar-position",xd="width-before-scroll-bar",I9="with-scroll-bars-hidden",T9="--removed-body-scroll-bar-size";function _p(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function S9(n,e){var t=p.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var A9=typeof window<"u"?p.useLayoutEffect:p.useEffect,Sx=new WeakMap;function R9(n,e){var t=S9(null,function(r){return n.forEach(function(s){return _p(s,r)})});return A9(function(){var r=Sx.get(t);if(r){var s=new Set(r),i=new Set(n),o=t.current;s.forEach(function(a){i.has(a)||_p(a,null)}),i.forEach(function(a){s.has(a)||_p(a,o)})}Sx.set(t,n)},[n]),t}function C9(n){return n}function P9(n,e){e===void 0&&(e=C9);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),t={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),t}}}};return s}function N9(n){n===void 0&&(n={});var e=P9(null);return e.options=ur({async:!0,ssr:!1},n),e}var tR=function(n){var e=n.sideCar,t=tu(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,ur({},t))};tR.isSideCarExport=!0;function k9(n,e){return n.useMedium(e),tR}var nR=N9(),wp=function(){},hf=p.forwardRef(function(n,e){var t=p.useRef(null),r=p.useState({onScrollCapture:wp,onWheelCapture:wp,onTouchMoveCapture:wp}),s=r[0],i=r[1],o=n.forwardProps,a=n.children,c=n.className,u=n.removeScrollBar,h=n.enabled,f=n.shards,m=n.sideCar,v=n.noRelative,x=n.noIsolation,y=n.inert,_=n.allowPinchZoom,I=n.as,b=I===void 0?"div":I,S=n.gapMode,P=tu(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,j=R9([t,e]),T=ur(ur({},P),s);return p.createElement(p.Fragment,null,h&&p.createElement(N,{sideCar:nR,removeScrollBar:u,shards:f,noRelative:v,noIsolation:x,inert:y,setCallbacks:i,allowPinchZoom:!!_,lockRef:t,gapMode:S}),o?p.cloneElement(p.Children.only(a),ur(ur({},T),{ref:j})):p.createElement(b,ur({},T,{className:c,ref:j}),a))});hf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hf.classNames={fullWidth:xd,zeroRight:bd};var D9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function O9(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=D9();return e&&n.setAttribute("nonce",e),n}function V9(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function M9(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var j9=function(){var n=0,e=null;return{add:function(t){n==0&&(e=O9())&&(V9(e,t),M9(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},L9=function(){var n=j9();return function(e,t){p.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},rR=function(){var n=L9(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},F9={left:0,top:0,right:0,gap:0},bp=function(n){return parseInt(n||"",10)||0},U9=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[bp(t),bp(r),bp(s)]},B9=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return F9;var e=U9(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},$9=rR(),la="data-scroll-locked",z9=function(n,e,t,r){var s=n.left,i=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(I9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(la,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(bd," .").concat(bd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xd," .").concat(xd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(la,`] {
    `).concat(T9,": ").concat(a,`px;
  }
`)},Ax=function(){var n=parseInt(document.body.getAttribute(la)||"0",10);return isFinite(n)?n:0},q9=function(){p.useEffect(function(){return document.body.setAttribute(la,(Ax()+1).toString()),function(){var n=Ax()-1;n<=0?document.body.removeAttribute(la):document.body.setAttribute(la,n.toString())}},[])},W9=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;q9();var i=p.useMemo(function(){return B9(s)},[s]);return p.createElement($9,{styles:z9(i,!e,s,t?"":"!important")})},jm=!1;if(typeof window<"u")try{var Yu=Object.defineProperty({},"passive",{get:function(){return jm=!0,!0}});window.addEventListener("test",Yu,Yu),window.removeEventListener("test",Yu,Yu)}catch{jm=!1}var zo=jm?{passive:!1}:!1,K9=function(n){return n.tagName==="TEXTAREA"},sR=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!K9(n)&&t[e]==="visible")},H9=function(n){return sR(n,"overflowY")},G9=function(n){return sR(n,"overflowX")},Rx=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=iR(n,r);if(s){var i=oR(n,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Q9=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},X9=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},iR=function(n,e){return n==="v"?H9(e):G9(e)},oR=function(n,e){return n==="v"?Q9(e):X9(e)},Y9=function(n,e){return n==="h"&&e==="rtl"?-1:1},Z9=function(n,e,t,r,s){var i=Y9(n,window.getComputedStyle(e).direction),o=i*r,a=t.target,c=e.contains(a),u=!1,h=o>0,f=0,m=0;do{if(!a)break;var v=oR(n,a),x=v[0],y=v[1],_=v[2],I=y-_-i*x;(x||I)&&iR(n,a)&&(f+=I,m+=x);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(u=!0),u},Zu=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Cx=function(n){return[n.deltaX,n.deltaY]},Px=function(n){return n&&"current"in n?n.current:n},J9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},e5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},t5=0,qo=[];function n5(n){var e=p.useRef([]),t=p.useRef([0,0]),r=p.useRef(),s=p.useState(t5++)[0],i=p.useState(rR)[0],o=p.useRef(n);p.useEffect(function(){o.current=n},[n]),p.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var y=e2([n.lockRef.current],(n.shards||[]).map(Px),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=p.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var I=Zu(y),b=t.current,S="deltaX"in y?y.deltaX:b[0]-I[0],P="deltaY"in y?y.deltaY:b[1]-I[1],N,j=y.target,T=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in y&&T==="h"&&j.type==="range")return!1;var E=Rx(T,j);if(!E)return!0;if(E?N=T:(N=T==="v"?"h":"v",E=Rx(T,j)),!E)return!1;if(!r.current&&"changedTouches"in y&&(S||P)&&(r.current=N),!N)return!0;var C=r.current||N;return Z9(C,_,y,C==="h"?S:P)},[]),c=p.useCallback(function(y){var _=y;if(!(!qo.length||qo[qo.length-1]!==i)){var I="deltaY"in _?Cx(_):Zu(_),b=e.current.filter(function(N){return N.name===_.type&&(N.target===_.target||_.target===N.shadowParent)&&J9(N.delta,I)})[0];if(b&&b.should){_.cancelable&&_.preventDefault();return}if(!b){var S=(o.current.shards||[]).map(Px).filter(Boolean).filter(function(N){return N.contains(_.target)}),P=S.length>0?a(_,S[0]):!o.current.noIsolation;P&&_.cancelable&&_.preventDefault()}}},[]),u=p.useCallback(function(y,_,I,b){var S={name:y,delta:_,target:I,should:b,shadowParent:r5(I)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),h=p.useCallback(function(y){t.current=Zu(y),r.current=void 0},[]),f=p.useCallback(function(y){u(y.type,Cx(y),y.target,a(y,n.lockRef.current))},[]),m=p.useCallback(function(y){u(y.type,Zu(y),y.target,a(y,n.lockRef.current))},[]);p.useEffect(function(){return qo.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,zo),document.addEventListener("touchmove",c,zo),document.addEventListener("touchstart",h,zo),function(){qo=qo.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,zo),document.removeEventListener("touchmove",c,zo),document.removeEventListener("touchstart",h,zo)}},[]);var v=n.removeScrollBar,x=n.inert;return p.createElement(p.Fragment,null,x?p.createElement(i,{styles:e5(s)}):null,v?p.createElement(W9,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function r5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const s5=k9(nR,n5);var ff=p.forwardRef(function(n,e){return p.createElement(hf,ur({},n,{ref:e,sideCar:s5}))});ff.classNames=hf.classNames;var Lm=["Enter"," "],i5=["ArrowDown","PageUp","Home"],aR=["ArrowUp","PageDown","End"],o5=[...i5,...aR],a5={ltr:[...Lm,"ArrowRight"],rtl:[...Lm,"ArrowLeft"]},c5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fu="Menu",[Sl,l5,u5]=au(fu),[Ao,cR]=Jn(fu,[u5,df,QA]),pf=df(),lR=QA(),[d5,Ro]=Ao(fu),[h5,pu]=Ao(fu),uR=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=n,a=pf(e),[c,u]=p.useState(null),h=p.useRef(!1),f=fn(i),m=sf(s);return p.useEffect(()=>{const v=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),d.jsx(qA,{...a,children:d.jsx(d5,{scope:e,open:t,onOpenChange:f,content:c,onContentChange:u,children:d.jsx(h5,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};uR.displayName=fu;var f5="MenuAnchor",ev=p.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=pf(t);return d.jsx(WA,{...s,...r,ref:e})});ev.displayName=f5;var tv="MenuPortal",[p5,dR]=Ao(tv,{forceMount:void 0}),hR=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Ro(tv,e);return d.jsx(p5,{scope:e,forceMount:t,children:d.jsx(Ar,{present:t||i.open,children:d.jsx(lu,{asChild:!0,container:s,children:r})})})};hR.displayName=tv;var Mn="MenuContent",[m5,nv]=Ao(Mn),fR=p.forwardRef((n,e)=>{const t=dR(Mn,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ro(Mn,n.__scopeMenu),o=pu(Mn,n.__scopeMenu);return d.jsx(Sl.Provider,{scope:n.__scopeMenu,children:d.jsx(Ar,{present:r||i.open,children:d.jsx(Sl.Slot,{scope:n.__scopeMenu,children:o.modal?d.jsx(g5,{...s,ref:e}):d.jsx(y5,{...s,ref:e})})})})}),g5=p.forwardRef((n,e)=>{const t=Ro(Mn,n.__scopeMenu),r=p.useRef(null),s=ke(e,r);return p.useEffect(()=>{const i=r.current;if(i)return Jy(i)},[]),d.jsx(rv,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:re(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),y5=p.forwardRef((n,e)=>{const t=Ro(Mn,n.__scopeMenu);return d.jsx(rv,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),v5=m9("MenuContent.ScrollLock"),rv=p.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:v,disableOutsideScroll:x,...y}=n,_=Ro(Mn,t),I=pu(Mn,t),b=pf(t),S=lR(t),P=l5(t),[N,j]=p.useState(null),T=p.useRef(null),E=ke(e,T,_.onContentChange),C=p.useRef(0),D=p.useRef(""),O=p.useRef(0),k=p.useRef(null),R=p.useRef("right"),q=p.useRef(0),te=x?ff:p.Fragment,G=x?{as:v5,allowPinchZoom:!0}:void 0,oe=K=>{var de,Me;const Ie=D.current+K,ce=P().filter(qe=>!qe.disabled),Re=document.activeElement,_e=(de=ce.find(qe=>qe.ref.current===Re))==null?void 0:de.textValue,it=ce.map(qe=>qe.textValue),ot=P5(it,Ie,_e),ft=(Me=ce.find(qe=>qe.textValue===ot))==null?void 0:Me.ref.current;(function qe(De){D.current=De,window.clearTimeout(C.current),De!==""&&(C.current=window.setTimeout(()=>qe(""),1e3))})(Ie),ft&&setTimeout(()=>ft.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),zy();const Y=p.useCallback(K=>{var ce,Re;return R.current===((ce=k.current)==null?void 0:ce.side)&&k5(K,(Re=k.current)==null?void 0:Re.area)},[]);return d.jsx(m5,{scope:t,searchRef:D,onItemEnter:p.useCallback(K=>{Y(K)&&K.preventDefault()},[Y]),onItemLeave:p.useCallback(K=>{var Ie;Y(K)||((Ie=T.current)==null||Ie.focus(),j(null))},[Y]),onTriggerLeave:p.useCallback(K=>{Y(K)&&K.preventDefault()},[Y]),pointerGraceTimerRef:O,onPointerGraceIntentChange:p.useCallback(K=>{k.current=K},[]),children:d.jsx(te,{...G,children:d.jsx(of,{asChild:!0,trapped:s,onMountAutoFocus:re(i,K=>{var Ie;K.preventDefault(),(Ie=T.current)==null||Ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:d.jsx(cu,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:v,children:d.jsx(f9,{asChild:!0,...S,dir:I.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:j,onEntryFocus:re(c,K=>{I.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(KA,{role:"menu","aria-orientation":"vertical","data-state":CR(_.open),"data-radix-menu-content":"",dir:I.dir,...b,...y,ref:E,style:{outline:"none",...y.style},onKeyDown:re(y.onKeyDown,K=>{const ce=K.target.closest("[data-radix-menu-content]")===K.currentTarget,Re=K.ctrlKey||K.altKey||K.metaKey,_e=K.key.length===1;ce&&(K.key==="Tab"&&K.preventDefault(),!Re&&_e&&oe(K.key));const it=T.current;if(K.target!==it||!o5.includes(K.key))return;K.preventDefault();const ft=P().filter(de=>!de.disabled).map(de=>de.ref.current);aR.includes(K.key)&&ft.reverse(),R5(ft)}),onBlur:re(n.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(C.current),D.current="")}),onPointerMove:re(n.onPointerMove,Al(K=>{const Ie=K.target,ce=q.current!==K.clientX;if(K.currentTarget.contains(Ie)&&ce){const Re=K.clientX>q.current?"right":"left";R.current=Re,q.current=K.clientX}}))})})})})})})});fR.displayName=Mn;var _5="MenuGroup",sv=p.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return d.jsx(Ee.div,{role:"group",...r,ref:e})});sv.displayName=_5;var w5="MenuLabel",pR=p.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return d.jsx(Ee.div,{...r,ref:e})});pR.displayName=w5;var ih="MenuItem",Nx="menu.itemSelect",mf=p.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=p.useRef(null),o=pu(ih,n.__scopeMenu),a=nv(ih,n.__scopeMenu),c=ke(e,i),u=p.useRef(!1),h=()=>{const f=i.current;if(!t&&f){const m=new CustomEvent(Nx,{bubbles:!0,cancelable:!0});f.addEventListener(Nx,v=>r==null?void 0:r(v),{once:!0}),Dy(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return d.jsx(mR,{...s,ref:c,disabled:t,onClick:re(n.onClick,h),onPointerDown:f=>{var m;(m=n.onPointerDown)==null||m.call(n,f),u.current=!0},onPointerUp:re(n.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:re(n.onKeyDown,f=>{const m=a.searchRef.current!=="";t||m&&f.key===" "||Lm.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});mf.displayName=ih;var mR=p.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,o=nv(ih,t),a=lR(t),c=p.useRef(null),u=ke(e,c),[h,f]=p.useState(!1),[m,v]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&v((x.textContent??"").trim())},[i.children]),d.jsx(Sl.ItemSlot,{scope:t,disabled:r,textValue:s??m,children:d.jsx(p9,{asChild:!0,...a,focusable:!r,children:d.jsx(Ee.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:re(n.onPointerMove,Al(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(n.onPointerLeave,Al(x=>o.onItemLeave(x))),onFocus:re(n.onFocus,()=>f(!0)),onBlur:re(n.onBlur,()=>f(!1))})})})}),b5="MenuCheckboxItem",gR=p.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return d.jsx(bR,{scope:n.__scopeMenu,checked:t,children:d.jsx(mf,{role:"menuitemcheckbox","aria-checked":oh(t)?"mixed":t,...s,ref:e,"data-state":ov(t),onSelect:re(s.onSelect,()=>r==null?void 0:r(oh(t)?!0:!t),{checkForDefaultPrevented:!1})})})});gR.displayName=b5;var yR="MenuRadioGroup",[x5,E5]=Ao(yR,{value:void 0,onValueChange:()=>{}}),vR=p.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=fn(r);return d.jsx(x5,{scope:n.__scopeMenu,value:t,onValueChange:i,children:d.jsx(sv,{...s,ref:e})})});vR.displayName=yR;var _R="MenuRadioItem",wR=p.forwardRef((n,e)=>{const{value:t,...r}=n,s=E5(_R,n.__scopeMenu),i=t===s.value;return d.jsx(bR,{scope:n.__scopeMenu,checked:i,children:d.jsx(mf,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":ov(i),onSelect:re(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});wR.displayName=_R;var iv="MenuItemIndicator",[bR,I5]=Ao(iv,{checked:!1}),xR=p.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=I5(iv,t);return d.jsx(Ar,{present:r||oh(i.checked)||i.checked===!0,children:d.jsx(Ee.span,{...s,ref:e,"data-state":ov(i.checked)})})});xR.displayName=iv;var T5="MenuSeparator",ER=p.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return d.jsx(Ee.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});ER.displayName=T5;var S5="MenuArrow",IR=p.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=pf(t);return d.jsx(HA,{...s,...r,ref:e})});IR.displayName=S5;var A5="MenuSub",[hK,TR]=Ao(A5),Bc="MenuSubTrigger",SR=p.forwardRef((n,e)=>{const t=Ro(Bc,n.__scopeMenu),r=pu(Bc,n.__scopeMenu),s=TR(Bc,n.__scopeMenu),i=nv(Bc,n.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:n.__scopeMenu},h=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>h,[h]),p.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),c(null)}},[a,c]),d.jsx(ev,{asChild:!0,...u,children:d.jsx(mR,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":CR(t.open),...n,ref:cs(e,s.onTriggerChange),onClick:f=>{var m;(m=n.onClick)==null||m.call(n,f),!(n.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:re(n.onPointerMove,Al(f=>{i.onItemEnter(f),!f.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),h()},100))})),onPointerLeave:re(n.onPointerLeave,Al(f=>{var v,x;h();const m=(v=t.content)==null?void 0:v.getBoundingClientRect();if(m){const y=(x=t.content)==null?void 0:x.dataset.side,_=y==="right",I=_?-5:5,b=m[_?"left":"right"],S=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+I,y:f.clientY},{x:b,y:m.top},{x:S,y:m.top},{x:S,y:m.bottom},{x:b,y:m.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:re(n.onKeyDown,f=>{var v;const m=i.searchRef.current!=="";n.disabled||m&&f.key===" "||a5[r.dir].includes(f.key)&&(t.onOpenChange(!0),(v=t.content)==null||v.focus(),f.preventDefault())})})})});SR.displayName=Bc;var AR="MenuSubContent",RR=p.forwardRef((n,e)=>{const t=dR(Mn,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ro(Mn,n.__scopeMenu),o=pu(Mn,n.__scopeMenu),a=TR(AR,n.__scopeMenu),c=p.useRef(null),u=ke(e,c);return d.jsx(Sl.Provider,{scope:n.__scopeMenu,children:d.jsx(Ar,{present:r||i.open,children:d.jsx(Sl.Slot,{scope:n.__scopeMenu,children:d.jsx(rv,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:re(n.onFocusOutside,h=>{h.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:re(n.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:re(n.onKeyDown,h=>{var v;const f=h.currentTarget.contains(h.target),m=c5[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(v=a.trigger)==null||v.focus(),h.preventDefault())})})})})})});RR.displayName=AR;function CR(n){return n?"open":"closed"}function oh(n){return n==="indeterminate"}function ov(n){return oh(n)?"indeterminate":n?"checked":"unchecked"}function R5(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function C5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function P5(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=C5(n,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function N5(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,h=a.y,f=c.x,m=c.y;h>r!=m>r&&t<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function k5(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return N5(t,e)}function Al(n){return e=>e.pointerType==="mouse"?n(e):void 0}var D5=uR,O5=ev,V5=hR,M5=fR,j5=sv,L5=pR,F5=mf,U5=gR,B5=vR,$5=wR,z5=xR,q5=ER,W5=IR,K5=SR,H5=RR,gf="DropdownMenu",[G5]=Jn(gf,[cR]),sn=cR(),[Q5,PR]=G5(gf),NR=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=n,c=sn(e),u=p.useRef(null),[h,f]=ni({prop:s,defaultProp:i??!1,onChange:o,caller:gf});return d.jsx(Q5,{scope:e,triggerId:Kr(),triggerRef:u,contentId:Kr(),open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:a,children:d.jsx(D5,{...c,open:h,onOpenChange:f,dir:r,modal:a,children:t})})};NR.displayName=gf;var kR="DropdownMenuTrigger",DR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=PR(kR,t),o=sn(t);return d.jsx(O5,{asChild:!0,...o,children:d.jsx(Ee.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:cs(e,i.triggerRef),onPointerDown:re(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:re(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});DR.displayName=kR;var X5="DropdownMenuPortal",OR=n=>{const{__scopeDropdownMenu:e,...t}=n,r=sn(e);return d.jsx(V5,{...r,...t})};OR.displayName=X5;var VR="DropdownMenuContent",MR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=PR(VR,t),i=sn(t),o=p.useRef(!1);return d.jsx(M5,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:re(n.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:re(n.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});MR.displayName=VR;var Y5="DropdownMenuGroup",Z5=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(j5,{...s,...r,ref:e})});Z5.displayName=Y5;var J5="DropdownMenuLabel",jR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(L5,{...s,...r,ref:e})});jR.displayName=J5;var e3="DropdownMenuItem",LR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(F5,{...s,...r,ref:e})});LR.displayName=e3;var t3="DropdownMenuCheckboxItem",FR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(U5,{...s,...r,ref:e})});FR.displayName=t3;var n3="DropdownMenuRadioGroup",r3=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(B5,{...s,...r,ref:e})});r3.displayName=n3;var s3="DropdownMenuRadioItem",UR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx($5,{...s,...r,ref:e})});UR.displayName=s3;var i3="DropdownMenuItemIndicator",BR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(z5,{...s,...r,ref:e})});BR.displayName=i3;var o3="DropdownMenuSeparator",$R=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(q5,{...s,...r,ref:e})});$R.displayName=o3;var a3="DropdownMenuArrow",c3=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(W5,{...s,...r,ref:e})});c3.displayName=a3;var l3="DropdownMenuSubTrigger",zR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(K5,{...s,...r,ref:e})});zR.displayName=l3;var u3="DropdownMenuSubContent",qR=p.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=sn(t);return d.jsx(H5,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qR.displayName=u3;var d3=NR,h3=DR,f3=OR,WR=MR,KR=jR,HR=LR,GR=FR,QR=UR,XR=BR,YR=$R,ZR=zR,JR=qR;const Fm=d3,Um=h3,p3=p.forwardRef(({className:n,inset:e,children:t,...r},s)=>d.jsxs(ZR,{ref:s,className:me("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...r,children:[t,d.jsx(ZU,{className:"ml-auto"})]}));p3.displayName=ZR.displayName;const m3=p.forwardRef(({className:n,...e},t)=>d.jsx(JR,{ref:t,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));m3.displayName=JR.displayName;const ah=p.forwardRef(({className:n,sideOffset:e=4,...t},r)=>d.jsx(f3,{children:d.jsx(WR,{ref:r,sideOffset:e,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));ah.displayName=WR.displayName;const on=p.forwardRef(({className:n,inset:e,...t},r)=>d.jsx(HR,{ref:r,className:me("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));on.displayName=HR.displayName;const g3=p.forwardRef(({className:n,children:e,checked:t,...r},s)=>d.jsxs(GR,{ref:s,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(XR,{children:d.jsx(Ly,{className:"h-4 w-4"})})}),e]}));g3.displayName=GR.displayName;const y3=p.forwardRef(({className:n,children:e,...t},r)=>d.jsxs(QR,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(XR,{children:d.jsx(oB,{className:"h-2 w-2 fill-current"})})}),e]}));y3.displayName=QR.displayName;const av=p.forwardRef(({className:n,inset:e,...t},r)=>d.jsx(KR,{ref:r,className:me("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));av.displayName=KR.displayName;const ea=p.forwardRef(({className:n,...e},t)=>d.jsx(YR,{ref:t,className:me("-mx-1 my-1 h-px bg-muted",n),...e}));ea.displayName=YR.displayName;function v3(n){const e=_3(n),t=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(b3);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return d.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function _3(n){const e=p.forwardRef((t,r)=>{const{children:s,...i}=t;if(p.isValidElement(s)){const o=E3(s),a=x3(i,s.props);return s.type!==p.Fragment&&(a.ref=r?cs(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var w3=Symbol("radix.slottable");function b3(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===w3}function x3(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function E3(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var yf="Dialog",[eC,tC]=Jn(yf),[I3,er]=eC(yf),nC=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=n,a=p.useRef(null),c=p.useRef(null),[u,h]=ni({prop:r,defaultProp:s??!1,onChange:i,caller:yf});return d.jsx(I3,{scope:e,triggerRef:a,contentRef:c,contentId:Kr(),titleId:Kr(),descriptionId:Kr(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:t})};nC.displayName=yf;var rC="DialogTrigger",sC=p.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=er(rC,t),i=ke(e,s.triggerRef);return d.jsx(Ee.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":uv(s.open),...r,ref:i,onClick:re(n.onClick,s.onOpenToggle)})});sC.displayName=rC;var cv="DialogPortal",[T3,iC]=eC(cv,{forceMount:void 0}),oC=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=er(cv,e);return d.jsx(T3,{scope:e,forceMount:t,children:p.Children.map(r,o=>d.jsx(Ar,{present:t||i.open,children:d.jsx(lu,{asChild:!0,container:s,children:o})}))})};oC.displayName=cv;var ch="DialogOverlay",aC=p.forwardRef((n,e)=>{const t=iC(ch,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=er(ch,n.__scopeDialog);return i.modal?d.jsx(Ar,{present:r||i.open,children:d.jsx(A3,{...s,ref:e})}):null});aC.displayName=ch;var S3=v3("DialogOverlay.RemoveScroll"),A3=p.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=er(ch,t);return d.jsx(ff,{as:S3,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(Ee.div,{"data-state":uv(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),po="DialogContent",cC=p.forwardRef((n,e)=>{const t=iC(po,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=er(po,n.__scopeDialog);return d.jsx(Ar,{present:r||i.open,children:i.modal?d.jsx(R3,{...s,ref:e}):d.jsx(C3,{...s,ref:e})})});cC.displayName=po;var R3=p.forwardRef((n,e)=>{const t=er(po,n.__scopeDialog),r=p.useRef(null),s=ke(e,t.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return Jy(i)},[]),d.jsx(lC,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(n.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:re(n.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:re(n.onFocusOutside,i=>i.preventDefault())})}),C3=p.forwardRef((n,e)=>{const t=er(po,n.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return d.jsx(lC,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,i),i.defaultPrevented||(r.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),lC=p.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=n,a=er(po,t),c=p.useRef(null),u=ke(e,c);return zy(),d.jsxs(d.Fragment,{children:[d.jsx(of,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:d.jsx(cu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":uv(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(N3,{titleId:a.titleId}),d.jsx(D3,{contentRef:c,descriptionId:a.descriptionId})]})]})}),lv="DialogTitle",uC=p.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=er(lv,t);return d.jsx(Ee.h2,{id:s.titleId,...r,ref:e})});uC.displayName=lv;var dC="DialogDescription",hC=p.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=er(dC,t);return d.jsx(Ee.p,{id:s.descriptionId,...r,ref:e})});hC.displayName=dC;var fC="DialogClose",pC=p.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=er(fC,t);return d.jsx(Ee.button,{type:"button",...r,ref:e,onClick:re(n.onClick,()=>s.onOpenChange(!1))})});pC.displayName=fC;function uv(n){return n?"open":"closed"}var mC="DialogTitleWarning",[P3,gC]=H4(mC,{contentName:po,titleName:lv,docsSlug:"dialog"}),N3=({titleId:n})=>{const e=gC(mC),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},k3="DialogDescriptionWarning",D3=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gC(k3).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},yC=nC,vC=sC,_C=oC,dv=aC,hv=cC,fv=uC,pv=hC,mv=pC;const O3=yC,V3=vC,M3=_C,wC=p.forwardRef(({className:n,...e},t)=>d.jsx(dv,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));wC.displayName=dv.displayName;const j3=rc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),bC=p.forwardRef(({side:n="right",className:e,children:t,...r},s)=>d.jsxs(M3,{children:[d.jsx(wC,{}),d.jsxs(hv,{ref:s,className:me(j3({side:n}),e),...r,children:[t,d.jsxs(mv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[d.jsx(rf,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bC.displayName=hv.displayName;const L3=({className:n,...e})=>d.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",n),...e});L3.displayName="SheetHeader";const F3=({className:n,...e})=>d.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});F3.displayName="SheetFooter";const U3=p.forwardRef(({className:n,...e},t)=>d.jsx(fv,{ref:t,className:me("text-lg font-semibold text-foreground",n),...e}));U3.displayName=fv.displayName;const B3=p.forwardRef(({className:n,...e},t)=>d.jsx(pv,{ref:t,className:me("text-sm text-muted-foreground",n),...e}));B3.displayName=pv.displayName;var $3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],z3=$3.reduce((n,e)=>{const t=By(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),q3="Separator",kx="horizontal",W3=["horizontal","vertical"],xC=p.forwardRef((n,e)=>{const{decorative:t,orientation:r=kx,...s}=n,i=K3(r)?r:kx,a=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return d.jsx(z3.div,{"data-orientation":i,...a,...s,ref:e})});xC.displayName=q3;function K3(n){return W3.includes(n)}var EC=xC;const Fs=p.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},s)=>d.jsx(EC,{ref:s,decorative:t,orientation:e,className:me("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));Fs.displayName=EC.displayName;const un=p.forwardRef(({className:n,type:e,...t},r)=>d.jsx("input",{type:e,className:me("flex h-12 w-full rounded-[0.625rem] border border-border bg-card px-4 py-3 text-base shadow-soft ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground/60 transition-gentle focus-visible:outline-none focus-visible:border-ring/50 focus-visible:ring-2 focus-visible:ring-ring/30 focus-visible:ring-offset-1 focus-visible:shadow-elevated disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted/30",n),ref:r,...t}));un.displayName="Input";function Dx(){const n=jn(),[e]=Ha(),[t,r]=p.useState("");p.useEffect(()=>{r(e.get("q")||"")},[e]);const s=i=>{i.preventDefault(),t.trim()&&n(`/search?q=${encodeURIComponent(t)}`)};return d.jsx("form",{onSubmit:s,className:"hidden sm:block w-full max-w-xs md:max-w-sm",children:d.jsxs("div",{className:"relative",children:[d.jsx(SB,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),d.jsx(un,{type:"search",placeholder:"Pesquisar artigos...",className:"pl-9",value:t,onChange:i=>r(i.target.value)})]})})}function Hr({className:n,...e}){return d.jsx("div",{className:me("animate-pulse rounded-md bg-muted",n),...e})}const H3=we.lazy(()=>EE(()=>import("./side-cart-Dz-fSgiX.js"),__vite__mapDeps([0,1,2]))),Ox=["Roupa","Calado","Livros","Eletrnica","Acessrios","Desporto","Casa","Outro"],G3=()=>{const[n,e]=p.useState("light");return p.useEffect(()=>{if(typeof window>"u")return;const s=window.document.documentElement.classList.contains("dark")?"dark":"light";e(s)},[]),{theme:n,toggleTheme:()=>{if(typeof window>"u")return;const r=window.document.documentElement,s=r.classList.contains("dark"),i=s?"light":"dark";s?r.classList.remove("dark"):r.classList.add("dark"),e(i)}}};function Vx(){return d.jsx(Hr,{className:"hidden h-10 w-full max-w-xs md:block"})}function Q3(){const{user:n}=nc(),e=jn(),[t,r]=p.useState([]),[s,i]=p.useState(0);p.useEffect(()=>{if(!n){r([]),i(0);return}const c=el(Jc(jt,"notifications"),ir("userId","==",n.uid),dd("createdAt","desc")),u=$j(c,h=>{const f=h.docs.map(v=>({id:v.id,...v.data()}));r(f);const m=f.filter(v=>!v.read).length;i(m)});return()=>u()},[n]);const o=async()=>{if(!n||s===0)return;const c=Jj(jt);t.forEach(u=>{if(!u.read){const h=yn(jt,"notifications",u.id);c.update(h,{read:!0})}}),await c.commit()},a=async c=>{c.read||await ra(yn(jt,"notifications",c.id),{read:!0}),e(c.link)};return d.jsxs(Fm,{onOpenChange:c=>{c&&o()},children:[d.jsx(Um,{asChild:!0,children:d.jsxs(rt,{variant:"ghost",size:"icon",className:"relative","aria-label":`Notificaes${s>0?` (${s} no lidas)`:""}`,children:[d.jsx(GU,{className:"h-5 w-5"}),s>0&&d.jsx(Di,{variant:"destructive",className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full p-1 text-xs","aria-hidden":"true",children:s})]})}),d.jsxs(ah,{align:"end",className:"w-80",children:[d.jsx(av,{children:"Notificaes"}),d.jsx(ea,{}),t.length>0?t.slice(0,5).map(c=>d.jsx(on,{onSelect:()=>a(c),className:me("cursor-pointer whitespace-normal",!c.read&&"bg-accent"),children:d.jsxs("div",{className:"flex items-start gap-2",children:[!c.read&&d.jsx("div",{className:"h-2 w-2 rounded-full bg-primary mt-1.5"}),d.jsx("p",{className:"flex-1",children:c.message})]})},c.id)):d.jsx("p",{className:"p-2 text-sm text-muted-foreground",children:"No tem notificaes."})]})]})}function X3(){const n=jn(),t=ss().pathname,{cartCount:r}=M0(),{user:s,logout:i}=nc(),{toast:o}=tf(),[a,c]=p.useState(!1),[u,h]=p.useState(!1),[f,m]=p.useState(!1),[v,x]=p.useState(!1),{theme:y,toggleTheme:_}=G3();p.useEffect(()=>{m(!0)},[]),p.useEffect(()=>{if(r>0&&f){x(!0);const N=setTimeout(()=>x(!1),500);return()=>clearTimeout(N)}},[r,f]);const I=()=>{i(),n("/")},b=N=>{s||(N.preventDefault(),o({variant:"destructive",title:"Acesso Negado",description:"Precisa de iniciar sesso para vender um artigo."}),n("/login?redirect=/sell"))},S=({to:N,children:j,onClick:T})=>{const E=t===N;return d.jsx(Oe,{to:N,className:me("transition-colors hover:text-foreground",E?"text-foreground":"text-foreground/60"),onClick:T,children:j})},P=({to:N,children:j})=>d.jsx(Oe,{to:N,className:"block py-2 text-lg",onClick:()=>c(!1),children:j});return d.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex h-16 items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsxs(Oe,{to:"/",className:"flex items-center gap-2",children:[d.jsx(lA,{className:"h-6 w-6 text-primary"}),d.jsx("span",{className:"font-bold text-lg",children:"Rewear"})]}),d.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm font-medium",children:[d.jsxs(Fm,{children:[d.jsxs(Um,{className:"flex items-center gap-1 focus:outline-none transition-colors text-foreground/60 hover:text-foreground",children:["Catlogo",d.jsx(Fy,{className:"h-4 w-4"})]}),d.jsxs(ah,{children:[d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/catalog",children:"Todos os Artigos"})}),d.jsx(ea,{}),Ox.map(N=>d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:`/catalog?category=${N}`,children:N})},N))]})]}),d.jsx(S,{to:"/sell",onClick:b,children:"Vender"})]})]}),d.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[d.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[d.jsx(p.Suspense,{fallback:d.jsx(Vx,{}),children:d.jsx(Dx,{})}),d.jsxs(rt,{variant:"ghost",size:"icon",onClick:_,"aria-label":`Alternar para modo ${y==="light"?"escuro":"claro"}`,children:[y==="light"?d.jsx(sx,{className:"h-4 w-4"}):d.jsx(ox,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Alternar tema"})]})]}),f?s?d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsxs("div",{className:"hidden md:flex items-center gap-1.5",children:[d.jsx(rt,{variant:"ghost",size:"icon",asChild:!0,children:d.jsxs(Oe,{to:"/favorites","aria-label":"Ver favoritos",children:[d.jsx(hB,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Favoritos"})]})}),d.jsx(rt,{variant:"ghost",size:"icon",asChild:!0,children:d.jsxs(Oe,{to:"/inbox","aria-label":"Ver mensagens",children:[d.jsx(rx,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Mensagens"})]})}),d.jsx(Q3,{})]}),d.jsxs(Fm,{children:[d.jsx(Um,{asChild:!0,children:d.jsx(rt,{variant:"ghost",size:"icon",children:d.jsx(ax,{className:"h-4 w-4"})})}),d.jsxs(ah,{align:"end",className:"w-48",children:[d.jsx(av,{children:s.name}),d.jsx(ea,{}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/profile",children:"Perfil"})}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/dashboard",children:"Dashboard"})}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/wallet",children:"Carteira"})}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/favorites",children:"Favoritos"})}),d.jsx(on,{asChild:!0,children:d.jsxs(Oe,{to:"/inbox",className:"flex items-center gap-2",children:[d.jsx(rx,{className:"h-4 w-4"})," Mensagens"]})}),d.jsx(ea,{}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/about",children:"Sobre"})}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/faq",children:"FAQ"})}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/contact",children:"Contacto"})}),d.jsx(ea,{}),d.jsx(on,{asChild:!0,children:d.jsx(Oe,{to:"/settings",children:"Definies"})}),d.jsx(on,{onClick:I,children:"Terminar Sesso"})]})]})]}):d.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[d.jsx(rt,{variant:"ghost",asChild:!0,children:d.jsx(Oe,{to:"/login",children:"Iniciar Sesso"})}),d.jsx(rt,{asChild:!0,children:d.jsx(Oe,{to:"/register",children:"Registar"})})]}):d.jsx(Hr,{className:"h-10 w-10 md:w-auto"}),d.jsxs(rt,{variant:"ghost",size:"icon",className:me("relative",v&&"animate-bounce"),onClick:()=>h(!0),children:[d.jsx(uA,{className:"h-4 w-4"}),f&&r>0&&d.jsx(Di,{variant:"default",className:"absolute -right-2 -top-2 flex h-5 w-5 items-center justify-center rounded-full p-1 text-xs",children:r}),d.jsx("span",{className:"sr-only",children:"Abrir carrinho"})]}),f&&d.jsx(p.Suspense,{fallback:null,children:d.jsx(H3,{open:u,onOpenChange:h})}),d.jsxs(O3,{open:a,onOpenChange:c,children:[d.jsx(V3,{asChild:!0,children:d.jsxs(rt,{variant:"ghost",size:"icon",className:"md:hidden",children:[d.jsx(mB,{className:"h-6 w-6"}),d.jsx("span",{className:"sr-only",children:"Abrir menu"})]})}),d.jsx(bC,{side:"right",className:"w-[300px] sm:w-[400px]",children:d.jsxs("nav",{className:"flex flex-col gap-4 mt-8",children:[d.jsx(p.Suspense,{fallback:d.jsx(Vx,{}),children:d.jsx(Dx,{})}),d.jsx(Fs,{}),f?s?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 border-b pb-4",children:[d.jsx(ax,{className:"h-6 w-6"}),d.jsx("span",{className:"font-semibold",children:s.name})]}),d.jsx(P,{to:"/profile",children:"Perfil"}),d.jsx(P,{to:"/dashboard",children:"Dashboard"}),d.jsx(P,{to:"/wallet",children:"Carteira"}),d.jsx(P,{to:"/favorites",children:"Favoritos"}),d.jsx(P,{to:"/inbox",children:"Mensagens"}),d.jsx(P,{to:"/settings",children:"Definies"})]}):d.jsxs(d.Fragment,{children:[d.jsx(P,{to:"/login",children:"Iniciar Sesso"}),d.jsx(P,{to:"/register",children:"Registar"})]}):d.jsx(Hr,{className:"h-8 w-32"}),d.jsx(P,{to:"/sell",children:"Vender"}),d.jsx(Fs,{}),d.jsx(P,{to:"/catalog",children:"Catlogo Completo"}),Ox.map(N=>d.jsx(P,{to:`/catalog?category=${N}`,children:d.jsx("span",{className:"ml-4 text-muted-foreground",children:N})},N)),d.jsx(Fs,{}),d.jsx(P,{to:"/about",children:"Sobre"}),d.jsx(P,{to:"/faq",children:"FAQ"}),d.jsx(P,{to:"/contact",children:"Contacto"}),d.jsx(Fs,{}),d.jsxs("div",{className:"flex justify-between items-center px-2",children:[d.jsxs("span",{className:"font-medium",children:["Modo ",y==="light"?"Escuro":"Claro"]}),d.jsx(rt,{variant:"ghost",size:"icon",onClick:_,children:y==="light"?d.jsx(sx,{className:"h-4 w-4"}):d.jsx(ox,{className:"h-4 w-4"})})]}),f&&s&&d.jsx(rt,{variant:"ghost",onClick:()=>{I(),c(!1)},children:"Terminar Sesso"})]})})]})]})]})})}function Y3(){return d.jsx(X3,{})}function Z3(){return d.jsx("footer",{className:"border-t bg-background",children:d.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs(Oe,{to:"/",className:"flex items-center gap-2",children:[d.jsx(lA,{className:"h-6 w-6 text-primary"})," ",d.jsx("span",{className:"font-bold text-lg",children:"Rewear"})]}),d.jsx("p",{className:"text-muted-foreground text-sm",children:"O seu mercado online para artigos em segunda mo."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-foreground",children:"Comprar"}),d.jsxs("ul",{className:"mt-4 space-y-2 text-sm",children:[d.jsx("li",{children:d.jsx(Oe,{to:"/",className:"text-muted-foreground hover:text-foreground",children:"Todos os Produtos"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Roupa",className:"text-muted-foreground hover:text-foreground",children:"Roupa"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Calado",className:"text-muted-foreground hover:text-foreground",children:"Calado"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Livros",className:"text-muted-foreground hover:text-foreground",children:"Livros"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Eletrnica",className:"text-muted-foreground hover:text-foreground",children:"Eletrnica"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Acessrios",className:"text-muted-foreground hover:text-foreground",children:"Acessrios"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Desporto",className:"text-muted-foreground hover:text-foreground",children:"Desporto"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Casa",className:"text-muted-foreground hover:text-foreground",children:"Casa"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/?category=Outro",className:"text-muted-foreground hover:text-foreground",children:"Outro"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-foreground",children:"Vender"}),d.jsxs("ul",{className:"mt-4 space-y-2 text-sm",children:[d.jsx("li",{children:d.jsx(Oe,{to:"/sell",className:"text-muted-foreground hover:text-foreground",children:"Como vender"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/sell",className:"text-muted-foreground hover:text-foreground",children:"Comear a vender"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-foreground",children:"Ajuda"}),d.jsxs("ul",{className:"mt-4 space-y-2 text-sm",children:[d.jsx("li",{children:d.jsx(Oe,{to:"/about",className:"text-muted-foreground hover:text-foreground",children:"Sobre Ns"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/contact",className:"text-muted-foreground hover:text-foreground",children:"Contacto"})}),d.jsx("li",{children:d.jsx(Oe,{to:"/faq",className:"text-muted-foreground hover:text-foreground",children:"FAQ"})})]})]})]}),d.jsx("div",{className:"mt-8 border-t pt-8 text-center text-sm text-muted-foreground",children:d.jsxs("p",{children:[" ",new Date().getFullYear()," Rewear. Todos os direitos reservados."]})})]})})}function J3(){return d.jsx(Z3,{})}function IC({src:n,alt:e,width:t,height:r,className:s,fill:i,style:o,...a}){const c=i?{position:"absolute",height:"100%",width:"100%",inset:0,objectFit:"cover",...o}:o||{};return d.jsx("img",{src:n,alt:e,width:t,height:r,className:s,style:c,loading:a.priority?"eager":"lazy",...a})}const Dn=p.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:me("rounded-[0.75rem] border border-border/50 bg-card text-card-foreground shadow-soft transition-gentle hover:shadow-elevated",n),...e}));Dn.displayName="Card";const On=p.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:me("flex flex-col space-y-2 p-7",n),...e}));On.displayName="CardHeader";const Qn=p.forwardRef(({className:n,...e},t)=>d.jsx("h3",{ref:t,className:me("text-2xl font-heading font-semibold leading-snug tracking-normal text-foreground",n),...e}));Qn.displayName="CardTitle";const Rl=p.forwardRef(({className:n,...e},t)=>d.jsx("p",{ref:t,className:me("text-base leading-relaxed text-muted-foreground",n),...e}));Rl.displayName="CardDescription";const Vn=p.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:me("p-7 pt-0",n),...e}));Vn.displayName="CardContent";const vf=p.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:me("flex items-center gap-3 p-7 pt-0",n),...e}));vf.displayName="CardFooter";var ez=Symbol("radix.slottable");function tz(n){const e=({children:t})=>d.jsx(d.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=ez,e}var TC="AlertDialog",[nz]=Jn(TC,[tC]),ls=tC(),SC=n=>{const{__scopeAlertDialog:e,...t}=n,r=ls(e);return d.jsx(yC,{...r,...t,modal:!0})};SC.displayName=TC;var rz="AlertDialogTrigger",AC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=ls(t);return d.jsx(vC,{...s,...r,ref:e})});AC.displayName=rz;var sz="AlertDialogPortal",RC=n=>{const{__scopeAlertDialog:e,...t}=n,r=ls(e);return d.jsx(_C,{...r,...t})};RC.displayName=sz;var iz="AlertDialogOverlay",CC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=ls(t);return d.jsx(dv,{...s,...r,ref:e})});CC.displayName=iz;var ua="AlertDialogContent",[oz,az]=nz(ua),cz=tz("AlertDialogContent"),PC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,children:r,...s}=n,i=ls(t),o=p.useRef(null),a=ke(e,o),c=p.useRef(null);return d.jsx(P3,{contentName:ua,titleName:NC,docsSlug:"alert-dialog",children:d.jsx(oz,{scope:t,cancelRef:c,children:d.jsxs(hv,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:re(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[d.jsx(cz,{children:r}),d.jsx(uz,{contentRef:o})]})})})});PC.displayName=ua;var NC="AlertDialogTitle",kC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=ls(t);return d.jsx(fv,{...s,...r,ref:e})});kC.displayName=NC;var DC="AlertDialogDescription",OC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=ls(t);return d.jsx(pv,{...s,...r,ref:e})});OC.displayName=DC;var lz="AlertDialogAction",VC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,s=ls(t);return d.jsx(mv,{...s,...r,ref:e})});VC.displayName=lz;var MC="AlertDialogCancel",jC=p.forwardRef((n,e)=>{const{__scopeAlertDialog:t,...r}=n,{cancelRef:s}=az(MC,t),i=ls(t),o=ke(e,s);return d.jsx(mv,{...i,...r,ref:o})});jC.displayName=MC;var uz=({contentRef:n})=>{const e=`\`${ua}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ua}\` by passing a \`${DC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ua}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=n.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,n]),null},dz=SC,hz=AC,fz=RC,LC=CC,FC=PC,UC=VC,BC=jC,$C=kC,zC=OC;const pz=dz,mz=hz,gz=fz,qC=p.forwardRef(({className:n,...e},t)=>d.jsx(LC,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));qC.displayName=LC.displayName;const WC=p.forwardRef(({className:n,...e},t)=>d.jsxs(gz,{children:[d.jsx(qC,{}),d.jsx(FC,{ref:t,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...e})]}));WC.displayName=FC.displayName;const KC=({className:n,...e})=>d.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",n),...e});KC.displayName="AlertDialogHeader";const HC=({className:n,...e})=>d.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});HC.displayName="AlertDialogFooter";const GC=p.forwardRef(({className:n,...e},t)=>d.jsx($C,{ref:t,className:me("text-lg font-semibold",n),...e}));GC.displayName=$C.displayName;const QC=p.forwardRef(({className:n,...e},t)=>d.jsx(zC,{ref:t,className:me("text-sm text-muted-foreground",n),...e}));QC.displayName=zC.displayName;const XC=p.forwardRef(({className:n,...e},t)=>d.jsx(UC,{ref:t,className:me($y(),n),...e}));XC.displayName=UC.displayName;const YC=p.forwardRef(({className:n,...e},t)=>d.jsx(BC,{ref:t,className:me($y({variant:"outline"}),"mt-2 sm:mt-0",n),...e}));YC.displayName=BC.displayName;function yz(n,e){if(n.includes("firebasestorage.googleapis.com")){const t=new URL(n);return t.searchParams.set("w",e.toString()),t.toString()}return n}const vz=({product:n,priority:e=!1,index:t=0})=>{const{addToCart:r}=M0(),{toast:s}=tf(),{user:i,addToWallet:o}=nc(),{deleteProduct:a,markAsSold:c}=ef(),u=jn(),h=i&&i.uid===n.userId,f=e||t<6,m=b=>{b.target.closest(".card-actions-footer")||u(`/product/${n.id}`)},v=b=>{b.stopPropagation()},x=b=>{v(b),r({product:n,quantity:1}),s({title:"Adicionado ao carrinho",description:`${n.name} foi adicionado ao seu carrinho.`})},y=b=>{v(b),u(`/product/${n.id}/edit`)},_=async b=>{v(b);try{await a(n.id),s({title:"Produto Removido",description:"O seu produto foi removido com sucesso."})}catch(S){console.error("Erro ao apagar produto:",S),s({variant:"destructive",title:"Erro ao apagar",description:"No foi possvel remover o produto."})}},I=async b=>{v(b);try{await c(n.id),await o(n.price),s({title:"Produto Vendido!",description:`${n.price.toFixed(2)} foram adicionados  sua carteira.`})}catch{s({variant:"destructive",title:"Erro",description:"No foi possvel concluir a ao."})}};return d.jsxs(Dn,{onClick:m,tabIndex:0,onKeyDown:b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),m(b))},className:me("flex flex-col overflow-hidden transition-smooth hover:shadow-floating hover:-translate-y-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 motion-reduce:transition-none motion-reduce:transform-none h-full cursor-pointer group border-border/50",n.status==="vendido"&&"opacity-60 grayscale"),children:[d.jsxs("div",{className:"flex-grow",children:[d.jsx(On,{className:"p-0",children:d.jsxs("div",{className:"relative aspect-[4/3] w-full overflow-hidden bg-muted/30 rounded-t-[0.75rem]",children:[d.jsx(IC,{src:yz(n.imageUrls[0],700),alt:n.name,fill:!0,priority:f,sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw",className:"object-cover transition-organic group-hover:scale-110 motion-reduce:transition-none motion-reduce:transform-none"}),n.status==="vendido"&&d.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center backdrop-blur-sm",children:d.jsx(Di,{variant:"destructive",className:"text-lg font-bold shadow-lg",children:"VENDIDO"})})]})}),d.jsxs(Vn,{className:"p-5 space-y-3",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsx(Qn,{className:"text-base md:text-lg font-semibold leading-snug group-hover:text-primary transition-gentle line-clamp-2",children:n.name}),d.jsxs("div",{className:"text-xl font-bold text-primary whitespace-nowrap",children:[n.price.toFixed(2),""]})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.isVerified&&d.jsxs(Di,{variant:"default",className:"bg-blue-500 hover:bg-blue-600 shadow-sm",children:[d.jsx(RB,{className:"mr-1 h-3 w-3"})," Verificado"]}),d.jsx(Di,{variant:"outline",className:"font-medium",children:n.condition}),d.jsx(Di,{variant:"secondary",className:"font-medium",children:n.category})]})]})]}),d.jsx(vf,{className:"p-5 pt-0 mt-auto card-actions-footer",children:h?d.jsxs("div",{className:"w-full flex flex-col gap-2.5",children:[n.status!=="vendido"&&d.jsxs(rt,{variant:"outline",size:"sm",className:"w-full",onClick:I,children:[d.jsx(sB,{className:"mr-2 h-4 w-4"}),"Marcar como Vendido"]}),d.jsxs("div",{className:"flex gap-2.5",children:[d.jsxs(rt,{variant:"outline",size:"sm",className:"flex-1",onClick:y,children:[d.jsx(bB,{className:"mr-1.5 h-4 w-4"}),"Editar"]}),d.jsxs(pz,{onOpenChange:b=>b&&v,children:[d.jsx(mz,{asChild:!0,children:d.jsxs(rt,{variant:"destructive",size:"sm",className:"flex-1",onClick:v,children:[d.jsx(OB,{className:"mr-1.5 h-4 w-4"}),"Apagar"]})}),d.jsxs(WC,{onClick:v,children:[d.jsxs(KC,{children:[d.jsx(GC,{children:"Tem a certeza?"}),d.jsx(QC,{children:"Esta ao no pode ser desfeita. O seu produto ser apagado permanentemente."})]}),d.jsxs(HC,{children:[d.jsx(YC,{children:"Cancelar"}),d.jsx(XC,{onClick:_,children:"Continuar"})]})]})]})]})]}):d.jsxs(rt,{className:"w-full font-medium",onClick:x,disabled:!i||n.status==="vendido",children:[d.jsx(uA,{className:"mr-2 h-4 w-4"}),n.status==="vendido"?"Artigo Indisponvel":i?"Adicionar ao Carrinho":"Faa login para comprar"]})})]})},Mx=we.memo(vz,(n,e)=>{const t=n.product,r=e.product;return t.id===r.id&&t.price===r.price&&t.status===r.status&&t.name===r.name&&t.imageUrls[0]===r.imageUrls[0]&&t.isVerified===r.isVerified}),_z=()=>d.jsxs("div",{className:"space-y-2",children:[d.jsx(Hr,{className:"h-[250px] w-full rounded-lg"}),d.jsx(Hr,{className:"h-5 w-3/4"}),d.jsx(Hr,{className:"h-5 w-1/2"})]});function ZC({personalized:n=!1}){const[e]=Ha(),{products:t,loadMoreProducts:r,hasMoreProducts:s,loading:i}=ef(),{user:o}=nc(),[a,c]=p.useState(!1),u=p.useRef(),h=p.useRef(),f=p.useCallback(async()=>{a||!s||(h.current&&clearTimeout(h.current),h.current=setTimeout(async()=>{c(!0);try{await r()}finally{c(!1)}},100))},[a,s,r]),m=p.useCallback(I=>{a||(u.current&&u.current.disconnect(),u.current=new IntersectionObserver(b=>{b[0].isIntersecting&&s&&f()},{rootMargin:"800px",threshold:.05}),I&&u.current.observe(I))},[a,s,f]);p.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const v=p.useMemo(()=>{var q,te,G,oe,Y,K,Ie;if(n&&o){const{preferredBrands:ce=[],preferredSizes:Re=[]}=o;return ce.length===0&&Re.length===0?[]:t.filter(_e=>_e.status!=="vendido"&&_e.userId!==o.uid).map(_e=>{var ot;let it=0;return _e.brand&&ce.includes(_e.brand)&&(it+=2),(ot=_e.sizes)!=null&&ot.some(ft=>Re.includes(ft))&&(it+=1),{..._e,score:it}}).filter(_e=>_e.score>0).sort((_e,it)=>it.score-_e.score)}let I=t;const b=((q=e.get("q"))==null?void 0:q.toLowerCase())||"",S=((te=e.get("conditions"))==null?void 0:te.split(",").filter(Boolean))||[],P=((G=e.get("brands"))==null?void 0:G.split(",").filter(Boolean))||[],N=((oe=e.get("sizes"))==null?void 0:oe.split(",").filter(Boolean).map(ce=>ce.trim().toUpperCase()))||[],j=((Y=e.get("colors"))==null?void 0:Y.split(",").filter(Boolean))||[],T=((K=e.get("locations"))==null?void 0:K.split(",").filter(Boolean))||[],E=((Ie=e.get("categories"))==null?void 0:Ie.split(",").filter(Boolean))||[],C=e.get("minPrice"),D=e.get("maxPrice"),O=C?Number(C):void 0,k=D?D==="Infinity"?1/0:Number(D):void 0,R=e.get("sort")||"";return b&&(I=I.filter(ce=>ce.name.toLowerCase().includes(b)||ce.description.toLowerCase().includes(b))),S.length>0&&(I=I.filter(ce=>S.includes(ce.condition))),P.length>0&&(I=I.filter(ce=>ce.brand&&P.includes(ce.brand))),N.length>0&&(I=I.filter(ce=>{var Re;return(Re=ce.sizes)==null?void 0:Re.some(_e=>N.includes(_e.toUpperCase()))})),E.length>0&&(I=I.filter(ce=>E.includes(ce.category))),j.length>0&&(I=I.filter(ce=>ce.color&&j.includes(ce.color))),T.length>0&&(I=I.filter(ce=>ce.location&&T.includes(ce.location))),typeof O=="number"&&(I=I.filter(ce=>ce.price>=O)),typeof k=="number"&&(I=I.filter(ce=>ce.price<=k)),R&&(R==="price_asc"?I=[...I].sort((ce,Re)=>ce.price-Re.price):R==="price_desc"?I=[...I].sort((ce,Re)=>Re.price-ce.price):R==="newest"&&(I=[...I].sort((ce,Re)=>{var ot,ft,de,Me;const _e=((ft=(ot=ce.createdAt)==null?void 0:ot.toMillis)==null?void 0:ft.call(ot))??0;return(((Me=(de=Re.createdAt)==null?void 0:de.toMillis)==null?void 0:Me.call(de))??0)-_e}))),I},[e,t,n,o]),x=p.useMemo(()=>e.toString().length>0,[e]),y=p.useMemo(()=>!n&&s,[n,s]),_=p.useMemo(()=>v.length,[v.length]);return d.jsxs("section",{id:"products",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:n?"Recomendado para Si":x?"Resultados da Pesquisa":"Descubra os Nossos Produtos"}),d.jsxs("p",{className:"text-muted-foreground mt-2",children:[_," resultado(s) encontrado(s)"]})]}),i?d.jsx("div",{className:"grid grid-cols-1 gap-x-6 gap-y-12 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((I,b)=>d.jsx(_z,{},b))}):v.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid grid-cols-1 gap-x-6 gap-y-12 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:v.map((I,b)=>v.length===b+1&&y?d.jsx("div",{ref:m,children:d.jsx(Mx,{product:I,index:b})},I.id):d.jsx(Mx,{product:I,index:b},I.id))}),a&&d.jsx("div",{className:"text-center py-8",children:d.jsx(El,{className:"h-8 w-8 animate-spin mx-auto text-primary"})}),v.length===0&&x&&d.jsxs("div",{className:"text-center py-16",children:[d.jsx(ix,{className:"mx-auto h-12 w-12 text-muted-foreground"}),d.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Nenhum produto encontrado"}),d.jsx("p",{className:"mt-2 text-muted-foreground",children:"Tente ajustar os filtros ou pesquisar por outro termo."})]})]}):d.jsxs("div",{className:"text-center py-16",children:[d.jsx(ix,{className:"mx-auto h-12 w-12 text-muted-foreground"}),d.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Nenhum produto encontrado"}),d.jsx("p",{className:"mt-2 text-muted-foreground",children:"Tente ajustar os filtros ou pesquisar por outro termo."})]})]})}function wz(){return d.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((n,e)=>d.jsxs("div",{className:"space-y-2",children:[d.jsx(Hr,{className:"h-[200px] w-full rounded-lg"}),d.jsx(Hr,{className:"h-5 w-3/4"}),d.jsx(Hr,{className:"h-5 w-1/2"})]},e))})}function bz(){return d.jsxs(d.Fragment,{children:[d.jsx("section",{className:"relative bg-gradient-to-b from-primary/5 via-primary/10 to-background",children:d.jsxs("div",{className:"container px-4 sm:px-6 lg:px-8 py-24 md:py-32 text-center",children:[d.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold tracking-tight font-heading bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70",children:"D uma segunda vida  sua roupa"}),d.jsx("p",{className:"mt-6 text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Junte-se  nossa comunidade e comece a vender os artigos que j no usa.  grtis, fcil e bom para o planeta."}),d.jsxs("div",{className:"mt-10 flex flex-col sm:flex-row gap-4 justify-center",children:[d.jsx(rt,{asChild:!0,size:"lg",className:"text-base shadow-lg hover:shadow-xl transition-shadow",children:d.jsx(Oe,{to:"/sell",children:"Comear a Vender"})}),d.jsx(rt,{asChild:!0,size:"lg",variant:"outline",className:"text-base",children:d.jsx(Oe,{to:"/catalog",children:"Explorar Produtos"})})]})]})}),"      ",d.jsxs("div",{className:"container px-4 sm:px-6 lg:px-8 py-16",children:[d.jsxs("div",{className:"mb-8 text-center",children:[d.jsx("h2",{className:"text-3xl md:text-4xl font-bold tracking-tight font-heading",children:"Descubra Tesouros nicos"}),d.jsx("p",{className:"mt-3 text-muted-foreground text-lg max-w-2xl mx-auto",children:"Explore a nossa seleo de artigos em segunda mo, cuidadosamente escolhidos pela comunidade."})]}),d.jsx(p.Suspense,{fallback:d.jsx(wz,{}),children:d.jsx(ZC,{})})]})]})}var xz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ez=xz.reduce((n,e)=>{const t=By(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{}),Iz="Label",JC=p.forwardRef((n,e)=>d.jsx(Ez.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));JC.displayName=Iz;var eP=JC;const Tz=rc("text-sm font-medium leading-relaxed text-foreground/90 peer-disabled:cursor-not-allowed peer-disabled:opacity-60 transition-colors"),Qe=p.forwardRef(({className:n,...e},t)=>d.jsx(eP,{ref:t,className:me(Tz(),n),...e}));Qe.displayName=eP.displayName;function lh(n,[e,t]){return Math.min(t,Math.max(e,n))}function gv(n){const e=p.useRef({value:n,previous:n});return p.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var tP=["PageUp","PageDown"],nP=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rP={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ac="Slider",[Bm,Sz,Az]=au(ac),[sP]=Jn(ac,[Az]),[Rz,_f]=sP(ac),iP=p.forwardRef((n,e)=>{const{name:t,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:h,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:v=!1,form:x,...y}=n,_=p.useRef(new Set),I=p.useRef(0),S=o==="horizontal"?Cz:Pz,[P=[],N]=ni({prop:h,defaultProp:u,onChange:O=>{var R;(R=[..._.current][I.current])==null||R.focus(),f(O)}}),j=p.useRef(P);function T(O){const k=Vz(P,O);D(O,k)}function E(O){D(O,I.current)}function C(){const O=j.current[I.current];P[I.current]!==O&&m(P)}function D(O,k,{commit:R}={commit:!1}){const q=Fz(i),te=Uz(Math.round((O-r)/i)*i+r,q),G=lh(te,[r,s]);N((oe=[])=>{const Y=Dz(oe,G,k);if(Lz(Y,c*i)){I.current=Y.indexOf(G);const K=String(Y)!==String(oe);return K&&R&&m(Y),K?Y:oe}else return oe})}return d.jsx(Rz,{scope:n.__scopeSlider,name:t,disabled:a,min:r,max:s,valueIndexToChangeRef:I,thumbs:_.current,values:P,orientation:o,form:x,children:d.jsx(Bm.Provider,{scope:n.__scopeSlider,children:d.jsx(Bm.Slot,{scope:n.__scopeSlider,children:d.jsx(S,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:e,onPointerDown:re(y.onPointerDown,()=>{a||(j.current=P)}),min:r,max:s,inverted:v,onSlideStart:a?void 0:T,onSlideMove:a?void 0:E,onSlideEnd:a?void 0:C,onHomeKeyDown:()=>!a&&D(r,0,{commit:!0}),onEndKeyDown:()=>!a&&D(s,P.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:k})=>{if(!a){const te=tP.includes(O.key)||O.shiftKey&&nP.includes(O.key)?10:1,G=I.current,oe=P[G],Y=i*te*k;D(oe+Y,G,{commit:!0})}}})})})})});iP.displayName=ac;var[oP,aP]=sP(ac,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Cz=p.forwardRef((n,e)=>{const{min:t,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...h}=n,[f,m]=p.useState(null),v=ke(e,S=>m(S)),x=p.useRef(void 0),y=sf(s),_=y==="ltr",I=_&&!i||!_&&i;function b(S){const P=x.current||f.getBoundingClientRect(),N=[0,P.width],T=yv(N,I?[t,r]:[r,t]);return x.current=P,T(S-P.left)}return d.jsx(oP,{scope:n.__scopeSlider,startEdge:I?"left":"right",endEdge:I?"right":"left",direction:I?1:-1,size:"width",children:d.jsx(cP,{dir:y,"data-orientation":"horizontal",...h,ref:v,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const P=b(S.clientX);o==null||o(P)},onSlideMove:S=>{const P=b(S.clientX);a==null||a(P)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:S=>{const N=rP[I?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:N?-1:1})}})})}),Pz=p.forwardRef((n,e)=>{const{min:t,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:c,...u}=n,h=p.useRef(null),f=ke(e,h),m=p.useRef(void 0),v=!s;function x(y){const _=m.current||h.current.getBoundingClientRect(),I=[0,_.height],S=yv(I,v?[r,t]:[t,r]);return m.current=_,S(y-_.top)}return d.jsx(oP,{scope:n.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:d.jsx(cP,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const _=x(y.clientY);i==null||i(_)},onSlideMove:y=>{const _=x(y.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,a==null||a()},onStepKeyDown:y=>{const I=rP[v?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:I?-1:1})}})})}),cP=p.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:c,...u}=n,h=_f(ac,t);return d.jsx(Ee.span,{...u,ref:e,onKeyDown:re(n.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(a(f),f.preventDefault()):tP.concat(nP).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:re(n.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),h.thumbs.has(m)?m.focus():r(f)}),onPointerMove:re(n.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:re(n.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),lP="SliderTrack",uP=p.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=_f(lP,t);return d.jsx(Ee.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});uP.displayName=lP;var $m="SliderRange",dP=p.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=_f($m,t),i=aP($m,t),o=p.useRef(null),a=ke(e,o),c=s.values.length,u=s.values.map(m=>pP(m,s.min,s.max)),h=c>1?Math.min(...u):0,f=100-Math.max(...u);return d.jsx(Ee.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...n.style,[i.startEdge]:h+"%",[i.endEdge]:f+"%"}})});dP.displayName=$m;var zm="SliderThumb",hP=p.forwardRef((n,e)=>{const t=Sz(n.__scopeSlider),[r,s]=p.useState(null),i=ke(e,a=>s(a)),o=p.useMemo(()=>r?t().findIndex(a=>a.ref.current===r):-1,[t,r]);return d.jsx(Nz,{...n,ref:i,index:o})}),Nz=p.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:s,...i}=n,o=_f(zm,t),a=aP(zm,t),[c,u]=p.useState(null),h=ke(e,b=>u(b)),f=c?o.form||!!c.closest("form"):!0,m=Xy(c),v=o.values[r],x=v===void 0?0:pP(v,o.min,o.max),y=Oz(r,o.values.length),_=m==null?void 0:m[a.size],I=_?Mz(_,x,a.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),d.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${x}% + ${I}px)`},children:[d.jsx(Bm.ItemSlot,{scope:n.__scopeSlider,children:d.jsx(Ee.span,{role:"slider","aria-label":n["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":v,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:h,style:v===void 0?{display:"none"}:n.style,onFocus:re(n.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),f&&d.jsx(fP,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:v},r)]})});hP.displayName=zm;var kz="RadioBubbleInput",fP=p.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const s=p.useRef(null),i=ke(s,r),o=gv(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("input",{bubbles:!0});h.call(a,e),a.dispatchEvent(f)}},[o,e]),d.jsx(Ee.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});fP.displayName=kz;function Dz(n=[],e,t){const r=[...n];return r[t]=e,r.sort((s,i)=>s-i)}function pP(n,e,t){const i=100/(t-e)*(n-e);return lh(i,[0,100])}function Oz(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function Vz(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),r=Math.min(...t);return t.indexOf(r)}function Mz(n,e,t){const r=n/2,i=yv([0,50],[0,r]);return(r-i(e)*t)*t}function jz(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function Lz(n,e){if(e>0){const t=jz(n);return Math.min(...t)>=e}return!0}function yv(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function Fz(n){return(String(n).split(".")[1]||"").length}function Uz(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var mP=iP,Bz=uP,$z=dP,zz=hP;const gP=p.forwardRef(({className:n,...e},t)=>d.jsxs(mP,{ref:t,className:me("relative flex w-full touch-none select-none items-center",n),...e,children:[d.jsx(Bz,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:d.jsx($z,{className:"absolute h-full bg-primary"})}),d.jsx(zz,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));gP.displayName=mP.displayName;var wf="Checkbox",[qz]=Jn(wf),[Wz,vv]=qz(wf);function Kz(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:f}=n,[m,v]=ni({prop:t,defaultProp:s??!1,onChange:c,caller:wf}),[x,y]=p.useState(null),[_,I]=p.useState(null),b=p.useRef(!1),S=x?!!o||!!x.closest("form"):!0,P={checked:m,disabled:i,setChecked:v,control:x,setControl:y,name:a,form:o,value:h,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Hs(s)?!1:s,isFormControl:S,bubbleInput:_,setBubbleInput:I};return d.jsx(Wz,{scope:e,...P,children:Hz(f)?f(P):r})}var yP="CheckboxTrigger",vP=p.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:i,value:o,disabled:a,checked:c,required:u,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:v,bubbleInput:x}=vv(yP,n),y=ke(s,h),_=p.useRef(c);return p.useEffect(()=>{const I=i==null?void 0:i.form;if(I){const b=()=>f(_.current);return I.addEventListener("reset",b),()=>I.removeEventListener("reset",b)}},[i,f]),d.jsx(Ee.button,{type:"button",role:"checkbox","aria-checked":Hs(c)?"mixed":c,"aria-required":u,"data-state":EP(c),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:y,onKeyDown:re(e,I=>{I.key==="Enter"&&I.preventDefault()}),onClick:re(t,I=>{f(b=>Hs(b)?!0:!b),x&&v&&(m.current=I.isPropagationStopped(),m.current||I.stopPropagation())})})});vP.displayName=yP;var _v=p.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c,onCheckedChange:u,form:h,...f}=n;return d.jsx(Kz,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>d.jsxs(d.Fragment,{children:[d.jsx(vP,{...f,ref:e,__scopeCheckbox:t}),m&&d.jsx(xP,{__scopeCheckbox:t})]})})});_v.displayName=wf;var _P="CheckboxIndicator",wP=p.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,i=vv(_P,t);return d.jsx(Ar,{present:r||Hs(i.checked)||i.checked===!0,children:d.jsx(Ee.span,{"data-state":EP(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});wP.displayName=_P;var bP="CheckboxBubbleInput",xP=p.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:c,name:u,value:h,form:f,bubbleInput:m,setBubbleInput:v}=vv(bP,n),x=ke(t,v),y=gv(i),_=Xy(r);p.useEffect(()=>{const b=m;if(!b)return;const S=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(S,"checked").set,j=!s.current;if(y!==i&&N){const T=new Event("click",{bubbles:j});b.indeterminate=Hs(i),N.call(b,Hs(i)?!1:i),b.dispatchEvent(T)}},[m,y,i,s]);const I=p.useRef(Hs(i)?!1:i);return d.jsx(Ee.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??I.current,required:a,disabled:c,name:u,value:h,form:f,...e,tabIndex:-1,ref:x,style:{...e.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xP.displayName=bP;function Hz(n){return typeof n=="function"}function Hs(n){return n==="indeterminate"}function EP(n){return Hs(n)?"indeterminate":n?"checked":"unchecked"}const Si=p.forwardRef(({className:n,...e},t)=>d.jsx(_v,{ref:t,className:me("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:d.jsx(wP,{className:me("flex items-center justify-center text-current"),children:d.jsx(Ly,{className:"h-4 w-4"})})}));Si.displayName=_v.displayName;const Gz=["Novo","Muito bom","Bom"],Qz=["Nike","Adidas","Zara","H&M","Apple","Samsung","Fnac","Outro"],Xz=["XS","S","M","L","XL","XXL"],Yz=["Roupa","Calado","Livros","Eletrnica","Outro"],Zz=["Preto","Branco","Cinzento","Azul","Vermelho","Verde","Amarelo","Rosa","Castanho"],Jz=["Lisboa","Porto","Braga","Aveiro","Coimbra","Faro","Setbal","Viseu","Leiria","Madeira","Aores","Portugal"];function eq(){const n=jn(),t=ss().pathname,[r]=Ha(),[s,i]=p.useState([0,1e3]),[o,a]=p.useState([]),[c,u]=p.useState([]),[h,f]=p.useState([]),[m,v]=p.useState([]),[x,y]=p.useState([]),[_,I]=p.useState([]);p.useEffect(()=>{var te,G,oe,Y,K,Ie;const T=((te=r.get("conditions"))==null?void 0:te.split(","))||[],E=((G=r.get("brands"))==null?void 0:G.split(","))||[],C=((oe=r.get("sizes"))==null?void 0:oe.split(","))||[],D=((Y=r.get("colors"))==null?void 0:Y.split(","))||[],O=((K=r.get("locations"))==null?void 0:K.split(","))||[],k=((Ie=r.get("categories"))==null?void 0:Ie.split(","))||[];a(T.filter(Boolean)),u(E.filter(Boolean)),f(C.filter(Boolean)),y(D.filter(Boolean)),I(O.filter(Boolean)),v(k.filter(Boolean));const R=r.get("minPrice"),q=r.get("maxPrice");i(R&&q?[Number(R),Number(q)]:[0,1e3])},[r]);const b=p.useCallback(T=>{const E=new URLSearchParams(r.toString());for(const[C,D]of Object.entries(T))D&&D.length>0?E.set(C,D):E.delete(C);return E.toString()},[r]),S=(T,E,C,D,O)=>{const k=E?[...C,T]:C.filter(R=>R!==T);D(k),n(t+"?"+b({[O]:k.join(",")}))},P=T=>{i(T)},N=()=>{n(t+"?"+b({minPrice:String(s[0]),maxPrice:String(s[1]===1e3?1/0:s[1])}))},j=()=>{n(t)};return d.jsxs(Dn,{children:[d.jsx(On,{children:d.jsx(Qn,{children:"Filtros"})}),d.jsxs(Vn,{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(Qe,{children:"Preo"}),d.jsx(gP,{value:s,onValueChange:P,max:1e3,step:10}),d.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[d.jsxs("span",{children:[s[0],""]}),d.jsx("span",{children:s[1]===1e3?"1000+":`${s[1]}`})]}),d.jsx(rt,{onClick:N,size:"sm",className:"w-full",children:"Aplicar Preo"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Categoria"}),d.jsx("div",{className:"space-y-2",children:Yz.map(T=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Si,{id:`category-${T}`,checked:m.includes(T),onCheckedChange:E=>S(T,!!E,m,v,"categories")}),d.jsx(Qe,{htmlFor:`category-${T}`,className:"font-normal",children:T})]},T))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Marca"}),d.jsx("div",{className:"space-y-2",children:Qz.map(T=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Si,{id:`brand-${T}`,checked:c.includes(T),onCheckedChange:E=>S(T,!!E,c,u,"brands")}),d.jsx(Qe,{htmlFor:`brand-${T}`,className:"font-normal",children:T})]},T))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Tamanho"}),d.jsx("div",{className:"space-y-2",children:Xz.map(T=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Si,{id:`size-${T}`,checked:h.includes(T),onCheckedChange:E=>S(T,!!E,h,f,"sizes")}),d.jsx(Qe,{htmlFor:`size-${T}`,className:"font-normal",children:T})]},T))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Cor"}),d.jsx("div",{className:"space-y-2",children:Zz.map(T=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Si,{id:`color-${T}`,checked:x.includes(T),onCheckedChange:E=>S(T,!!E,x,y,"colors")}),d.jsx(Qe,{htmlFor:`color-${T}`,className:"font-normal",children:T})]},T))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Localizao"}),d.jsx("div",{className:"space-y-2 max-h-48 overflow-auto pr-2",children:Jz.map(T=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Si,{id:`location-${T}`,checked:_.includes(T),onCheckedChange:E=>S(T,!!E,_,I,"locations")}),d.jsx(Qe,{htmlFor:`location-${T}`,className:"font-normal",children:T})]},T))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Condio"}),d.jsx("div",{className:"space-y-2",children:Gz.map(T=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Si,{id:`condition-${T}`,checked:o.includes(T),onCheckedChange:E=>S(T,!!E,o,a,"conditions")}),d.jsx(Qe,{htmlFor:`condition-${T}`,className:"font-normal",children:T})]},T))})]}),d.jsx(rt,{onClick:j,variant:"ghost",size:"sm",className:"w-full",children:"Limpar Filtros"})]})]})}function tq(){var y,_,I,b,S,P;const n=jn(),t=ss().pathname,[r]=Ha(),s=[],i=((y=r.get("conditions"))==null?void 0:y.split(",").filter(Boolean))||[],o=((_=r.get("brands"))==null?void 0:_.split(",").filter(Boolean))||[],a=((I=r.get("sizes"))==null?void 0:I.split(",").filter(Boolean))||[],c=((b=r.get("colors"))==null?void 0:b.split(",").filter(Boolean))||[],u=((S=r.get("locations"))==null?void 0:S.split(",").filter(Boolean))||[],h=((P=r.get("categories"))==null?void 0:P.split(",").filter(Boolean))||[],f=r.get("minPrice"),m=r.get("maxPrice");if(i.forEach(N=>s.push({key:"conditions",value:N,label:`Estado: ${N}`})),o.forEach(N=>s.push({key:"brands",value:N,label:`Marca: ${N}`})),a.forEach(N=>s.push({key:"sizes",value:N,label:`Tamanho: ${N}`})),c.forEach(N=>s.push({key:"colors",value:N,label:`Cor: ${N}`})),u.forEach(N=>s.push({key:"locations",value:N,label:`Localizao: ${N}`})),h.forEach(N=>s.push({key:"categories",value:N,label:`Categoria: ${N}`})),f||m){const N=`Preo: ${f||"0"} - ${m==="Infinity"?"1000+":m}`;s.push({key:"price",value:"range",label:N})}const v=(N,j)=>{var E;const T=new URLSearchParams(r.toString());if(N==="price")T.delete("minPrice"),T.delete("maxPrice");else{const D=(((E=T.get(N))==null?void 0:E.split(",").filter(Boolean))||[]).filter(O=>O!==j);D.length>0?T.set(N,D.join(",")):T.delete(N)}n(t+"?"+T.toString())},x=()=>{n(t)};return s.length===0?null:d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"Filtros ativos:"}),s.map((N,j)=>d.jsxs(Di,{variant:"secondary",className:"gap-1 pr-1 text-sm",children:[N.label,d.jsx(rt,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>v(N.key,N.value),"aria-label":`Remover filtro ${N.label}`,children:d.jsx(rf,{className:"h-3 w-3"})})]},`${N.key}-${N.value}-${j}`)),s.length>1&&d.jsx(rt,{variant:"ghost",size:"sm",onClick:x,className:"h-7 text-xs",children:"Limpar tudo"})]})}function nq(n){const e=rq(n),t=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(iq);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return d.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}function rq(n){const e=p.forwardRef((t,r)=>{const{children:s,...i}=t;if(p.isValidElement(s)){const o=aq(s),a=oq(i,s.props);return s.type!==p.Fragment&&(a.ref=r?cs(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var sq=Symbol("radix.slottable");function iq(n){return p.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===sq}function oq(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function aq(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var cq=[" ","Enter","ArrowUp","ArrowDown"],lq=[" ","Enter"],mo="Select",[bf,xf,uq]=au(mo),[cc]=Jn(mo,[uq,df]),Ef=df(),[dq,pi]=cc(mo),[hq,fq]=cc(mo),IP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:v,form:x}=n,y=Ef(e),[_,I]=p.useState(null),[b,S]=p.useState(null),[P,N]=p.useState(!1),j=sf(u),[T,E]=ni({prop:r,defaultProp:s??!1,onChange:i,caller:mo}),[C,D]=ni({prop:o,defaultProp:a,onChange:c,caller:mo}),O=p.useRef(null),k=_?x||!!_.closest("form"):!0,[R,q]=p.useState(new Set),te=Array.from(R).map(G=>G.props.value).join(";");return d.jsx(qA,{...y,children:d.jsxs(dq,{required:v,scope:e,trigger:_,onTriggerChange:I,valueNode:b,onValueNodeChange:S,valueNodeHasChildren:P,onValueNodeHasChildrenChange:N,contentId:Kr(),value:C,onValueChange:D,open:T,onOpenChange:E,dir:j,triggerPointerDownPosRef:O,disabled:m,children:[d.jsx(bf.Provider,{scope:e,children:d.jsx(hq,{scope:n.__scopeSelect,onNativeOptionAdd:p.useCallback(G=>{q(oe=>new Set(oe).add(G))},[]),onNativeOptionRemove:p.useCallback(G=>{q(oe=>{const Y=new Set(oe);return Y.delete(G),Y})},[]),children:t})}),k?d.jsxs(GP,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:G=>D(G.target.value),disabled:m,form:x,children:[C===void 0?d.jsx("option",{value:""}):null,Array.from(R)]},te):null]})})};IP.displayName=mo;var TP="SelectTrigger",SP=p.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Ef(t),o=pi(TP,t),a=o.disabled||r,c=ke(e,o.onTriggerChange),u=xf(t),h=p.useRef("touch"),[f,m,v]=XP(y=>{const _=u().filter(S=>!S.disabled),I=_.find(S=>S.value===o.value),b=YP(_,y,I);b!==void 0&&o.onValueChange(b.value)}),x=y=>{a||(o.onOpenChange(!0),v()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return d.jsx(WA,{asChild:!0,...i,children:d.jsx(Ee.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":QP(o.value)?"":void 0,...s,ref:c,onClick:re(s.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&x(y)}),onPointerDown:re(s.onPointerDown,y=>{h.current=y.pointerType;const _=y.target;_.hasPointerCapture(y.pointerId)&&_.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:re(s.onKeyDown,y=>{const _=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(_&&y.key===" ")&&cq.includes(y.key)&&(x(),y.preventDefault())})})})});SP.displayName=TP;var AP="SelectValue",RP=p.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:o="",...a}=n,c=pi(AP,t),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=ke(e,c.onValueNodeChange);return $t(()=>{u(h)},[u,h]),d.jsx(Ee.span,{...a,ref:f,style:{pointerEvents:"none"},children:QP(c.value)?d.jsx(d.Fragment,{children:o}):i})});RP.displayName=AP;var pq="SelectIcon",CP=p.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return d.jsx(Ee.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});CP.displayName=pq;var mq="SelectPortal",PP=n=>d.jsx(lu,{asChild:!0,...n});PP.displayName=mq;var go="SelectContent",NP=p.forwardRef((n,e)=>{const t=pi(go,n.__scopeSelect),[r,s]=p.useState();if($t(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?Ll.createPortal(d.jsx(kP,{scope:n.__scopeSelect,children:d.jsx(bf.Slot,{scope:n.__scopeSelect,children:d.jsx("div",{children:n.children})})}),i):null}return d.jsx(DP,{...n,ref:e})});NP.displayName=go;var Un=10,[kP,mi]=cc(go),gq="SelectContentImpl",yq=nq("SelectContent.RemoveScroll"),DP=p.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:y,avoidCollisions:_,...I}=n,b=pi(go,t),[S,P]=p.useState(null),[N,j]=p.useState(null),T=ke(e,de=>P(de)),[E,C]=p.useState(null),[D,O]=p.useState(null),k=xf(t),[R,q]=p.useState(!1),te=p.useRef(!1);p.useEffect(()=>{if(S)return Jy(S)},[S]),zy();const G=p.useCallback(de=>{const[Me,...qe]=k().map(Ue=>Ue.ref.current),[De]=qe.slice(-1),Fe=document.activeElement;for(const Ue of de)if(Ue===Fe||(Ue==null||Ue.scrollIntoView({block:"nearest"}),Ue===Me&&N&&(N.scrollTop=0),Ue===De&&N&&(N.scrollTop=N.scrollHeight),Ue==null||Ue.focus(),document.activeElement!==Fe))return},[k,N]),oe=p.useCallback(()=>G([E,S]),[G,E,S]);p.useEffect(()=>{R&&oe()},[R,oe]);const{onOpenChange:Y,triggerPointerDownPosRef:K}=b;p.useEffect(()=>{if(S){let de={x:0,y:0};const Me=De=>{var Fe,Ue;de={x:Math.abs(Math.round(De.pageX)-(((Fe=K.current)==null?void 0:Fe.x)??0)),y:Math.abs(Math.round(De.pageY)-(((Ue=K.current)==null?void 0:Ue.y)??0))}},qe=De=>{de.x<=10&&de.y<=10?De.preventDefault():S.contains(De.target)||Y(!1),document.removeEventListener("pointermove",Me),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",qe,{capture:!0})}}},[S,Y,K]),p.useEffect(()=>{const de=()=>Y(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[Y]);const[Ie,ce]=XP(de=>{const Me=k().filter(Fe=>!Fe.disabled),qe=Me.find(Fe=>Fe.ref.current===document.activeElement),De=YP(Me,de,qe);De&&setTimeout(()=>De.ref.current.focus())}),Re=p.useCallback((de,Me,qe)=>{const De=!te.current&&!qe;(b.value!==void 0&&b.value===Me||De)&&(C(de),De&&(te.current=!0))},[b.value]),_e=p.useCallback(()=>S==null?void 0:S.focus(),[S]),it=p.useCallback((de,Me,qe)=>{const De=!te.current&&!qe;(b.value!==void 0&&b.value===Me||De)&&O(de)},[b.value]),ot=r==="popper"?qm:OP,ft=ot===qm?{side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:y,avoidCollisions:_}:{};return d.jsx(kP,{scope:t,content:S,viewport:N,onViewportChange:j,itemRefCallback:Re,selectedItem:E,onItemLeave:_e,itemTextRefCallback:it,focusSelectedItem:oe,selectedItemText:D,position:r,isPositioned:R,searchRef:Ie,children:d.jsx(ff,{as:yq,allowPinchZoom:!0,children:d.jsx(of,{asChild:!0,trapped:b.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:re(s,de=>{var Me;(Me=b.trigger)==null||Me.focus({preventScroll:!0}),de.preventDefault()}),children:d.jsx(cu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:d.jsx(ot,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:de=>de.preventDefault(),...I,...ft,onPlaced:()=>q(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...I.style},onKeyDown:re(I.onKeyDown,de=>{const Me=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!Me&&de.key.length===1&&ce(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let De=k().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);if(["ArrowUp","End"].includes(de.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const Fe=de.target,Ue=De.indexOf(Fe);De=De.slice(Ue+1)}setTimeout(()=>G(De)),de.preventDefault()}})})})})})})});DP.displayName=gq;var vq="SelectItemAlignedPosition",OP=p.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=pi(go,t),o=mi(go,t),[a,c]=p.useState(null),[u,h]=p.useState(null),f=ke(e,T=>h(T)),m=xf(t),v=p.useRef(!1),x=p.useRef(!0),{viewport:y,selectedItem:_,selectedItemText:I,focusSelectedItem:b}=o,S=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&y&&_&&I){const T=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),D=I.getBoundingClientRect();if(i.dir!=="rtl"){const Fe=D.left-E.left,Ue=C.left-Fe,Ct=T.left-Ue,Ft=T.width+Ct,Cn=Math.max(Ft,E.width),tr=window.innerWidth-Un,Cr=lh(Ue,[Un,Math.max(Un,tr-Cn)]);a.style.minWidth=Ft+"px",a.style.left=Cr+"px"}else{const Fe=E.right-D.right,Ue=window.innerWidth-C.right-Fe,Ct=window.innerWidth-T.right-Ue,Ft=T.width+Ct,Cn=Math.max(Ft,E.width),tr=window.innerWidth-Un,Cr=lh(Ue,[Un,Math.max(Un,tr-Cn)]);a.style.minWidth=Ft+"px",a.style.right=Cr+"px"}const O=m(),k=window.innerHeight-Un*2,R=y.scrollHeight,q=window.getComputedStyle(u),te=parseInt(q.borderTopWidth,10),G=parseInt(q.paddingTop,10),oe=parseInt(q.borderBottomWidth,10),Y=parseInt(q.paddingBottom,10),K=te+G+R+Y+oe,Ie=Math.min(_.offsetHeight*5,K),ce=window.getComputedStyle(y),Re=parseInt(ce.paddingTop,10),_e=parseInt(ce.paddingBottom,10),it=T.top+T.height/2-Un,ot=k-it,ft=_.offsetHeight/2,de=_.offsetTop+ft,Me=te+G+de,qe=K-Me;if(Me<=it){const Fe=O.length>0&&_===O[O.length-1].ref.current;a.style.bottom="0px";const Ue=u.clientHeight-y.offsetTop-y.offsetHeight,Ct=Math.max(ot,ft+(Fe?_e:0)+Ue+oe),Ft=Me+Ct;a.style.height=Ft+"px"}else{const Fe=O.length>0&&_===O[0].ref.current;a.style.top="0px";const Ct=Math.max(it,te+y.offsetTop+(Fe?Re:0)+ft)+qe;a.style.height=Ct+"px",y.scrollTop=Me-it+y.offsetTop}a.style.margin=`${Un}px 0`,a.style.minHeight=Ie+"px",a.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[m,i.trigger,i.valueNode,a,u,y,_,I,i.dir,r]);$t(()=>S(),[S]);const[P,N]=p.useState();$t(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(T=>{T&&x.current===!0&&(S(),b==null||b(),x.current=!1)},[S,b]);return d.jsx(wq,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:v,onScrollButtonChange:j,children:d.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:d.jsx(Ee.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});OP.displayName=vq;var _q="SelectPopperPosition",qm=p.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Un,...i}=n,o=Ef(t);return d.jsx(KA,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qm.displayName=_q;var[wq,wv]=cc(go,{}),Wm="SelectViewport",VP=p.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=mi(Wm,t),o=wv(Wm,t),a=ke(e,i.onViewportChange),c=p.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(bf.Slot,{scope:t,children:d.jsx(Ee.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:re(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const x=window.innerHeight-Un*2,y=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),I=Math.max(y,_);if(I<x){const b=I+v,S=Math.min(x,b),P=b-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=P>0?P:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});VP.displayName=Wm;var MP="SelectGroup",[bq,xq]=cc(MP),Eq=p.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Kr();return d.jsx(bq,{scope:t,id:s,children:d.jsx(Ee.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Eq.displayName=MP;var jP="SelectLabel",LP=p.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=xq(jP,t);return d.jsx(Ee.div,{id:s.id,...r,ref:e})});LP.displayName=jP;var uh="SelectItem",[Iq,FP]=cc(uh),UP=p.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...o}=n,a=pi(uh,t),c=mi(uh,t),u=a.value===r,[h,f]=p.useState(i??""),[m,v]=p.useState(!1),x=ke(e,b=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,b,r,s)}),y=Kr(),_=p.useRef("touch"),I=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(Iq,{scope:t,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:p.useCallback(b=>{f(S=>S||((b==null?void 0:b.textContent)??"").trim())},[]),children:d.jsx(bf.ItemSlot,{scope:t,value:r,disabled:s,textValue:h,children:d.jsx(Ee.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:re(o.onFocus,()=>v(!0)),onBlur:re(o.onBlur,()=>v(!1)),onClick:re(o.onClick,()=>{_.current!=="mouse"&&I()}),onPointerUp:re(o.onPointerUp,()=>{_.current==="mouse"&&I()}),onPointerDown:re(o.onPointerDown,b=>{_.current=b.pointerType}),onPointerMove:re(o.onPointerMove,b=>{var S;_.current=b.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(o.onPointerLeave,b=>{var S;b.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:re(o.onKeyDown,b=>{var P;((P=c.searchRef)==null?void 0:P.current)!==""&&b.key===" "||(lq.includes(b.key)&&I(),b.key===" "&&b.preventDefault())})})})})});UP.displayName=uh;var $c="SelectItemText",BP=p.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,o=pi($c,t),a=mi($c,t),c=FP($c,t),u=fq($c,t),[h,f]=p.useState(null),m=ke(e,I=>f(I),c.onItemTextChange,I=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,I,c.value,c.disabled)}),v=h==null?void 0:h.textContent,x=p.useMemo(()=>d.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:y,onNativeOptionRemove:_}=u;return $t(()=>(y(x),()=>_(x)),[y,_,x]),d.jsxs(d.Fragment,{children:[d.jsx(Ee.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ll.createPortal(i.children,o.valueNode):null]})});BP.displayName=$c;var $P="SelectItemIndicator",zP=p.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return FP($P,t).isSelected?d.jsx(Ee.span,{"aria-hidden":!0,...r,ref:e}):null});zP.displayName=$P;var Km="SelectScrollUpButton",qP=p.forwardRef((n,e)=>{const t=mi(Km,n.__scopeSelect),r=wv(Km,n.__scopeSelect),[s,i]=p.useState(!1),o=ke(e,r.onScrollButtonChange);return $t(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?d.jsx(KP,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});qP.displayName=Km;var Hm="SelectScrollDownButton",WP=p.forwardRef((n,e)=>{const t=mi(Hm,n.__scopeSelect),r=wv(Hm,n.__scopeSelect),[s,i]=p.useState(!1),o=ke(e,r.onScrollButtonChange);return $t(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?d.jsx(KP,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});WP.displayName=Hm;var KP=p.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=mi("SelectScrollButton",t),o=p.useRef(null),a=xf(t),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),$t(()=>{var h;const u=a().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),d.jsx(Ee.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:re(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:re(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:re(s.onPointerLeave,()=>{c()})})}),Tq="SelectSeparator",HP=p.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return d.jsx(Ee.div,{"aria-hidden":!0,...r,ref:e})});HP.displayName=Tq;var Gm="SelectArrow",Sq=p.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Ef(t),i=pi(Gm,t),o=mi(Gm,t);return i.open&&o.position==="popper"?d.jsx(HA,{...s,...r,ref:e}):null});Sq.displayName=Gm;var Aq="SelectBubbleInput",GP=p.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=p.useRef(null),i=ke(r,s),o=gv(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(f)}},[o,e]),d.jsx(Ee.select,{...t,style:{...U0,...t.style},ref:i,defaultValue:e})});GP.displayName=Aq;function QP(n){return n===""||n===void 0}function XP(n){const e=fn(n),t=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=t.current+o;e(a),function c(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=p.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function YP(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let o=Rq(n,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function Rq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Cq=IP,ZP=SP,Pq=RP,Nq=CP,kq=PP,JP=NP,Dq=VP,eN=LP,tN=UP,Oq=BP,Vq=zP,nN=qP,rN=WP,sN=HP;const dh=Cq,hh=Pq,Cl=p.forwardRef(({className:n,children:e,...t},r)=>d.jsxs(ZP,{ref:r,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,d.jsx(Nq,{asChild:!0,children:d.jsx(Fy,{className:"h-4 w-4 opacity-50"})})]}));Cl.displayName=ZP.displayName;const iN=p.forwardRef(({className:n,...e},t)=>d.jsx(nN,{ref:t,className:me("flex cursor-default items-center justify-center py-1",n),...e,children:d.jsx(eB,{className:"h-4 w-4"})}));iN.displayName=nN.displayName;const oN=p.forwardRef(({className:n,...e},t)=>d.jsx(rN,{ref:t,className:me("flex cursor-default items-center justify-center py-1",n),...e,children:d.jsx(Fy,{className:"h-4 w-4"})}));oN.displayName=rN.displayName;const Pl=p.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>d.jsx(kq,{children:d.jsxs(JP,{ref:s,className:me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[d.jsx(iN,{}),d.jsx(Dq,{className:me("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(oN,{})]})}));Pl.displayName=JP.displayName;const Mq=p.forwardRef(({className:n,...e},t)=>d.jsx(eN,{ref:t,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));Mq.displayName=eN.displayName;const Nt=p.forwardRef(({className:n,children:e,...t},r)=>d.jsxs(tN,{ref:r,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Vq,{children:d.jsx(Ly,{className:"h-4 w-4"})})}),d.jsx(Oq,{children:e})]}));Nt.displayName=tN.displayName;const jq=p.forwardRef(({className:n,...e},t)=>d.jsx(sN,{ref:t,className:me("-mx-1 my-1 h-px bg-muted",n),...e}));jq.displayName=sN.displayName;function Lq(){const n=jn(),t=ss().pathname,[r]=Ha(),s=r.get("sort")||"newest",i=o=>{const a=new URLSearchParams(r.toString());o?a.set("sort",o):a.delete("sort"),n(`${t}?${a.toString()}`)};return d.jsxs("div",{className:"flex items-center justify-end mb-4 gap-2",children:[d.jsx(Qe,{htmlFor:"sort",className:"text-sm text-muted-foreground",children:"Ordenar por"}),d.jsxs(dh,{value:s,onValueChange:i,children:[d.jsx(Cl,{className:"w-48",id:"sort",children:d.jsx(hh,{placeholder:"Ordenar"})}),d.jsxs(Pl,{children:[d.jsx(Nt,{value:"newest",children:"Mais recente"}),d.jsx(Nt,{value:"price_asc",children:"Preo: mais baixo"}),d.jsx(Nt,{value:"price_desc",children:"Preo: mais alto"})]})]})]})}function Fq(){return d.jsx("div",{className:"container px-4 py-8 md:px-6 lg:px-8",children:d.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row",children:[d.jsx("aside",{className:"w-full lg:w-64 shrink-0",children:d.jsx(eq,{})}),d.jsxs("div",{className:"flex-1 space-y-6",children:[d.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Catlogo"}),d.jsx(Lq,{})]}),d.jsx(tq,{}),d.jsx(ZC,{})]})]})})}var mu=n=>n.type==="checkbox",Oi=n=>n instanceof Date,ln=n=>n==null;const aN=n=>typeof n=="object";var Rt=n=>!ln(n)&&!Array.isArray(n)&&aN(n)&&!Oi(n),cN=n=>Rt(n)&&n.target?mu(n.target)?n.target.checked:n.target.value:n,Uq=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,lN=(n,e)=>n.has(Uq(e)),Bq=n=>{const e=n.constructor&&n.constructor.prototype;return Rt(e)&&e.hasOwnProperty("isPrototypeOf")},bv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Pt(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(bv&&(n instanceof Blob||r))&&(t||Rt(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!Bq(n))e=n;else for(const s in n)n.hasOwnProperty(s)&&(e[s]=Pt(n[s]));else return n;return e}var If=n=>/^\w*$/.test(n),gt=n=>n===void 0,xv=n=>Array.isArray(n)?n.filter(Boolean):[],Ev=n=>xv(n.replace(/["|']|\]/g,"").split(/\.|\[/)),ne=(n,e,t)=>{if(!e||!Rt(n))return t;const r=(If(e)?[e]:Ev(e)).reduce((s,i)=>ln(s)?s:s[i],n);return gt(r)||r===n?gt(n[e])?t:n[e]:r},gn=n=>typeof n=="boolean",Ye=(n,e,t)=>{let r=-1;const s=If(e)?[e]:Ev(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let c=t;if(r!==o){const u=n[a];c=Rt(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=c,n=n[a]}};const fh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Wn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Dr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},uN=we.createContext(null);uN.displayName="HookFormContext";const Iv=()=>we.useContext(uN);var dN=(n,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Wn.all&&(e._proxyFormState[o]=!r||Wn.all),t&&(t[o]=!0),n[o]}});return s};const Tv=typeof window<"u"?we.useLayoutEffect:we.useEffect;function $q(n){const e=Iv(),{control:t=e.control,disabled:r,name:s,exact:i}=n||{},[o,a]=we.useState(t._formState),c=we.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Tv(()=>t._subscribe({name:s,formState:c.current,exact:i,callback:u=>{!r&&a({...t._formState,...u})}}),[s,r,i]),we.useEffect(()=>{c.current.isValid&&t._setValid(!0)},[t]),we.useMemo(()=>dN(o,t,c.current,!1),[o,t])}var bn=n=>typeof n=="string",Qm=(n,e,t,r,s)=>bn(n)?(r&&e.watch.add(n),ne(t,n,s)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),ne(t,i))):(r&&(e.watchAll=!0),t),Xm=n=>ln(n)||!aN(n);function Kn(n,e,t=new WeakSet){if(Xm(n)||Xm(e))return n===e;if(Oi(n)&&Oi(e))return n.getTime()===e.getTime();const r=Object.keys(n),s=Object.keys(e);if(r.length!==s.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const i of r){const o=n[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(Oi(o)&&Oi(a)||Rt(o)&&Rt(a)||Array.isArray(o)&&Array.isArray(a)?!Kn(o,a,t):o!==a)return!1}}return!0}function zq(n){const e=Iv(),{control:t=e.control,name:r,defaultValue:s,disabled:i,exact:o,compute:a}=n||{},c=we.useRef(s),u=we.useRef(a),h=we.useRef(void 0),f=we.useRef(t),m=we.useRef(r);u.current=a;const[v,x]=we.useState(()=>{const P=t._getWatch(r,c.current);return u.current?u.current(P):P}),y=we.useCallback(P=>{const N=Qm(r,t._names,P||t._formValues,!1,c.current);return u.current?u.current(N):N},[t._formValues,t._names,r]),_=we.useCallback(P=>{if(!i){const N=Qm(r,t._names,P||t._formValues,!1,c.current);if(u.current){const j=u.current(N);Kn(j,h.current)||(x(j),h.current=j)}else x(N)}},[t._formValues,t._names,i,r]);Tv(()=>((f.current!==t||!Kn(m.current,r))&&(f.current=t,m.current=r,_()),t._subscribe({name:r,formState:{values:!0},exact:o,callback:P=>{_(P.values)}})),[t,o,r,_]),we.useEffect(()=>t._removeUnmounted());const I=f.current!==t,b=m.current,S=we.useMemo(()=>{if(i)return null;const P=!I&&!Kn(b,r);return I||P?y():null},[i,I,r,b,y]);return S!==null?S:v}function qq(n){const e=Iv(),{name:t,disabled:r,control:s=e.control,shouldUnregister:i,defaultValue:o}=n,a=lN(s._names.array,t),c=we.useMemo(()=>ne(s._formValues,t,ne(s._defaultValues,t,o)),[s,t,o]),u=zq({control:s,name:t,defaultValue:c,exact:!0}),h=$q({control:s,name:t,exact:!0}),f=we.useRef(n),m=we.useRef(void 0),v=we.useRef(s.register(t,{...n.rules,value:u,...gn(n.disabled)?{disabled:n.disabled}:{}}));f.current=n;const x=we.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ne(h.errors,t)},isDirty:{enumerable:!0,get:()=>!!ne(h.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!ne(h.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!ne(h.validatingFields,t)},error:{enumerable:!0,get:()=>ne(h.errors,t)}}),[h,t]),y=we.useCallback(S=>v.current.onChange({target:{value:cN(S),name:t},type:fh.CHANGE}),[t]),_=we.useCallback(()=>v.current.onBlur({target:{value:ne(s._formValues,t),name:t},type:fh.BLUR}),[t,s._formValues]),I=we.useCallback(S=>{const P=ne(s._fields,t);P&&S&&(P._f.ref={focus:()=>S.focus&&S.focus(),select:()=>S.select&&S.select(),setCustomValidity:N=>S.setCustomValidity(N),reportValidity:()=>S.reportValidity()})},[s._fields,t]),b=we.useMemo(()=>({name:t,value:u,...gn(r)||h.disabled?{disabled:h.disabled||r}:{},onChange:y,onBlur:_,ref:I}),[t,r,h.disabled,y,_,I,u]);return we.useEffect(()=>{const S=s._options.shouldUnregister||i,P=m.current;P&&P!==t&&!a&&s.unregister(P),s.register(t,{...f.current.rules,...gn(f.current.disabled)?{disabled:f.current.disabled}:{}});const N=(j,T)=>{const E=ne(s._fields,j);E&&E._f&&(E._f.mount=T)};if(N(t,!0),S){const j=Pt(ne(s._options.defaultValues,t,f.current.defaultValue));Ye(s._defaultValues,t,j),gt(ne(s._formValues,t))&&Ye(s._formValues,t,j)}return!a&&s.register(t),m.current=t,()=>{(a?S&&!s._state.action:S)?s.unregister(t):N(t,!1)}},[t,s,a,i]),we.useEffect(()=>{s._setDisabledField({disabled:r,name:t})},[r,t,s]),we.useMemo(()=>({field:b,formState:h,fieldState:x}),[b,h,x])}const Or=n=>n.render(qq(n));var hN=(n,e,t,r,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:s||!0}}:{},sl=n=>Array.isArray(n)?n:[n],jx=()=>{let n=[];return{get observers(){return n},next:s=>{for(const i of n)i.next&&i.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(i=>i!==s)}}),unsubscribe:()=>{n=[]}}};function fN(n,e){const t={};for(const r in n)if(n.hasOwnProperty(r)){const s=n[r],i=e[r];if(s&&Rt(s)&&i){const o=fN(s,i);Rt(o)&&(t[r]=o)}else n[r]&&(t[r]=i)}return t}var tn=n=>Rt(n)&&!Object.keys(n).length,Sv=n=>n.type==="file",Hn=n=>typeof n=="function",ph=n=>{if(!bv)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},pN=n=>n.type==="select-multiple",Av=n=>n.type==="radio",Wq=n=>Av(n)||mu(n),xp=n=>ph(n)&&n.isConnected;function Kq(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=gt(n)?r++:n[e[r++]];return n}function Hq(n){for(const e in n)if(n.hasOwnProperty(e)&&!gt(n[e]))return!1;return!0}function Et(n,e){const t=Array.isArray(e)?e:If(e)?[e]:Ev(e),r=t.length===1?n:Kq(n,t),s=t.length-1,i=t[s];return r&&delete r[i],s!==0&&(Rt(r)&&tn(r)||Array.isArray(r)&&Hq(r))&&Et(n,t.slice(0,-1)),n}var Gq=n=>{for(const e in n)if(Hn(n[e]))return!0;return!1};function mN(n){return Array.isArray(n)||Rt(n)&&!Gq(n)}function Ym(n,e={}){for(const t in n)mN(n[t])?(e[t]=Array.isArray(n[t])?[]:{},Ym(n[t],e[t])):gt(n[t])||(e[t]=!0);return e}function Yo(n,e,t){t||(t=Ym(e));for(const r in n)mN(n[r])?gt(e)||Xm(t[r])?t[r]=Ym(n[r],Array.isArray(n[r])?[]:{}):Yo(n[r],ln(e)?{}:e[r],t[r]):t[r]=!Kn(n[r],e[r]);return t}const Lx={value:!1,isValid:!1},Fx={value:!0,isValid:!0};var gN=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!gt(n[0].attributes.value)?gt(n[0].value)||n[0].value===""?Fx:{value:n[0].value,isValid:!0}:Fx:Lx}return Lx},yN=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>gt(n)?n:e?n===""?NaN:n&&+n:t&&bn(n)?new Date(n):r?r(n):n;const Ux={isValid:!1,value:null};var vN=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ux):Ux;function Bx(n){const e=n.ref;return Sv(e)?e.files:Av(e)?vN(n.refs).value:pN(e)?[...e.selectedOptions].map(({value:t})=>t):mu(e)?gN(n.refs).value:yN(gt(e.value)?n.ref.value:e.value,n)}var Qq=(n,e,t,r)=>{const s={};for(const i of n){const o=ne(e,i);o&&Ye(s,i,o._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:r}},mh=n=>n instanceof RegExp,Pc=n=>gt(n)?n:mh(n)?n.source:Rt(n)?mh(n.value)?n.value.source:n.value:n,$x=n=>({isOnSubmit:!n||n===Wn.onSubmit,isOnBlur:n===Wn.onBlur,isOnChange:n===Wn.onChange,isOnAll:n===Wn.all,isOnTouch:n===Wn.onTouched});const zx="AsyncFunction";var Xq=n=>!!n&&!!n.validate&&!!(Hn(n.validate)&&n.validate.constructor.name===zx||Rt(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===zx)),Yq=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),qx=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const il=(n,e,t,r)=>{for(const s of t||Object.keys(n)){const i=ne(n,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(il(a,e))break}else if(Rt(a)&&il(a,e))break}}};function Wx(n,e,t){const r=ne(n,t);if(r||If(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=ne(e,i),a=ne(n,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:t}}var Zq=(n,e,t,r)=>{t(n);const{name:s,...i}=n;return tn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Wn.all))},Jq=(n,e,t)=>!n||!e||n===e||sl(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),eW=(n,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?r.isOnBlur:s.isOnBlur)?!n:(t?r.isOnChange:s.isOnChange)?n:!0,tW=(n,e)=>!xv(ne(n,e)).length&&Et(n,e),nW=(n,e,t)=>{const r=sl(ne(n,t));return Ye(r,"root",e[t]),Ye(n,t,r),n};function Kx(n,e,t="validate"){if(bn(n)||Array.isArray(n)&&n.every(bn)||gn(n)&&!n)return{type:t,message:bn(n)?n:"",ref:e}}var Wo=n=>Rt(n)&&!mh(n)?n:{value:n,message:""},Hx=async(n,e,t,r,s,i)=>{const{ref:o,refs:a,required:c,maxLength:u,minLength:h,min:f,max:m,pattern:v,validate:x,name:y,valueAsNumber:_,mount:I}=n._f,b=ne(t,y);if(!I||e.has(y))return{};const S=a?a[0]:o,P=k=>{s&&S.reportValidity&&(S.setCustomValidity(gn(k)?"":k||""),S.reportValidity())},N={},j=Av(o),T=mu(o),E=j||T,C=(_||Sv(o))&&gt(o.value)&&gt(b)||ph(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,D=hN.bind(null,y,r,N),O=(k,R,q,te=Dr.maxLength,G=Dr.minLength)=>{const oe=k?R:q;N[y]={type:k?te:G,message:oe,ref:o,...D(k?te:G,oe)}};if(i?!Array.isArray(b)||!b.length:c&&(!E&&(C||ln(b))||gn(b)&&!b||T&&!gN(a).isValid||j&&!vN(a).isValid)){const{value:k,message:R}=bn(c)?{value:!!c,message:c}:Wo(c);if(k&&(N[y]={type:Dr.required,message:R,ref:S,...D(Dr.required,R)},!r))return P(R),N}if(!C&&(!ln(f)||!ln(m))){let k,R;const q=Wo(m),te=Wo(f);if(!ln(b)&&!isNaN(b)){const G=o.valueAsNumber||b&&+b;ln(q.value)||(k=G>q.value),ln(te.value)||(R=G<te.value)}else{const G=o.valueAsDate||new Date(b),oe=Ie=>new Date(new Date().toDateString()+" "+Ie),Y=o.type=="time",K=o.type=="week";bn(q.value)&&b&&(k=Y?oe(b)>oe(q.value):K?b>q.value:G>new Date(q.value)),bn(te.value)&&b&&(R=Y?oe(b)<oe(te.value):K?b<te.value:G<new Date(te.value))}if((k||R)&&(O(!!k,q.message,te.message,Dr.max,Dr.min),!r))return P(N[y].message),N}if((u||h)&&!C&&(bn(b)||i&&Array.isArray(b))){const k=Wo(u),R=Wo(h),q=!ln(k.value)&&b.length>+k.value,te=!ln(R.value)&&b.length<+R.value;if((q||te)&&(O(q,k.message,R.message),!r))return P(N[y].message),N}if(v&&!C&&bn(b)){const{value:k,message:R}=Wo(v);if(mh(k)&&!b.match(k)&&(N[y]={type:Dr.pattern,message:R,ref:o,...D(Dr.pattern,R)},!r))return P(R),N}if(x){if(Hn(x)){const k=await x(b,t),R=Kx(k,S);if(R&&(N[y]={...R,...D(Dr.validate,R.message)},!r))return P(R.message),N}else if(Rt(x)){let k={};for(const R in x){if(!tn(k)&&!r)break;const q=Kx(await x[R](b,t),S,R);q&&(k={...q,...D(R,q.message)},P(q.message),r&&(N[y]=k))}if(!tn(k)&&(N[y]={ref:S,...k},!r))return N}}return P(!0),N};const rW={mode:Wn.onSubmit,reValidateMode:Wn.onChange,shouldFocusError:!0};function sW(n={}){let e={...rW,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Hn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Rt(e.defaultValues)||Rt(e.values)?Pt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Pt(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...h};const m={array:jx(),state:jx()},v=e.criteriaMode===Wn.all,x=M=>U=>{clearTimeout(u),u=setTimeout(M,U)},y=async M=>{if(!e.disabled&&(h.isValid||f.isValid||M)){const U=e.resolver?tn((await T()).errors):await C(r,!0);U!==t.isValid&&m.state.next({isValid:U})}},_=(M,U)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((M||Array.from(a.mount)).forEach(z=>{z&&(U?Ye(t.validatingFields,z,U):Et(t.validatingFields,z))}),m.state.next({validatingFields:t.validatingFields,isValidating:!tn(t.validatingFields)}))},I=(M,U=[],z,se,Z=!0,Q=!0)=>{if(se&&z&&!e.disabled){if(o.action=!0,Q&&Array.isArray(ne(r,M))){const ae=z(ne(r,M),se.argA,se.argB);Z&&Ye(r,M,ae)}if(Q&&Array.isArray(ne(t.errors,M))){const ae=z(ne(t.errors,M),se.argA,se.argB);Z&&Ye(t.errors,M,ae),tW(t.errors,M)}if((h.touchedFields||f.touchedFields)&&Q&&Array.isArray(ne(t.touchedFields,M))){const ae=z(ne(t.touchedFields,M),se.argA,se.argB);Z&&Ye(t.touchedFields,M,ae)}(h.dirtyFields||f.dirtyFields)&&(t.dirtyFields=Yo(s,i)),m.state.next({name:M,isDirty:O(M,U),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Ye(i,M,U)},b=(M,U)=>{Ye(t.errors,M,U),m.state.next({errors:t.errors})},S=M=>{t.errors=M,m.state.next({errors:t.errors,isValid:!1})},P=(M,U,z,se)=>{const Z=ne(r,M);if(Z){const Q=ne(i,M,gt(z)?ne(s,M):z);gt(Q)||se&&se.defaultChecked||U?Ye(i,M,U?Q:Bx(Z._f)):q(M,Q),o.mount&&y()}},N=(M,U,z,se,Z)=>{let Q=!1,ae=!1;const Te={name:M};if(!e.disabled){if(!z||se){(h.isDirty||f.isDirty)&&(ae=t.isDirty,t.isDirty=Te.isDirty=O(),Q=ae!==Te.isDirty);const Ge=Kn(ne(s,M),U);ae=!!ne(t.dirtyFields,M),Ge?Et(t.dirtyFields,M):Ye(t.dirtyFields,M,!0),Te.dirtyFields=t.dirtyFields,Q=Q||(h.dirtyFields||f.dirtyFields)&&ae!==!Ge}if(z){const Ge=ne(t.touchedFields,M);Ge||(Ye(t.touchedFields,M,z),Te.touchedFields=t.touchedFields,Q=Q||(h.touchedFields||f.touchedFields)&&Ge!==z)}Q&&Z&&m.state.next(Te)}return Q?Te:{}},j=(M,U,z,se)=>{const Z=ne(t.errors,M),Q=(h.isValid||f.isValid)&&gn(U)&&t.isValid!==U;if(e.delayError&&z?(c=x(()=>b(M,z)),c(e.delayError)):(clearTimeout(u),c=null,z?Ye(t.errors,M,z):Et(t.errors,M)),(z?!Kn(Z,z):Z)||!tn(se)||Q){const ae={...se,...Q&&gn(U)?{isValid:U}:{},errors:t.errors,name:M};t={...t,...ae},m.state.next(ae)}},T=async M=>{_(M,!0);const U=await e.resolver(i,e.context,Qq(M||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(M),U},E=async M=>{const{errors:U}=await T(M);if(M)for(const z of M){const se=ne(U,z);se?Ye(t.errors,z,se):Et(t.errors,z)}else t.errors=U;return U},C=async(M,U,z={valid:!0})=>{for(const se in M){const Z=M[se];if(Z){const{_f:Q,...ae}=Z;if(Q){const Te=a.array.has(Q.name),Ge=Z._f&&Xq(Z._f);Ge&&h.validatingFields&&_([Q.name],!0);const Xt=await Hx(Z,a.disabled,i,v,e.shouldUseNativeValidation&&!U,Te);if(Ge&&h.validatingFields&&_([Q.name]),Xt[Q.name]&&(z.valid=!1,U))break;!U&&(ne(Xt,Q.name)?Te?nW(t.errors,Xt,Q.name):Ye(t.errors,Q.name,Xt[Q.name]):Et(t.errors,Q.name))}!tn(ae)&&await C(ae,U,z)}}return z.valid},D=()=>{for(const M of a.unMount){const U=ne(r,M);U&&(U._f.refs?U._f.refs.every(z=>!xp(z)):!xp(U._f.ref))&&de(M)}a.unMount=new Set},O=(M,U)=>!e.disabled&&(M&&U&&Ye(i,M,U),!Kn(Ie(),s)),k=(M,U,z)=>Qm(M,a,{...o.mount?i:gt(U)?s:bn(M)?{[M]:U}:U},z,U),R=M=>xv(ne(o.mount?i:s,M,e.shouldUnregister?ne(s,M,[]):[])),q=(M,U,z={})=>{const se=ne(r,M);let Z=U;if(se){const Q=se._f;Q&&(!Q.disabled&&Ye(i,M,yN(U,Q)),Z=ph(Q.ref)&&ln(U)?"":U,pN(Q.ref)?[...Q.ref.options].forEach(ae=>ae.selected=Z.includes(ae.value)):Q.refs?mu(Q.ref)?Q.refs.forEach(ae=>{(!ae.defaultChecked||!ae.disabled)&&(Array.isArray(Z)?ae.checked=!!Z.find(Te=>Te===ae.value):ae.checked=Z===ae.value||!!Z)}):Q.refs.forEach(ae=>ae.checked=ae.value===Z):Sv(Q.ref)?Q.ref.value="":(Q.ref.value=Z,Q.ref.type||m.state.next({name:M,values:Pt(i)})))}(z.shouldDirty||z.shouldTouch)&&N(M,Z,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&K(M)},te=(M,U,z)=>{for(const se in U){if(!U.hasOwnProperty(se))return;const Z=U[se],Q=M+"."+se,ae=ne(r,Q);(a.array.has(M)||Rt(Z)||ae&&!ae._f)&&!Oi(Z)?te(Q,Z,z):q(Q,Z,z)}},G=(M,U,z={})=>{const se=ne(r,M),Z=a.array.has(M),Q=Pt(U);Ye(i,M,Q),Z?(m.array.next({name:M,values:Pt(i)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&m.state.next({name:M,dirtyFields:Yo(s,i),isDirty:O(M,Q)})):se&&!se._f&&!ln(Q)?te(M,Q,z):q(M,Q,z),qx(M,a)&&m.state.next({...t,name:M}),m.state.next({name:o.mount?M:void 0,values:Pt(i)})},oe=async M=>{o.mount=!0;const U=M.target;let z=U.name,se=!0;const Z=ne(r,z),Q=Ge=>{se=Number.isNaN(Ge)||Oi(Ge)&&isNaN(Ge.getTime())||Kn(Ge,ne(i,z,Ge))},ae=$x(e.mode),Te=$x(e.reValidateMode);if(Z){let Ge,Xt;const gi=U.type?Bx(Z._f):cN(M),rr=M.type===fh.BLUR||M.type===fh.FOCUS_OUT,yi=!Yq(Z._f)&&!e.resolver&&!ne(t.errors,z)&&!Z._f.deps||eW(rr,ne(t.touchedFields,z),t.isSubmitted,Te,ae),Co=qx(z,a,rr);Ye(i,z,gi),rr?(!U||!U.readOnly)&&(Z._f.onBlur&&Z._f.onBlur(M),c&&c(0)):Z._f.onChange&&Z._f.onChange(M);const Po=N(z,gi,rr),lc=!tn(Po)||Co;if(!rr&&m.state.next({name:z,type:M.type,values:Pt(i)}),yi)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?rr&&y():rr||y()),lc&&m.state.next({name:z,...Co?{}:Po});if(!rr&&Co&&m.state.next({...t}),e.resolver){const{errors:vu}=await T([z]);if(Q(gi),se){const Tf=Wx(t.errors,r,z),No=Wx(vu,r,Tf.name||z);Ge=No.error,z=No.name,Xt=tn(vu)}}else _([z],!0),Ge=(await Hx(Z,a.disabled,i,v,e.shouldUseNativeValidation))[z],_([z]),Q(gi),se&&(Ge?Xt=!1:(h.isValid||f.isValid)&&(Xt=await C(r,!0)));se&&(Z._f.deps&&(!Array.isArray(Z._f.deps)||Z._f.deps.length>0)&&K(Z._f.deps),j(z,Xt,Ge,Po))}},Y=(M,U)=>{if(ne(t.errors,U)&&M.focus)return M.focus(),1},K=async(M,U={})=>{let z,se;const Z=sl(M);if(e.resolver){const Q=await E(gt(M)?M:Z);z=tn(Q),se=M?!Z.some(ae=>ne(Q,ae)):z}else M?(se=(await Promise.all(Z.map(async Q=>{const ae=ne(r,Q);return await C(ae&&ae._f?{[Q]:ae}:ae)}))).every(Boolean),!(!se&&!t.isValid)&&y()):se=z=await C(r);return m.state.next({...!bn(M)||(h.isValid||f.isValid)&&z!==t.isValid?{}:{name:M},...e.resolver||!M?{isValid:z}:{},errors:t.errors}),U.shouldFocus&&!se&&il(r,Y,M?Z:a.mount),se},Ie=(M,U)=>{let z={...o.mount?i:s};return U&&(z=fN(U.dirtyFields?t.dirtyFields:t.touchedFields,z)),gt(M)?z:bn(M)?ne(z,M):M.map(se=>ne(z,se))},ce=(M,U)=>({invalid:!!ne((U||t).errors,M),isDirty:!!ne((U||t).dirtyFields,M),error:ne((U||t).errors,M),isValidating:!!ne(t.validatingFields,M),isTouched:!!ne((U||t).touchedFields,M)}),Re=M=>{M&&sl(M).forEach(U=>Et(t.errors,U)),m.state.next({errors:M?t.errors:{}})},_e=(M,U,z)=>{const se=(ne(r,M,{_f:{}})._f||{}).ref,Z=ne(t.errors,M)||{},{ref:Q,message:ae,type:Te,...Ge}=Z;Ye(t.errors,M,{...Ge,...U,ref:se}),m.state.next({name:M,errors:t.errors,isValid:!1}),z&&z.shouldFocus&&se&&se.focus&&se.focus()},it=(M,U)=>Hn(M)?m.state.subscribe({next:z=>"values"in z&&M(k(void 0,U),z)}):k(M,U,!0),ot=M=>m.state.subscribe({next:U=>{Jq(M.name,U.name,M.exact)&&Zq(U,M.formState||h,Cr,M.reRenderRoot)&&M.callback({values:{...i},...t,...U,defaultValues:s})}}).unsubscribe,ft=M=>(o.mount=!0,f={...f,...M.formState},ot({...M,formState:f})),de=(M,U={})=>{for(const z of M?sl(M):a.mount)a.mount.delete(z),a.array.delete(z),U.keepValue||(Et(r,z),Et(i,z)),!U.keepError&&Et(t.errors,z),!U.keepDirty&&Et(t.dirtyFields,z),!U.keepTouched&&Et(t.touchedFields,z),!U.keepIsValidating&&Et(t.validatingFields,z),!e.shouldUnregister&&!U.keepDefaultValue&&Et(s,z);m.state.next({values:Pt(i)}),m.state.next({...t,...U.keepDirty?{isDirty:O()}:{}}),!U.keepIsValid&&y()},Me=({disabled:M,name:U})=>{(gn(M)&&o.mount||M||a.disabled.has(U))&&(M?a.disabled.add(U):a.disabled.delete(U))},qe=(M,U={})=>{let z=ne(r,M);const se=gn(U.disabled)||gn(e.disabled);return Ye(r,M,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:M}},name:M,mount:!0,...U}}),a.mount.add(M),z?Me({disabled:gn(U.disabled)?U.disabled:e.disabled,name:M}):P(M,!0,U.value),{...se?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:Pc(U.min),max:Pc(U.max),minLength:Pc(U.minLength),maxLength:Pc(U.maxLength),pattern:Pc(U.pattern)}:{},name:M,onChange:oe,onBlur:oe,ref:Z=>{if(Z){qe(M,U),z=ne(r,M);const Q=gt(Z.value)&&Z.querySelectorAll&&Z.querySelectorAll("input,select,textarea")[0]||Z,ae=Wq(Q),Te=z._f.refs||[];if(ae?Te.find(Ge=>Ge===Q):Q===z._f.ref)return;Ye(r,M,{_f:{...z._f,...ae?{refs:[...Te.filter(xp),Q,...Array.isArray(ne(s,M))?[{}]:[]],ref:{type:Q.type,name:M}}:{ref:Q}}}),P(M,!1,void 0,Q)}else z=ne(r,M,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(lN(a.array,M)&&o.action)&&a.unMount.add(M)}}},De=()=>e.shouldFocusError&&il(r,Y,a.mount),Fe=M=>{gn(M)&&(m.state.next({disabled:M}),il(r,(U,z)=>{const se=ne(r,z);se&&(U.disabled=se._f.disabled||M,Array.isArray(se._f.refs)&&se._f.refs.forEach(Z=>{Z.disabled=se._f.disabled||M}))},0,!1))},Ue=(M,U)=>async z=>{let se;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let Z=Pt(i);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:Q,values:ae}=await T();t.errors=Q,Z=Pt(ae)}else await C(r);if(a.disabled.size)for(const Q of a.disabled)Et(Z,Q);if(Et(t.errors,"root"),tn(t.errors)){m.state.next({errors:{}});try{await M(Z,z)}catch(Q){se=Q}}else U&&await U({...t.errors},z),De(),setTimeout(De);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:tn(t.errors)&&!se,submitCount:t.submitCount+1,errors:t.errors}),se)throw se},Ct=(M,U={})=>{ne(r,M)&&(gt(U.defaultValue)?G(M,Pt(ne(s,M))):(G(M,U.defaultValue),Ye(s,M,Pt(U.defaultValue))),U.keepTouched||Et(t.touchedFields,M),U.keepDirty||(Et(t.dirtyFields,M),t.isDirty=U.defaultValue?O(M,Pt(ne(s,M))):O()),U.keepError||(Et(t.errors,M),h.isValid&&y()),m.state.next({...t}))},Ft=(M,U={})=>{const z=M?Pt(M):s,se=Pt(z),Z=tn(M),Q=Z?s:se;if(U.keepDefaultValues||(s=z),!U.keepValues){if(U.keepDirtyValues){const ae=new Set([...a.mount,...Object.keys(Yo(s,i))]);for(const Te of Array.from(ae))ne(t.dirtyFields,Te)?Ye(Q,Te,ne(i,Te)):G(Te,ne(Q,Te))}else{if(bv&&gt(M))for(const ae of a.mount){const Te=ne(r,ae);if(Te&&Te._f){const Ge=Array.isArray(Te._f.refs)?Te._f.refs[0]:Te._f.ref;if(ph(Ge)){const Xt=Ge.closest("form");if(Xt){Xt.reset();break}}}}if(U.keepFieldsRef)for(const ae of a.mount)G(ae,ne(Q,ae));else r={}}i=e.shouldUnregister?U.keepDefaultValues?Pt(s):{}:Pt(Q),m.array.next({values:{...Q}}),m.state.next({values:{...Q}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!U.keepIsValid||!!U.keepDirtyValues||!e.shouldUnregister&&!tn(Q),o.watch=!!e.shouldUnregister,m.state.next({submitCount:U.keepSubmitCount?t.submitCount:0,isDirty:Z?!1:U.keepDirty?t.isDirty:!!(U.keepDefaultValues&&!Kn(M,s)),isSubmitted:U.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Z?{}:U.keepDirtyValues?U.keepDefaultValues&&i?Yo(s,i):t.dirtyFields:U.keepDefaultValues&&M?Yo(s,M):U.keepDirty?t.dirtyFields:{},touchedFields:U.keepTouched?t.touchedFields:{},errors:U.keepErrors?t.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Cn=(M,U)=>Ft(Hn(M)?M(i):M,U),tr=(M,U={})=>{const z=ne(r,M),se=z&&z._f;if(se){const Z=se.refs?se.refs[0]:se.ref;Z.focus&&(Z.focus(),U.shouldSelect&&Hn(Z.select)&&Z.select())}},Cr=M=>{t={...t,...M}},nr={control:{register:qe,unregister:de,getFieldState:ce,handleSubmit:Ue,setError:_e,_subscribe:ot,_runSchema:T,_focusError:De,_getWatch:k,_getDirty:O,_setValid:y,_setFieldArray:I,_setDisabledField:Me,_setErrors:S,_getFieldArray:R,_reset:Ft,_resetDefaultValues:()=>Hn(e.defaultValues)&&e.defaultValues().then(M=>{Cn(M,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Fe,_subjects:m,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return a},set _names(M){a=M},get _formState(){return t},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:ft,trigger:K,register:qe,handleSubmit:Ue,watch:it,setValue:G,getValues:Ie,reset:Cn,resetField:Ct,clearErrors:Re,unregister:de,setError:_e,setFocus:tr,getFieldState:ce};return{...nr,formControl:nr}}function iW(n={}){const e=we.useRef(void 0),t=we.useRef(void 0),[r,s]=we.useState({isDirty:!1,isValidating:!1,isLoading:Hn(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Hn(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:r},n.defaultValues&&!Hn(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...a}=sW(n);e.current={...a,formState:r}}const i=e.current.control;return i._options=n,Tv(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),we.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),we.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode)},[i,n.mode,n.reValidateMode]),we.useEffect(()=>{n.errors&&(i._setErrors(n.errors),i._focusError())},[i,n.errors]),we.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),we.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),we.useEffect(()=>{n.values&&!Kn(n.values,t.current)?(i._reset(n.values,{keepFieldsRef:!0,...i._options.resetOptions}),t.current=n.values,s(o=>({...o}))):i._resetDefaultValues()},[i,n.values]),we.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=dN(r,i),e.current}const Gx=(n,e,t)=>{if(n&&"reportValidity"in n){const r=ne(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},_N=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?Gx(r.ref,t,n):r&&r.refs&&r.refs.forEach(s=>Gx(s,t,n))}},oW=(n,e)=>{e.shouldUseNativeValidation&&_N(n,e);const t={};for(const r in n){const s=ne(e.fields,r),i=Object.assign(n[r]||{},{ref:s&&s.ref});if(aW(e.names||Object.keys(n),r)){const o=Object.assign({},ne(t,r));Ye(o,"root",i),Ye(t,r,o)}else Ye(t,r,i)}return t},aW=(n,e)=>{const t=Qx(e);return n.some(r=>Qx(r).match(`^${t}\\.\\d+`))};function Qx(n){return n.replace(/\]|\[/g,"")}function cW(n,e){for(var t={};n.length;){var r=n[0],s=r.code,i=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(f){return n.push(f)})}),e){var c=t[o].types,u=c&&c[r.code];t[o]=hN(o,e,t,s,u?[].concat(u,r.message):r.message)}n.shift()}return t}function lW(n,e,t){return t===void 0&&(t={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&_N({},i),{errors:{},values:t.raw?Object.assign({},r):u}})}catch(u){return a(u)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:oW(cW(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}}const wN=p.forwardRef(({className:n,...e},t)=>d.jsx("textarea",{className:me("flex min-h-[120px] w-full rounded-[0.625rem] border border-border bg-card px-4 py-3 text-base leading-relaxed shadow-soft ring-offset-background placeholder:text-muted-foreground/60 transition-gentle focus-visible:outline-none focus-visible:border-ring/50 focus-visible:ring-2 focus-visible:ring-ring/30 focus-visible:ring-offset-1 focus-visible:shadow-elevated disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted/30 resize-y",n),ref:t,...e}));wN.displayName="Textarea";var He;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(He||(He={}));var Xx;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Xx||(Xx={}));const he=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bs=n=>{switch(typeof n){case"undefined":return he.undefined;case"string":return he.string;case"number":return Number.isNaN(n)?he.nan:he.number;case"boolean":return he.boolean;case"function":return he.function;case"bigint":return he.bigint;case"symbol":return he.symbol;case"object":return Array.isArray(n)?he.array:n===null?he.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?he.promise:typeof Map<"u"&&n instanceof Map?he.map:typeof Set<"u"&&n instanceof Set?he.set:typeof Date<"u"&&n instanceof Date?he.date:he.object;default:return he.unknown}},X=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class rs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof rs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}rs.create=n=>new rs(n);const Zm=(n,e)=>{let t;switch(n.code){case X.invalid_type:n.received===he.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case X.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,He.jsonStringifyReplacer)}`;break;case X.unrecognized_keys:t=`Unrecognized key(s) in object: ${He.joinValues(n.keys,", ")}`;break;case X.invalid_union:t="Invalid input";break;case X.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${He.joinValues(n.options)}`;break;case X.invalid_enum_value:t=`Invalid enum value. Expected ${He.joinValues(n.options)}, received '${n.received}'`;break;case X.invalid_arguments:t="Invalid function arguments";break;case X.invalid_return_type:t="Invalid function return type";break;case X.invalid_date:t="Invalid date";break;case X.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:He.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case X.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case X.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case X.custom:t="Invalid input";break;case X.invalid_intersection_types:t="Intersection results could not be merged";break;case X.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case X.not_finite:t="Number must be finite";break;default:t=e.defaultError,He.assertNever(n)}return{message:t}};let uW=Zm;function dW(){return uW}const hW=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function le(n,e){const t=dW(),r=hW({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Zm?void 0:Zm].filter(s=>!!s)});n.common.issues.push(r)}class Rn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return Se;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Rn.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Se=Object.freeze({status:"aborted"}),zc=n=>({status:"dirty",value:n}),Ln=n=>({status:"valid",value:n}),Yx=n=>n.status==="aborted",Zx=n=>n.status==="dirty",Ba=n=>n.status==="valid",gh=n=>typeof Promise<"u"&&n instanceof Promise;var pe;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(pe||(pe={}));class ii{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Jx=(n,e)=>{if(Ba(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new rs(n.common.issues);return this._error=t,this._error}}};function Ve(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=n;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??t??a.defaultError}},description:s}}class ze{get description(){return this._def.description}_getType(e){return bs(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:bs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rn,ctx:{common:e.parent.common,data:e.data,parsedType:bs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(gh(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bs(e)},s=this._parseSync({data:e,path:r.path,parent:r});return Jx(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bs(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return Ba(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>Ba(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(gh(s)?s:Promise.resolve(s));return Jx(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:X.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new qa({schema:this,typeName:Ae.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Gs.create(this,this._def)}nullable(){return Wa.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xr.create(this)}promise(){return wh.create(this,this._def)}or(e){return vh.create([this,e],this._def)}and(e){return _h.create(this,e,this._def)}transform(e){return new qa({...Ve(this._def),schema:this,typeName:Ae.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new eg({...Ve(this._def),innerType:this,defaultValue:t,typeName:Ae.ZodDefault})}brand(){return new VW({typeName:Ae.ZodBranded,type:this,...Ve(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new tg({...Ve(this._def),innerType:this,catchValue:t,typeName:Ae.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Rv.create(this,e)}readonly(){return ng.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fW=/^c[^\s-]{8,}$/i,pW=/^[0-9a-z]+$/,mW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yW=/^[a-z0-9_-]{21}$/i,vW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_W=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ep;const xW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,IW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,SW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,bN="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RW=new RegExp(`^${bN}$`);function xN(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function CW(n){return new RegExp(`^${xN(n)}$`)}function PW(n){let e=`${bN}T${xN(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function NW(n,e){return!!((e==="v4"||!e)&&xW.test(n)||(e==="v6"||!e)&&IW.test(n))}function kW(n,e){if(!vW.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function DW(n,e){return!!((e==="v4"||!e)&&EW.test(n)||(e==="v6"||!e)&&TW.test(n))}class qr extends ze{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==he.string){const i=this._getOrReturnCtx(e);return le(i,{code:X.invalid_type,expected:he.string,received:i.parsedType}),Se}const r=new Rn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:X.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:X.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?le(s,{code:X.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&le(s,{code:X.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")wW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"email",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Ep||(Ep=new RegExp(bW,"u")),Ep.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"emoji",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")gW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"uuid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")yW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"nanoid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")fW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"cuid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")pW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"cuid2",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")mW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"ulid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),le(s,{validation:"url",code:X.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"regex",code:X.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),le(s,{code:X.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),le(s,{code:X.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),le(s,{code:X.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?PW(i).test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{code:X.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?RW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{code:X.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?CW(i).test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{code:X.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?_W.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"duration",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?NW(e.data,i.version)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"ip",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?kW(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"jwt",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?DW(e.data,i.version)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"cidr",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?SW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"base64",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?AW.test(e.data)||(s=this._getOrReturnCtx(e,s),le(s,{validation:"base64url",code:X.invalid_string,message:i.message}),r.dirty()):He.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:X.invalid_string,...pe.errToObj(r)})}_addCheck(e){return new qr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...pe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...pe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...pe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...pe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...pe.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...pe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...pe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...pe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...pe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...pe.errToObj(t)})}nonempty(e){return this.min(1,pe.errToObj(e))}trim(){return new qr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}qr.create=n=>new qr({checks:[],typeName:Ae.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Ve(n)});function OW(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=Number.parseInt(n.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class yo extends ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==he.number){const i=this._getOrReturnCtx(e);return le(i,{code:X.invalid_type,expected:he.number,received:i.parsedType}),Se}let r;const s=new Rn;for(const i of this._def.checks)i.kind==="int"?He.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),le(r,{code:X.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),le(r,{code:X.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),le(r,{code:X.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?OW(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),le(r,{code:X.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),le(r,{code:X.not_finite,message:i.message}),s.dirty()):He.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,pe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pe.toString(t))}setLimit(e,t,r,s){return new yo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:pe.toString(s)}]})}_addCheck(e){return new yo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pe.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}yo.create=n=>new yo({checks:[],typeName:Ae.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ve(n)});class vo extends ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==he.bigint)return this._getInvalidInput(e);let r;const s=new Rn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),le(r,{code:X.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),le(r,{code:X.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),le(r,{code:X.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):He.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return le(t,{code:X.invalid_type,expected:he.bigint,received:t.parsedType}),Se}gte(e,t){return this.setLimit("min",e,!0,pe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,pe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,pe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,pe.toString(t))}setLimit(e,t,r,s){return new vo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:pe.toString(s)}]})}_addCheck(e){return new vo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}vo.create=n=>new vo({checks:[],typeName:Ae.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Ve(n)});class yh extends ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==he.boolean){const r=this._getOrReturnCtx(e);return le(r,{code:X.invalid_type,expected:he.boolean,received:r.parsedType}),Se}return Ln(e.data)}}yh.create=n=>new yh({typeName:Ae.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ve(n)});class $a extends ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==he.date){const i=this._getOrReturnCtx(e);return le(i,{code:X.invalid_type,expected:he.date,received:i.parsedType}),Se}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return le(i,{code:X.invalid_date}),Se}const r=new Rn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:X.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),le(s,{code:X.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):He.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:pe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:pe.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}$a.create=n=>new $a({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Ae.ZodDate,...Ve(n)});class eE extends ze{_parse(e){if(this._getType(e)!==he.symbol){const r=this._getOrReturnCtx(e);return le(r,{code:X.invalid_type,expected:he.symbol,received:r.parsedType}),Se}return Ln(e.data)}}eE.create=n=>new eE({typeName:Ae.ZodSymbol,...Ve(n)});class tE extends ze{_parse(e){if(this._getType(e)!==he.undefined){const r=this._getOrReturnCtx(e);return le(r,{code:X.invalid_type,expected:he.undefined,received:r.parsedType}),Se}return Ln(e.data)}}tE.create=n=>new tE({typeName:Ae.ZodUndefined,...Ve(n)});class nE extends ze{_parse(e){if(this._getType(e)!==he.null){const r=this._getOrReturnCtx(e);return le(r,{code:X.invalid_type,expected:he.null,received:r.parsedType}),Se}return Ln(e.data)}}nE.create=n=>new nE({typeName:Ae.ZodNull,...Ve(n)});class Nl extends ze{constructor(){super(...arguments),this._any=!0}_parse(e){return Ln(e.data)}}Nl.create=n=>new Nl({typeName:Ae.ZodAny,...Ve(n)});class rE extends ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ln(e.data)}}rE.create=n=>new rE({typeName:Ae.ZodUnknown,...Ve(n)});class oi extends ze{_parse(e){const t=this._getOrReturnCtx(e);return le(t,{code:X.invalid_type,expected:he.never,received:t.parsedType}),Se}}oi.create=n=>new oi({typeName:Ae.ZodNever,...Ve(n)});class sE extends ze{_parse(e){if(this._getType(e)!==he.undefined){const r=this._getOrReturnCtx(e);return le(r,{code:X.invalid_type,expected:he.void,received:r.parsedType}),Se}return Ln(e.data)}}sE.create=n=>new sE({typeName:Ae.ZodVoid,...Ve(n)});class xr extends ze{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==he.array)return le(t,{code:X.invalid_type,expected:he.array,received:t.parsedType}),Se;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(le(t,{code:o?X.too_big:X.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(le(t,{code:X.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(le(t,{code:X.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new ii(t,o,t.path,a)))).then(o=>Rn.mergeArray(r,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new ii(t,o,t.path,a)));return Rn.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new xr({...this._def,minLength:{value:e,message:pe.toString(t)}})}max(e,t){return new xr({...this._def,maxLength:{value:e,message:pe.toString(t)}})}length(e,t){return new xr({...this._def,exactLength:{value:e,message:pe.toString(t)}})}nonempty(e){return this.min(1,e)}}xr.create=(n,e)=>new xr({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Ae.ZodArray,...Ve(e)});function Zo(n){if(n instanceof Tt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Gs.create(Zo(r))}return new Tt({...n._def,shape:()=>e})}else return n instanceof xr?new xr({...n._def,type:Zo(n.element)}):n instanceof Gs?Gs.create(Zo(n.unwrap())):n instanceof Wa?Wa.create(Zo(n.unwrap())):n instanceof _o?_o.create(n.items.map(e=>Zo(e))):n}class Tt extends ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=He.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==he.object){const u=this._getOrReturnCtx(e);return le(u,{code:X.invalid_type,expected:he.object,received:u.parsedType}),Se}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof oi&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const h=i[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new ii(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof oi){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")a.length>0&&(le(s,{code:X.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const f=s.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new ii(s,f,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const f=await h.key,m=await h.value;u.push({key:f,value:m,alwaysSet:h.alwaysSet})}return u}).then(u=>Rn.mergeObjectSync(r,u)):Rn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return pe.errToObj,new Tt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:pe.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Tt({...this._def,unknownKeys:"strip"})}passthrough(){return new Tt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Tt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Tt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ae.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Tt({...this._def,catchall:e})}pick(e){const t={};for(const r of He.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Tt({...this._def,shape:()=>t})}omit(e){const t={};for(const r of He.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Tt({...this._def,shape:()=>t})}deepPartial(){return Zo(this)}partial(e){const t={};for(const r of He.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new Tt({...this._def,shape:()=>t})}required(e){const t={};for(const r of He.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Gs;)i=i._def.innerType;t[r]=i}return new Tt({...this._def,shape:()=>t})}keyof(){return EN(He.objectKeys(this.shape))}}Tt.create=(n,e)=>new Tt({shape:()=>n,unknownKeys:"strip",catchall:oi.create(),typeName:Ae.ZodObject,...Ve(e)});Tt.strictCreate=(n,e)=>new Tt({shape:()=>n,unknownKeys:"strict",catchall:oi.create(),typeName:Ae.ZodObject,...Ve(e)});Tt.lazycreate=(n,e)=>new Tt({shape:n,unknownKeys:"strip",catchall:oi.create(),typeName:Ae.ZodObject,...Ve(e)});class vh extends ze{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new rs(a.ctx.common.issues));return le(t,{code:X.invalid_union,unionErrors:o}),Se}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...t,common:{...t.common,issues:[]},parent:null},h=c._parseSync({data:t.data,path:t.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new rs(c));return le(t,{code:X.invalid_union,unionErrors:a}),Se}}get options(){return this._def.options}}vh.create=(n,e)=>new vh({options:n,typeName:Ae.ZodUnion,...Ve(e)});function Jm(n,e){const t=bs(n),r=bs(e);if(n===e)return{valid:!0,data:n};if(t===he.object&&r===he.object){const s=He.objectKeys(e),i=He.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of i){const c=Jm(n[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===he.array&&r===he.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],c=Jm(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===he.date&&r===he.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class _h extends ze{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Yx(i)||Yx(o))return Se;const a=Jm(i.value,o.value);return a.valid?((Zx(i)||Zx(o))&&t.dirty(),{status:t.value,value:a.data}):(le(r,{code:X.invalid_intersection_types}),Se)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}_h.create=(n,e,t)=>new _h({left:n,right:e,typeName:Ae.ZodIntersection,...Ve(t)});class _o extends ze{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.array)return le(r,{code:X.invalid_type,expected:he.array,received:r.parsedType}),Se;if(r.data.length<this._def.items.length)return le(r,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&r.data.length>this._def.items.length&&(le(r,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ii(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Rn.mergeArray(t,o)):Rn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new _o({...this._def,rest:e})}}_o.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _o({items:n,typeName:Ae.ZodTuple,rest:null,...Ve(e)})};class iE extends ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.map)return le(r,{code:X.invalid_type,expected:he.map,received:r.parsedType}),Se;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new ii(r,a,r.path,[u,"key"])),value:i._parse(new ii(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return Se;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(u.value,h.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return Se;(u.status==="dirty"||h.status==="dirty")&&t.dirty(),a.set(u.value,h.value)}return{status:t.value,value:a}}}}iE.create=(n,e,t)=>new iE({valueType:e,keyType:n,typeName:Ae.ZodMap,...Ve(t)});class kl extends ze{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==he.set)return le(r,{code:X.invalid_type,expected:he.set,received:r.parsedType}),Se;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(le(r,{code:X.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(le(r,{code:X.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return Se;h.status==="dirty"&&t.dirty(),u.add(h.value)}return{status:t.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new ii(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new kl({...this._def,minSize:{value:e,message:pe.toString(t)}})}max(e,t){return new kl({...this._def,maxSize:{value:e,message:pe.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}kl.create=(n,e)=>new kl({valueType:n,minSize:null,maxSize:null,typeName:Ae.ZodSet,...Ve(e)});class oE extends ze{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}oE.create=(n,e)=>new oE({getter:n,typeName:Ae.ZodLazy,...Ve(e)});class aE extends ze{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return le(t,{received:t.data,code:X.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}}aE.create=(n,e)=>new aE({value:n,typeName:Ae.ZodLiteral,...Ve(e)});function EN(n,e){return new za({values:n,typeName:Ae.ZodEnum,...Ve(e)})}class za extends ze{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return le(t,{expected:He.joinValues(r),received:t.parsedType,code:X.invalid_type}),Se}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return le(t,{received:t.data,code:X.invalid_enum_value,options:r}),Se}return Ln(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return za.create(e,{...this._def,...t})}exclude(e,t=this._def){return za.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}za.create=EN;class cE extends ze{_parse(e){const t=He.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==he.string&&r.parsedType!==he.number){const s=He.objectValues(t);return le(r,{expected:He.joinValues(s),received:r.parsedType,code:X.invalid_type}),Se}if(this._cache||(this._cache=new Set(He.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=He.objectValues(t);return le(r,{received:r.data,code:X.invalid_enum_value,options:s}),Se}return Ln(e.data)}get enum(){return this._def.values}}cE.create=(n,e)=>new cE({values:n,typeName:Ae.ZodNativeEnum,...Ve(e)});class wh extends ze{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==he.promise&&t.common.async===!1)return le(t,{code:X.invalid_type,expected:he.promise,received:t.parsedType}),Se;const r=t.parsedType===he.promise?t.data:Promise.resolve(t.data);return Ln(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}wh.create=(n,e)=>new wh({type:n,typeName:Ae.ZodPromise,...Ve(e)});class qa extends ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{le(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Se;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Se:c.status==="dirty"||t.value==="dirty"?zc(c.value):c});{if(t.value==="aborted")return Se;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Se:a.status==="dirty"||t.value==="dirty"?zc(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Se:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Se:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ba(o))return Se;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ba(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):Se);He.assertNever(s)}}qa.create=(n,e,t)=>new qa({schema:n,typeName:Ae.ZodEffects,effect:e,...Ve(t)});qa.createWithPreprocess=(n,e,t)=>new qa({schema:e,effect:{type:"preprocess",transform:n},typeName:Ae.ZodEffects,...Ve(t)});class Gs extends ze{_parse(e){return this._getType(e)===he.undefined?Ln(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gs.create=(n,e)=>new Gs({innerType:n,typeName:Ae.ZodOptional,...Ve(e)});class Wa extends ze{_parse(e){return this._getType(e)===he.null?Ln(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wa.create=(n,e)=>new Wa({innerType:n,typeName:Ae.ZodNullable,...Ve(e)});class eg extends ze{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===he.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eg.create=(n,e)=>new eg({innerType:n,typeName:Ae.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ve(e)});class tg extends ze{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new rs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}tg.create=(n,e)=>new tg({innerType:n,typeName:Ae.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ve(e)});class lE extends ze{_parse(e){if(this._getType(e)!==he.nan){const r=this._getOrReturnCtx(e);return le(r,{code:X.invalid_type,expected:he.nan,received:r.parsedType}),Se}return{status:"valid",value:e.data}}}lE.create=n=>new lE({typeName:Ae.ZodNaN,...Ve(n)});class VW extends ze{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Rv extends ze{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Se:i.status==="dirty"?(t.dirty(),zc(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Se:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Rv({in:e,out:t,typeName:Ae.ZodPipeline})}}class ng extends ze{_parse(e){const t=this._def.innerType._parse(e),r=s=>(Ba(s)&&(s.value=Object.freeze(s.value)),s);return gh(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}ng.create=(n,e)=>new ng({innerType:n,typeName:Ae.ZodReadonly,...Ve(e)});function uE(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function MW(n,e={},t){return n?Nl.create().superRefine((r,s)=>{const i=n(r);if(i instanceof Promise)return i.then(o=>{if(!o){const a=uE(e,r),c=a.fatal??t??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!i){const o=uE(e,r),a=o.fatal??t??!0;s.addIssue({code:"custom",...o,fatal:a})}}):Nl.create()}var Ae;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Ae||(Ae={}));const jW=(n,e={message:`Input not instance of ${n.name}`})=>MW(t=>t instanceof n,e),ut=qr.create;yo.create;vo.create;yh.create;$a.create;Nl.create;oi.create;const LW=xr.create,gu=Tt.create,FW=vh.create;_h.create;_o.create;za.create;wh.create;Gs.create;Wa.create;const rg={string:n=>qr.create({...n,coerce:!0}),number:n=>yo.create({...n,coerce:!0}),boolean:n=>yh.create({...n,coerce:!0}),bigint:n=>vo.create({...n,coerce:!0}),date:n=>$a.create({...n,coerce:!0})},UW=FW([ut(),jW(File)]),BW=gu({title:ut().min(5,"O ttulo deve ter pelo menos 5 caracteres."),description:ut().min(10,"A descrio deve ter pelo menos 10 caracteres."),price:rg.number({invalid_type_error:"O preo  obrigatrio."}).min(.01,"O preo deve ser positivo."),category:ut().min(1,"Por favor, selecione uma categoria."),condition:ut().min(1,"Por favor, selecione a condio do artigo."),images:LW(UW).min(1,"Pelo menos uma imagem  obrigatria."),quantity:rg.number().min(1,"A quantidade deve ser pelo menos 1."),brand:ut().optional().default(""),material:ut().optional().default(""),sizes:ut().optional().default("")});gu({email:ut().email("Por favor, introduza um email vlido."),password:ut().min(1,"A palavra-passe  obrigatria.")});gu({username:ut().min(3,"O nome de utilizador deve ter pelo menos 3 caracteres."),email:ut().email("Por favor, introduza um email vlido."),password:ut().min(8,"A palavra-passe deve ter pelo menos 8 caracteres."),confirmPassword:ut()}).refine(n=>n.password===n.confirmPassword,{message:"As palavras-passe no correspondem.",path:["confirmPassword"]});gu({email:ut().email("Email invlido."),firstName:ut().min(1,"O nome  obrigatrio."),lastName:ut().min(1,"O apelido  obrigatrio."),phone:ut().optional(),country:ut().min(1,"O pas  obrigatrio."),address:ut().min(1,"A morada  obrigatria."),city:ut().min(1,"A cidade  obrigatria."),region:ut().min(1,"A regio  obrigatria."),postalCode:ut().min(1,"O cdigo postal  obrigatrio.")});gu({rating:rg.number().min(1," obrigatrio dar uma classificao.").max(5),comment:ut().min(10,"O comentrio deve ter pelo menos 10 caracteres.").max(500,"O comentrio no pode exceder os 500 caracteres.")});const Nc="---outro---";function dE({options:n,value:e,onChange:t,placeholder:r,id:s}){const i=e&&!n.includes(e),[o,a]=p.useState(i?Nc:e);p.useEffect(()=>{const h=e&&n.includes(e);a(h?e:e?Nc:"")},[e,n]);const c=h=>{a(h),t(h!==Nc?h:"")},u=h=>{t(h.target.value)};return d.jsxs("div",{className:"space-y-2 bg-accent/20 rounded-md p-2",children:[d.jsxs(dh,{onValueChange:c,value:o,children:[d.jsx(Cl,{id:s,children:d.jsx(hh,{placeholder:r})}),d.jsxs(Pl,{children:[n.map(h=>d.jsx(Nt,{value:h,children:h},h)),d.jsx(Nt,{value:Nc,children:"Outro..."})]})]}),o===Nc&&d.jsx(un,{placeholder:"Escreva a sua opo aqui...",value:e,onChange:u,className:"mt-2"})]})}const $W=["Nike","Adidas","Zara","H&M","Apple","Samsung","Fnac"],zW=["Algodo","Polister","L","Seda","Plstico","Metal"];function qW(){var I;const[n,e]=p.useState(!1),{toast:t}=tf(),{addProduct:r}=ef(),{user:s,loading:i}=nc(),o=jn(),{control:a,handleSubmit:c,setValue:u,watch:h,formState:{errors:f},reset:m}=iW({resolver:lW(BW),defaultValues:{title:"",description:"",price:void 0,quantity:1,category:"",condition:"",brand:"",material:"",sizes:"",images:[]}}),v=h("images"),x=async b=>{const S=b.target.files;if(S){const P=Array.from(S);u("images",[...h("images")||[],...P],{shouldValidate:!0})}},y=b=>{const P=h("images").filter((N,j)=>j!==b);u("images",P,{shouldValidate:!0})},_=async b=>{if(i||!s){t({variant:"destructive",title:"Erro de Autenticao",description:"Por favor, aguarde ou faa login novamente."});return}e(!0);try{const S=(b.images||[]).filter(E=>typeof E!="string");for(const E of S){if(!E.type.startsWith("image/")){t({variant:"destructive",title:"Ficheiro invlido",description:`Apenas imagens so permitidas. (${E.name})`});return}if(E.size>5*1024*1024){t({variant:"destructive",title:"Imagem muito grande",description:`${E.name} excede 5MB.`});return}}async function P(E){const C=document.createElement("img"),D=URL.createObjectURL(E);await new Promise(te=>{C.onload=()=>te(),C.src=D});const O=document.createElement("canvas"),R=Math.min(1,1200/Math.max(C.width,C.height));O.width=Math.round(C.width*R),O.height=Math.round(C.height*R);const q=O.getContext("2d");return q==null||q.drawImage(C,0,0,O.width,O.height),URL.revokeObjectURL(D),await new Promise(te=>O.toBlob(G=>te(G),"image/jpeg",.8))}const N=(b.images||[]).map(async(E,C)=>{if(typeof E=="string")return E;const D=await P(E),O=`products/${s.uid}/${Date.now()}-${C}.jpg`,k=A4(k4,O);return await T4(k,D,{contentType:"image/jpeg"}),await S4(k)}),j=await Promise.all(N),T=b.sizes?b.sizes.split(",").map(E=>E.trim().toUpperCase()):[];await r({name:b.title,description:b.description,price:b.price,quantity:b.quantity,category:b.category,condition:b.condition,brand:b.brand,material:b.material,sizes:T,imageUrls:j,imageHint:b.title.split(" ").slice(0,2).join(" "),userEmail:s.email,userName:s.name,userId:s.uid}),t({title:"Anncio Publicado!",description:"O seu produto foi listado com sucesso!"}),m(),o("/")}catch{t({variant:"destructive",title:"Erro ao Publicar",description:"Ocorreu um erro. Verifique as permisses da base de dados e tente novamente."})}finally{e(!1)}};return i?d.jsxs(Dn,{children:[d.jsxs(On,{children:[d.jsx(Qn,{children:"Venda o seu artigo"}),d.jsx(Rl,{children:"A verificar a sua sesso..."})]}),d.jsx(Vn,{children:d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(El,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})]}):d.jsxs(Dn,{children:[d.jsxs(On,{children:[d.jsx(Qn,{children:"Venda o seu artigo"}),d.jsx(Rl,{children:"Preencha os detalhes abaixo. Campos com * so opcionais."})]}),d.jsx(Vn,{children:d.jsxs("form",{onSubmit:c(_),className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"image-upload",children:"Imagens do Produto"}),d.jsxs("div",{className:"relative flex justify-center items-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary transition-colors",children:[d.jsx(un,{id:"image-upload",type:"file",multiple:!0,className:"absolute w-full h-full opacity-0 cursor-pointer",onChange:x,accept:"image/*"}),d.jsxs("div",{className:"text-center text-muted-foreground",children:[d.jsx(cB,{className:"mx-auto h-8 w-8"}),d.jsx("p",{className:"mt-1 text-sm",children:"Arraste e solte ou clique para carregar"})]})]}),v.length>0&&d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:v.map((b,S)=>d.jsxs("div",{className:"relative group aspect-square",children:[d.jsx(IC,{src:typeof b=="string"?b:URL.createObjectURL(b),alt:`Pr-visualizao ${S+1}`,fill:!0,loading:"lazy",sizes:"(max-width: 640px) 33vw, (max-width: 768px) 25vw, 20vw",className:"rounded-md object-cover"}),d.jsx("button",{type:"button",onClick:()=>y(S),className:"absolute top-1 right-1 bg-black/50 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(rf,{className:"h-4 w-4"})})]},S))}),f.images&&d.jsx("p",{className:"text-sm text-destructive",children:(I=f.images.message)==null?void 0:I.toString()})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"title",children:"Ttulo"}),d.jsx(Or,{name:"title",control:a,render:({field:b})=>d.jsx(un,{id:"title",placeholder:"Ex: Casaco de L Vintage",...b})}),f.title&&d.jsx("p",{className:"text-sm text-destructive",children:f.title.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"description",children:"Descrio"}),d.jsx(Or,{name:"description",control:a,render:({field:b})=>d.jsx(wN,{id:"description",placeholder:"Descreva o seu artigo em detalhe...",rows:5,...b})}),f.description&&d.jsx("p",{className:"text-sm text-destructive",children:f.description.message})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"price",children:"Preo ()"}),d.jsx(Or,{name:"price",control:a,render:({field:b})=>d.jsx(un,{id:"price",type:"number",step:"0.01",placeholder:"25.00",...b,value:b.value??""})}),f.price&&d.jsx("p",{className:"text-sm text-destructive",children:f.price.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"quantity",children:"Quantidade"}),d.jsx(Or,{name:"quantity",control:a,render:({field:b})=>d.jsx(un,{id:"quantity",type:"number",step:"1",placeholder:"1",...b,value:b.value??""})}),f.quantity&&d.jsx("p",{className:"text-sm text-destructive",children:f.quantity.message})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"brand",children:"Marca*"}),d.jsx(Or,{name:"brand",control:a,render:({field:b})=>d.jsx(dE,{id:"brand",options:$W,placeholder:"Selecione ou escreva uma marca",...b})}),f.brand&&d.jsx("p",{className:"text-sm text-destructive",children:f.brand.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"material",children:"Material*"}),d.jsx(Or,{name:"material",control:a,render:({field:b})=>d.jsx(dE,{id:"material",options:zW,placeholder:"Selecione ou escreva um material",...b})}),f.material&&d.jsx("p",{className:"text-sm text-destructive",children:f.material.message})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"sizes",children:"Tamanhos* (separados por vrgula)"}),d.jsx(Or,{name:"sizes",control:a,render:({field:b})=>d.jsx(un,{id:"sizes",placeholder:"S, M, L, XL",...b,value:b.value??""})}),f.sizes&&d.jsx("p",{className:"text-sm text-destructive",children:f.sizes.message})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Categoria"}),d.jsx(Or,{name:"category",control:a,render:({field:b})=>d.jsxs(dh,{onValueChange:b.onChange,value:b.value,children:[d.jsx(Cl,{children:d.jsx(hh,{placeholder:"Selecione uma categoria"})}),d.jsxs(Pl,{children:[d.jsx(Nt,{value:"Roupa",children:"Roupa"}),d.jsx(Nt,{value:"Calado",children:"Calado"}),d.jsx(Nt,{value:"Livros",children:"Livros"}),d.jsx(Nt,{value:"Eletrnica",children:"Eletrnica"}),d.jsx(Nt,{value:"Mveis",children:"Mveis"}),d.jsx(Nt,{value:"Decorao",children:"Decorao"}),d.jsx(Nt,{value:"Esportes",children:"Esportes"}),d.jsx(Nt,{value:"Jogos",children:"Jogos"}),d.jsx(Nt,{value:"Arte",children:"Arte"}),d.jsx(Nt,{value:"Outro",children:"Outro"})]})]})}),f.category&&d.jsx("p",{className:"text-sm text-destructive",children:f.category.message})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{children:"Condio"}),d.jsx(Or,{name:"condition",control:a,render:({field:b})=>d.jsxs(dh,{onValueChange:b.onChange,value:b.value,children:[d.jsx(Cl,{children:d.jsx(hh,{placeholder:"Selecione a condio"})}),d.jsxs(Pl,{children:[d.jsx(Nt,{value:"Novo",children:"Novo"}),d.jsx(Nt,{value:"Muito bom",children:"Muito bom"}),d.jsx(Nt,{value:"Bom",children:"Bom"})]})]})}),f.condition&&d.jsx("p",{className:"text-sm text-destructive",children:f.condition.message})]})]}),d.jsxs(rt,{type:"submit",className:"w-full",size:"lg",disabled:n||i,children:[(n||i)&&d.jsx(El,{className:"mr-2 h-4 w-4 animate-spin"}),"Publicar Anncio"]})]})]})})]})}function WW(){return d.jsxs("div",{className:"container max-w-3xl py-10",children:[d.jsxs("div",{className:"mb-8 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Vender Artigo"}),d.jsx("p",{className:"text-muted-foreground mt-2",children:"Preencha os detalhes do seu artigo para o colocar  venda."})]}),d.jsx(qW,{})]})}const KW=({rating:n,totalStars:e=5,className:t})=>{const r=Math.floor(n),s=n%1,i=e-Math.ceil(n);return d.jsxs("div",{className:me("flex items-center gap-0.5",t),children:[[...Array(r)].map((o,a)=>d.jsx(Uc,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"},`full-${a}`)),s>0&&d.jsxs("div",{className:"relative h-5 w-5",children:[d.jsx(Uc,{className:"h-5 w-5 text-yellow-400"}),d.jsx("div",{className:"absolute top-0 left-0 h-full overflow-hidden",style:{width:`${s*100}%`},children:d.jsx(Uc,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"})})]}),[...Array(i)].map((o,a)=>d.jsx(Uc,{className:"h-5 w-5 text-gray-300"},`empty-${a}`))]})},HW=we.lazy(()=>EE(()=>import("./recharts-chart-D-GorjOM.js"),__vite__mapDeps([3,1,2])));function GW(){const{user:n}=nc(),{products:e}=ef(),[t,r]=p.useState([]),[s,i]=p.useState(!0);p.useEffect(()=>{if(!n)return;(async()=>{try{const m=el(Jc(jt,"reviews"),ir("sellerId","==",n.uid)),x=(await xm(m)).docs.map(y=>({id:y.id,...y.data()}));r(x)}catch(m){console.error("Erro ao carregar avaliaes:",m)}finally{i(!1)}})()},[n]);const o=p.useMemo(()=>n?e.filter(f=>f.userId===n.uid):[],[e,n]),a=p.useMemo(()=>o.filter(f=>f.status==="vendido").reduce((f,m)=>f+m.price,0),[o]),c=p.useMemo(()=>o.filter(f=>f.status!=="vendido").length,[o]),u=p.useMemo(()=>t.length===0?0:t.reduce((m,v)=>m+v.rating,0)/t.length,[t]),h=p.useMemo(()=>{const f={},m=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];return m.forEach(v=>{const x=new Date().getFullYear();f[`${v}-${x}`]=0}),o.filter(v=>v.status==="vendido"&&v.createdAt).forEach(v=>{const x=v.createdAt.toDate(),y=m[x.getMonth()],_=x.getFullYear(),I=`${y}-${_}`;f[I]=(f[I]||0)+v.price}),Object.entries(f).map(([v,x])=>({month:v.split("-")[0],revenue:x})).filter(v=>v.revenue>0).slice(-6)},[o]);return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight sm:text-5xl",children:"Dashboard do Vendedor"}),d.jsxs("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-muted-foreground",children:["Ol, ",n==null?void 0:n.name,"! Aqui est um resumo da sua atividade."]})]}),d.jsx(Fs,{}),d.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[d.jsxs(Dn,{children:[d.jsxs(On,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(Qn,{className:"text-sm font-medium",children:"Rendimento Total"}),d.jsx(uB,{className:"h-4 w-4 text-muted-foreground"})]}),d.jsxs(Vn,{children:[d.jsxs("div",{className:"text-2xl font-bold",children:[a.toFixed(2),""]}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Total de artigos vendidos"})]})]}),d.jsxs(Dn,{children:[d.jsxs(On,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(Qn,{className:"text-sm font-medium",children:"Artigos Ativos"}),d.jsx(_B,{className:"h-4 w-4 text-muted-foreground"})]}),d.jsxs(Vn,{children:[d.jsx("div",{className:"text-2xl font-bold",children:c}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Produtos atualmente  venda"})]})]}),d.jsxs(Dn,{children:[d.jsxs(On,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(Qn,{className:"text-sm font-medium",children:"Avaliao Mdia"}),d.jsx(Uc,{className:"h-4 w-4 text-muted-foreground"})]}),d.jsxs(Vn,{children:[d.jsx("div",{className:"text-2xl font-bold",children:s?"...":u.toFixed(1)}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Baseado em ",t.length," avaliaes"]})]})]})]}),d.jsx(Fs,{}),d.jsxs(Dn,{children:[d.jsx(On,{children:d.jsx(Qn,{children:"Viso Geral das Vendas"})}),d.jsx(Vn,{children:d.jsx(p.Suspense,{fallback:d.jsx("div",{className:"h-[300px] animate-pulse bg-muted rounded-lg"}),children:d.jsx(HW,{data:h})})})]}),d.jsx(Fs,{}),d.jsxs("div",{className:"mt-8",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"ltimas Avaliaes"}),s?d.jsx("p",{className:"text-muted-foreground",children:"Carregando avaliaes..."}):t.length===0?d.jsx("p",{className:"text-muted-foreground",children:"Nenhuma avaliao recebida ainda."}):d.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.slice(0,3).map(f=>d.jsxs(Dn,{children:[d.jsx(On,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"font-semibold",children:f.buyerName}),d.jsx(KW,{rating:f.rating})]})}),d.jsx(Vn,{children:d.jsx("p",{className:"text-muted-foreground",children:f.comment})})]},f.id))})]})]})}function QW(){return d.jsx("div",{className:"container py-10",children:d.jsx(GW,{})})}function XW(){const{id:n}=Sk();return d.jsxs("div",{className:"container py-20 text-center",children:[d.jsxs("h1",{className:"text-2xl font-bold",children:["Detalhes do Produto ",n]}),d.jsx("p",{className:"text-muted-foreground",children:"Pgina em construo..."})]})}const YW=rc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cv=p.forwardRef(({className:n,variant:e,...t},r)=>d.jsx("div",{ref:r,role:"alert",className:me(YW({variant:e}),n),...t}));Cv.displayName="Alert";const ZW=p.forwardRef(({className:n,...e},t)=>d.jsx("h5",{ref:t,className:me("mb-1 font-medium leading-none tracking-tight",n),...e}));ZW.displayName="AlertTitle";const Pv=p.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:me("text-sm [&_p]:leading-relaxed",n),...e}));Pv.displayName="AlertDescription";function JW(){const[n,e]=p.useState(""),[t,r]=p.useState(""),[s,i]=p.useState(""),[o,a]=p.useState(!1),c=jn(),u=async h=>{if(h.preventDefault(),i(""),a(!0),!qn){i("Erro interno: Autenticao no configurada."),a(!1);return}try{await J2(qn,n,t),c("/dashboard")}catch(f){console.error("Login error:",f),f.code==="auth/invalid-credential"?i("Email ou palavra-passe incorretos."):f.code==="auth/user-not-found"?i("Utilizador no encontrado."):f.code==="auth/wrong-password"?i("Palavra-passe incorreta."):i("Ocorreu um erro ao iniciar sesso. Tente novamente.")}finally{a(!1)}};return d.jsx("div",{className:"container flex items-center justify-center min-h-[calc(100vh-200px)] py-10",children:d.jsxs(Dn,{className:"w-full max-w-md",children:[d.jsxs(On,{className:"space-y-1",children:[d.jsx(Qn,{className:"text-2xl font-bold text-center",children:"Bem-vindo de volta"}),d.jsx(Rl,{className:"text-center",children:"Introduza o seu email e palavra-passe para entrar na sua conta"})]}),d.jsx(Vn,{children:d.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s&&d.jsx(Cv,{variant:"destructive",children:d.jsx(Pv,{children:s})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"email",children:"Email"}),d.jsx(un,{id:"email",type:"email",placeholder:"exemplo@email.com",value:n,onChange:h=>e(h.target.value),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(Qe,{htmlFor:"password",children:"Palavra-passe"}),d.jsx(Oe,{to:"/forgot-password",className:"text-sm font-medium text-primary hover:underline",children:"Esqueceu-se da palavra-passe?"})]}),d.jsx(un,{id:"password",type:"password",value:t,onChange:h=>r(h.target.value),required:!0})]}),d.jsx(rt,{type:"submit",className:"w-full",disabled:o,children:o?d.jsxs(d.Fragment,{children:[d.jsx(El,{className:"mr-2 h-4 w-4 animate-spin"}),"A entrar..."]}):"Entrar"})]})}),d.jsx(vf,{className:"flex flex-col space-y-2 text-center",children:d.jsxs("div",{className:"text-sm text-muted-foreground",children:["Ainda no tem conta?"," ",d.jsx(Oe,{to:"/register",className:"font-medium text-primary hover:underline",children:"Registar"})]})})]})})}function eK(){const[n,e]=p.useState(""),[t,r]=p.useState(""),[s,i]=p.useState(""),[o,a]=p.useState(""),[c,u]=p.useState(""),[h,f]=p.useState(!1),m=jn(),v=async x=>{if(x.preventDefault(),u(""),s!==o){u("As palavras-passe no coincidem.");return}if(s.length<6){u("A palavra-passe deve ter pelo menos 6 caracteres.");return}if(f(!0),!qn){u("Erro interno: Autenticao no configurada."),f(!1);return}try{const _=(await Z2(qn,t,s)).user;await tL(_,{displayName:n}),await vy(yn(jt,"users",_.uid),{username:n,email:t,favorites:[],preferredBrands:[],preferredSizes:[],walletBalance:0,wallet:{available:0,pending:0},createdAt:fd()}),m("/dashboard")}catch(y){console.error("Register error:",y),y.code==="auth/email-already-in-use"?u("Este email j est a ser utilizado."):y.code==="auth/invalid-email"?u("Email invlido."):y.code==="auth/weak-password"?u("A palavra-passe  demasiado fraca."):u("Ocorreu um erro ao criar a conta. Tente novamente.")}finally{f(!1)}};return d.jsx("div",{className:"container flex items-center justify-center min-h-[calc(100vh-200px)] py-10",children:d.jsxs(Dn,{className:"w-full max-w-md",children:[d.jsxs(On,{className:"space-y-1",children:[d.jsx(Qn,{className:"text-2xl font-bold text-center",children:"Criar Conta"}),d.jsx(Rl,{className:"text-center",children:"Preencha os dados abaixo para criar a sua conta"})]}),d.jsx(Vn,{children:d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c&&d.jsx(Cv,{variant:"destructive",children:d.jsx(Pv,{children:c})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"name",children:"Nome"}),d.jsx(un,{id:"name",type:"text",placeholder:"O seu nome",value:n,onChange:x=>e(x.target.value),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"email",children:"Email"}),d.jsx(un,{id:"email",type:"email",placeholder:"exemplo@email.com",value:t,onChange:x=>r(x.target.value),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"password",children:"Palavra-passe"}),d.jsx(un,{id:"password",type:"password",value:s,onChange:x=>i(x.target.value),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(Qe,{htmlFor:"confirmPassword",children:"Confirmar Palavra-passe"}),d.jsx(un,{id:"confirmPassword",type:"password",value:o,onChange:x=>a(x.target.value),required:!0})]}),d.jsx(rt,{type:"submit",className:"w-full",disabled:h,children:h?d.jsxs(d.Fragment,{children:[d.jsx(El,{className:"mr-2 h-4 w-4 animate-spin"}),"A criar conta..."]}):"Registar"})]})}),d.jsx(vf,{className:"flex flex-col space-y-2 text-center",children:d.jsxs("div",{className:"text-sm text-muted-foreground",children:["J tem conta?"," ",d.jsx(Oe,{to:"/login",className:"font-medium text-primary hover:underline",children:"Entrar"})]})})]})})}const tK=()=>d.jsx("div",{className:"container py-20 text-center",children:"Pgina no encontrada"});function nK(){return d.jsx(L1,{children:d.jsx(Xk,{children:d.jsx(D4,{children:d.jsx(F4,{children:d.jsxs(B4,{children:[d.jsx(A$,{children:d.jsxs("div",{className:"flex min-h-screen flex-col",children:[d.jsx(Y3,{}),d.jsx("main",{id:"main-content",className:"flex-1",role:"main",children:d.jsxs($k,{children:[d.jsx(Vr,{path:"/",element:d.jsx(bz,{})}),d.jsx(Vr,{path:"/catalog",element:d.jsx(Fq,{})}),d.jsx(Vr,{path:"/sell",element:d.jsx(WW,{})}),d.jsx(Vr,{path:"/dashboard",element:d.jsx(QW,{})}),d.jsx(Vr,{path:"/product/:id",element:d.jsx(XW,{})}),d.jsx(Vr,{path:"/login",element:d.jsx(JW,{})}),d.jsx(Vr,{path:"/register",element:d.jsx(eK,{})}),d.jsx(Vr,{path:"*",element:d.jsx(tK,{})})]})}),d.jsx(J3,{})]})}),d.jsx(v$,{})]})})})})})}const fK=Object.freeze(Object.defineProperty({__proto__:null,default:nK},Symbol.toStringTag,{value:"Module"}));export{fK as A,rt as B,IC as I,Oe as L,lA as R,O3 as S,OB as T,bC as a,L3 as b,tt as c,U3 as d,Fs as e,F3 as f,aA as g,M0 as u};
